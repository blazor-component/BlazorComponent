{"version":3,"file":"blazor-component.js","sources":["../../../BlazorComponent.Web/src/directive/ripple.ts","../../../BlazorComponent.Web/src/directive/index.ts","../../../BlazorComponent.Web/src/utils/helper.ts","../../../BlazorComponent.Web/src/events/EventType.ts","../../../BlazorComponent.Web/src/events/extra.ts","../../../BlazorComponent.Web/src/events/index.ts","../../../BlazorComponent.Web/src/interop.ts","../../../BlazorComponent.Web/src/mixins/overlayable/index.ts","../../../BlazorComponent.Web/src/main.ts"],"sourcesContent":["const calculate = (e, el) => {\r\n  let localX = 0;\r\n  let localY = 0;\r\n\r\n  const offset = el.getBoundingClientRect();\r\n  const target = e;\r\n\r\n  localX = target.clientX - offset.left;\r\n  localY = target.clientY - offset.top;\r\n\r\n  let radius = 0;\r\n  let scale = 0.3;\r\n\r\n  radius = Math.sqrt(el.clientWidth ** 2 + el.clientHeight ** 2) / 2;\r\n\r\n  const centerX = `${(el.clientWidth - radius * 2) / 2}px`;\r\n  const centerY = `${(el.clientHeight - radius * 2) / 2}px`;\r\n\r\n  const x = `${localX - radius}px`;\r\n  const y = `${localY - radius}px`;\r\n\r\n  return { radius, scale, x, y, centerX, centerY };\r\n};\r\n\r\nfunction transform(el, value) {\r\n  el.style.transform = value;\r\n  el.style.webkitTransform = value;\r\n}\r\n\r\nfunction opacity(el, value) {\r\n  el.style.opacity = value.toString();\r\n}\r\n\r\nconst ripples = {\r\n  /* eslint-disable max-statements */\r\n  show(e, el) {\r\n    const container = document.createElement(\"span\");\r\n    const animation = document.createElement(\"span\");\r\n\r\n    container.appendChild(animation);\r\n    container.className = \"m-ripple__container\";\r\n\r\n    const { radius, scale, x, y, centerX, centerY } = calculate(e, el);\r\n\r\n    const size = `${radius * 2}px`;\r\n    animation.className = \"m-ripple__animation\";\r\n    animation.style.width = size;\r\n    animation.style.height = size;\r\n\r\n    el.appendChild(container);\r\n\r\n    const computed = window.getComputedStyle(el);\r\n    if (computed && computed.position === \"static\") {\r\n      el.style.position = \"relative\";\r\n      el.dataset.previousPosition = \"static\";\r\n    }\r\n\r\n    animation.classList.add(\"m-ripple__animation--enter\");\r\n    animation.classList.add(\"m-ripple__animation--visible\");\r\n    transform(\r\n      animation,\r\n      `translate(${x}, ${y}) scale3d(${scale},${scale},${scale})`\r\n    );\r\n    opacity(animation, 0);\r\n    animation.dataset.activated = String(performance.now());\r\n\r\n    setTimeout(() => {\r\n      animation.classList.remove(\"m-ripple__animation--enter\");\r\n      animation.classList.add(\"m-ripple__animation--in\");\r\n      transform(animation, `translate(${centerX}, ${centerY}) scale3d(1,1,1)`);\r\n      opacity(animation, 0.25);\r\n    }, 0);\r\n  },\r\n\r\n  hide(el) {\r\n    const ripples = el.getElementsByClassName(\"m-ripple__animation\");\r\n\r\n    if (ripples.length === 0) return;\r\n    const animation = ripples[ripples.length - 1];\r\n\r\n    if (animation.dataset.isHiding) return;\r\n    else animation.dataset.isHiding = \"true\";\r\n\r\n    const diff = performance.now() - Number(animation.dataset.activated);\r\n    const delay = Math.max(250 - diff, 0);\r\n\r\n    setTimeout(() => {\r\n      animation.classList.remove(\"m-ripple__animation--in\");\r\n      animation.classList.add(\"m-ripple__animation--out\");\r\n      opacity(animation, 0);\r\n\r\n      setTimeout(() => {\r\n        const ripples = el.getElementsByClassName(\"m-ripple__animation\");\r\n        if (ripples.length === 1 && el.dataset.previousPosition) {\r\n          el.style.position = el.dataset.previousPosition;\r\n          delete el.dataset.previousPosition;\r\n        }\r\n\r\n        animation.parentNode && el.removeChild(animation.parentNode);\r\n      }, 300);\r\n    }, delay);\r\n  },\r\n};\r\n\r\nexport function rippleShow(e) {\r\n  ripples.show(e, e.currentTarget);\r\n}\r\n\r\nexport function rippleHide(e) {\r\n  ripples.hide(e.currentTarget);\r\n}\r\n","import { rippleHide, rippleShow } from \"./ripple\";\r\n\r\nfunction rippleHideWrapper(e) {\r\n    rippleHide(e)\r\n}\r\n\r\nexport default function registerDirective() {\r\n  var observer = new MutationObserver(function (mutationsList) {\r\n    for (let mutation of mutationsList) {\r\n      if (mutation.type === \"childList\") {\r\n        var target: any = mutation.target;\r\n        //ripple\r\n        if (!target._bind && target.attributes[\"ripple\"]) {\r\n          target.addEventListener(\"mousedown\", rippleShow);\r\n          target.addEventListener(\"mouseup\", rippleHideWrapper);\r\n          target.addEventListener(\"mouseleave\", rippleHideWrapper);\r\n\r\n          target._bind = true;\r\n        } else if (target.nodeName == \"BODY\") {\r\n          var rippleEls = document.querySelectorAll(\"[ripple]\");\r\n          for (let rippleEl of rippleEls) {\r\n            var el: any = rippleEl;\r\n            if (!el._bind) {\r\n              el.addEventListener(\"mousedown\", rippleShow);\r\n              el.addEventListener(\"mouseup\", (e) => rippleHide(e));\r\n              el.addEventListener(\"mouseleave\", (e) => rippleHide(e));\r\n\r\n              el._bind = true;\r\n            }\r\n          }\r\n        }\r\n      } else if (mutation.type === \"attributes\") {\r\n        //ripple\r\n        if (mutation.attributeName == \"ripple\") {\r\n          var target: any = mutation.target;\r\n          if (target.attributes[\"ripple\"]) {\r\n            target.addEventListener(\"mousedown\", rippleShow);\r\n            target.addEventListener(\"mouseup\", (e) => rippleHide(e));\r\n            target.addEventListener(\"mouseleave\", (e) => rippleHide(e));\r\n          } else {\r\n            target.removeEventListener(\"mousedown\", rippleShow);\r\n            target.removeEventListener(\"mouseup\", (e) => rippleHide(e));\r\n            target.removeEventListener(\"mouseleave\", (e) => rippleHide(e));\r\n          }\r\n        }\r\n      }\r\n    }\r\n  });\r\n\r\n  observer.observe(document, {\r\n    attributes: true,\r\n    subtree: true,\r\n    childList: true,\r\n    attributeFilter: [\"ripple\"],\r\n  });\r\n}\r\n","export function addOnceEventListener (\r\n  el: EventTarget,\r\n  eventName: string,\r\n  cb: (event: Event) => void,\r\n  options: boolean | AddEventListenerOptions = false\r\n): void {\r\n  const once = (event: Event) => {\r\n    cb(event)\r\n    el.removeEventListener(eventName, once, options)\r\n  }\r\n\r\n  el.addEventListener(eventName, once, options)\r\n}\r\n\r\nlet passiveSupported = false\r\ntry {\r\n  if (typeof window !== 'undefined') {\r\n    const testListenerOpts = Object.defineProperty({}, 'passive', {\r\n      get: () => {\r\n        passiveSupported = true\r\n      },\r\n    })\r\n\r\n    window.addEventListener('testListener' as any, testListenerOpts as any, testListenerOpts)\r\n    window.removeEventListener('testListener' as any, testListenerOpts as any, testListenerOpts)\r\n  }\r\n} catch (e) { console.warn(e) } /* eslint-disable-line no-console */\r\nexport { passiveSupported }\r\n\r\nexport function addPassiveEventListener (\r\n  el: EventTarget,\r\n  event: string,\r\n  cb: ((e: any) => void),\r\n  options: {}\r\n): void {\r\n  el.addEventListener(event, cb, passiveSupported ? options : false)\r\n}\r\n\r\nexport function getZIndex (el?: Element | null): number {\r\n  if (!el || el.nodeType !== Node.ELEMENT_NODE) return 0\r\n\r\n  const index = +window.getComputedStyle(el).getPropertyValue('z-index')\r\n\r\n  if (!index) return getZIndex(el.parentNode as Element)\r\n  return index\r\n}\r\n\r\n// KeyboardEvent.keyCode aliases\r\nexport const keyCodes = Object.freeze({\r\n  enter: 13,\r\n  tab: 9,\r\n  delete: 46,\r\n  esc: 27,\r\n  space: 32,\r\n  up: 38,\r\n  down: 40,\r\n  left: 37,\r\n  right: 39,\r\n  end: 35,\r\n  home: 36,\r\n  del: 46,\r\n  backspace: 8,\r\n  insert: 45,\r\n  pageup: 33,\r\n  pagedown: 34,\r\n  shift: 16,\r\n})\r\n\r\n/**  Polyfill for Event.prototype.composedPath */\r\nexport function composedPath (e: Event): EventTarget[] {\r\n  if (e.composedPath) return e.composedPath()\r\n\r\n  const path = []\r\n  let el = e.target as Element\r\n\r\n  while (el) {\r\n    path.push(el)\r\n\r\n    if (el.tagName === 'HTML') {\r\n      path.push(document)\r\n      path.push(window)\r\n\r\n      return path\r\n    }\r\n\r\n    el = el.parentElement!\r\n  }\r\n  return path\r\n}\r\n\r\nexport function getBlazorId(el) {\r\n  let _bl_ = el.getAttributeNames().find(a => a.startsWith('_bl_'))\r\n  if (_bl_) {\r\n    _bl_ = _bl_.substring(4);\r\n  }\r\n\r\n  return _bl_;\r\n}\r\n\r\nexport function getElementSelector(el) {\r\n  if (!(el instanceof Element))\r\n    return;\r\n  var path = [];\r\n  while (el.nodeType === Node.ELEMENT_NODE) {\r\n    var selector = el.nodeName.toLowerCase();\r\n    if (el.id) {\r\n      selector += '#' + el.id;\r\n      path.unshift(selector);\r\n      break;\r\n    } else {\r\n      var sib = el, nth = 1;\r\n      while (sib = sib.previousElementSibling) {\r\n        if (sib.nodeName.toLowerCase() == selector)\r\n          nth++;\r\n      }\r\n      if (nth != 1)\r\n        selector += \":nth-of-type(\" + nth + \")\";\r\n    }\r\n    path.unshift(selector);\r\n    el = el.parentNode;\r\n  }\r\n  return path.join(\" > \");\r\n}\r\n\r\nexport function getDom(element) {\r\n  if (!element) {\r\n    element = document.body;\r\n  } else if (typeof element === 'string') {\r\n    if (element === 'document') {\r\n      return document.documentElement;\r\n    } else if (element.indexOf('.') > 0) {\r\n      let array = element.split('.');\r\n      let el = document.querySelector(array[0]);\r\n      if (!el) {\r\n        return null;\r\n      }\r\n\r\n      element = el[array[1]];\r\n    } else {\r\n      element = document.querySelector(element);\r\n    }\r\n  }\r\n  return element;\r\n}\r\n\r\nexport const canUseDom = !!(\r\n  typeof window !== 'undefined' &&\r\n  typeof document !== 'undefined' &&\r\n  window.document &&\r\n  window.document.createElement\r\n)\r\n","// see https://github.com/dotnet/aspnetcore/blob/main/src/Components/Web.JS/src/Rendering/Events/EventTypes.ts\r\n// updated at 2022/08/31\r\n\r\nexport function parseMouseEvent(event: MouseEvent): Blazor.MouseEventArgs {\r\n  return {\r\n    detail: event.detail,\r\n    screenX: event.screenX,\r\n    screenY: event.screenY,\r\n    clientX: event.clientX,\r\n    clientY: event.clientY,\r\n    offsetX: event.offsetX,\r\n    offsetY: event.offsetY,\r\n    pageX: event.pageX,\r\n    pageY: event.pageY,\r\n    button: event.button,\r\n    buttons: event.buttons,\r\n    ctrlKey: event.ctrlKey,\r\n    shiftKey: event.shiftKey,\r\n    altKey: event.altKey,\r\n    metaKey: event.metaKey,\r\n    type: event.type,\r\n  } as Blazor.MouseEventArgs;\r\n}\r\n\r\nexport function parseTouchEvent(event: TouchEvent): Blazor.TouchEventArgs {\r\n  return {\r\n    detail: event.detail,\r\n    touches: parseTouch(event.touches),\r\n    targetTouches: parseTouch(event.targetTouches),\r\n    changedTouches: parseTouch(event.changedTouches),\r\n    ctrlKey: event.ctrlKey,\r\n    shiftKey: event.shiftKey,\r\n    altKey: event.altKey,\r\n    metaKey: event.metaKey,\r\n    type: event.type,\r\n  };\r\n}\r\n\r\nfunction parseTouch(touchList: TouchList): Blazor.TouchPoint[] {\r\n  const touches: Blazor.TouchPoint[] = [];\r\n\r\n  for (let i = 0; i < touchList.length; i++) {\r\n    const touch = touchList[i];\r\n    touches.push({\r\n      identifier: touch.identifier,\r\n      clientX: touch.clientX,\r\n      clientY: touch.clientY,\r\n      screenX: touch.screenX,\r\n      screenY: touch.screenY,\r\n      pageX: touch.pageX,\r\n      pageY: touch.pageY,\r\n    });\r\n  }\r\n  return touches;\r\n}\r\n\r\nexport function parseChangeEvent(event: Event): Blazor.ChangeEventArgs {\r\n  const element = event.target as Element;\r\n  if (isTimeBasedInput(element)) {\r\n    const normalizedValue = normalizeTimeBasedValue(element);\r\n    return { value: normalizedValue };\r\n  } else if (isMultipleSelectInput(element)) {\r\n    const selectElement = element as HTMLSelectElement;\r\n    const selectedValues = Array.from(selectElement.options)\r\n      .filter((option) => option.selected)\r\n      .map((option) => option.value);\r\n    return { value: selectedValues };\r\n  } else {\r\n    const targetIsCheckbox = isCheckbox(element);\r\n    const newValue = targetIsCheckbox ? !!element[\"checked\"] : element[\"value\"];\r\n    return { value: newValue };\r\n  }\r\n}\r\n\r\nfunction isTimeBasedInput(element: Element): element is HTMLInputElement {\r\n  return timeBasedInputs.indexOf(element.getAttribute(\"type\")!) !== -1;\r\n}\r\n\r\nconst timeBasedInputs = [\"date\", \"datetime-local\", \"month\", \"time\", \"week\"];\r\n\r\nfunction normalizeTimeBasedValue(element: HTMLInputElement): string {\r\n  const value = element.value;\r\n  const type = element.type;\r\n  switch (type) {\r\n    case \"date\":\r\n    case \"month\":\r\n      return value;\r\n    case \"datetime-local\":\r\n      return value.length === 16 ? value + \":00\" : value; // Convert yyyy-MM-ddTHH:mm to yyyy-MM-ddTHH:mm:00\r\n    case \"time\":\r\n      return value.length === 5 ? value + \":00\" : value; // Convert hh:mm to hh:mm:00\r\n    case \"week\":\r\n      // For now we are not going to normalize input type week as it is not trivial\r\n      return value;\r\n  }\r\n\r\n  throw new Error(`Invalid element type '${type}'.`);\r\n}\r\n\r\nfunction isMultipleSelectInput(element: Element): element is HTMLSelectElement {\r\n  return (\r\n    element instanceof HTMLSelectElement && element.type === \"select-multiple\"\r\n  );\r\n}\r\n\r\nfunction isCheckbox(element: Element | null): boolean {\r\n  return (\r\n    !!element &&\r\n    element.tagName === \"INPUT\" &&\r\n    element.getAttribute(\"type\") === \"checkbox\"\r\n  );\r\n}\r\n","import { getElementSelector } from \"../utils/helper\";\r\nimport { parseMouseEvent, parseTouchEvent } from \"./EventType\";\r\n\r\nexport function registerExtraMouseEvent(eventType: string, eventName: string) {\r\n  if (Blazor) {\r\n    Blazor.registerCustomEventType(eventType, {\r\n      browserEventName: eventName,\r\n      createEventArgs: e => sharedCreateEventArgs(\"mouse\", e)\r\n    })\r\n  }\r\n}\r\n\r\nexport function registerExtraTouchEvent(eventType: string, eventName: string) {\r\n  if (Blazor) {\r\n    Blazor.registerCustomEventType(eventType, {\r\n      browserEventName: eventName,\r\n      createEventArgs: e => sharedCreateEventArgs(\"touch\", e)\r\n    })\r\n  }\r\n}\r\n\r\nfunction sharedCreateEventArgs(type: \"mouse\" | \"touch\", e: Event,) {\r\n  let args = { target: {} }\r\n  if (type === 'mouse') {\r\n    args = {\r\n      ...args,\r\n      ...parseMouseEvent(e as MouseEvent)\r\n    }\r\n  } else if (type === 'touch') {\r\n    args = {\r\n      ...args,\r\n      ...parseTouchEvent(e as TouchEvent)\r\n    }\r\n  }\r\n\r\n  if (e.target) {\r\n    const target = e.target as HTMLElement;\r\n    const elementReferenceId = target.getAttributeNames().find(a => a.startsWith('_bl_'));\r\n    if (elementReferenceId) {\r\n      args.target['elementReferenceId'] = elementReferenceId\r\n      args.target['selector'] = `[${elementReferenceId}]`\r\n    } else {\r\n      args.target['selector'] = getElementSelector(target)\r\n    }\r\n\r\n    args.target['class'] = target.getAttribute('class')\r\n  }\r\n\r\n  return args;\r\n}","import { registerExtraMouseEvent, registerExtraTouchEvent } from \"./extra\";\r\n\r\nexport function registerExtraEvents() {\r\n    registerExtraMouseEvent(\"exmousedown\", \"mousedown\");\r\n    registerExtraMouseEvent(\"exmouseup\", \"mouseup\");\r\n    registerExtraMouseEvent(\"exclick\", \"click\");\r\n    registerExtraMouseEvent(\"exmouseleave\", \"mouseleave\");\r\n    registerExtraMouseEvent(\"exmouseenter\", \"mouseenter\");\r\n    registerExtraMouseEvent(\"exmousemove\", \"mousemove\");\r\n    registerExtraTouchEvent(\"extouchstart\", \"touchstart\");\r\n    registerEvent(\"transitionend\", \"transitionend\")\r\n}\r\n\r\nfunction registerEvent(eventType: string, eventName: string) {\r\n    if (Blazor) {\r\n        Blazor.registerCustomEventType(eventType, {\r\n            browserEventName: eventName,\r\n        })\r\n    }\r\n}","import registerDirective from \"./directive/index\";\r\nimport { registerExtraEvents } from \"./events/index\";\r\nimport { getElementSelector } from \"./utils/helper\";\r\n\r\nexport function updateCanvas(element, hue: number) {\r\n  const canvas = element as HTMLCanvasElement\r\n  const ctx = canvas.getContext('2d')\r\n\r\n  if (!ctx) return\r\n\r\n  const saturationGradient = ctx.createLinearGradient(0, 0, canvas.width, 0)\r\n  saturationGradient.addColorStop(0, 'hsla(0, 0%, 100%, 1)') // white\r\n  saturationGradient.addColorStop(1, `hsla(${hue}, 100%, 50%, 1)`)\r\n  ctx.fillStyle = saturationGradient\r\n  ctx.fillRect(0, 0, canvas.width, canvas.height)\r\n\r\n  const valueGradient = ctx.createLinearGradient(0, 0, 0, canvas.height)\r\n  valueGradient.addColorStop(0, 'hsla(0, 0%, 100%, 0)') // transparent\r\n  valueGradient.addColorStop(1, 'hsla(0, 0%, 0%, 1)') // black\r\n  ctx.fillStyle = valueGradient\r\n  ctx.fillRect(0, 0, canvas.width, canvas.height)\r\n}\r\n\r\nexport function getZIndex(el?: Element | null): number {\r\n  if (!el || el.nodeType !== Node.ELEMENT_NODE) return 0\r\n\r\n  const index = +window.getComputedStyle(el).getPropertyValue('z-index')\r\n\r\n  if (!index) return getZIndex(el.parentNode as Element)\r\n  return index\r\n}\r\n\r\nexport function addStepperEventListener(element: HTMLElement, isActive: Boolean) {\r\n  if (element?.addEventListener) {\r\n    element.addEventListener(\r\n      'transitionend',\r\n      e => onTransition(e, isActive, element),\r\n      false\r\n    );\r\n  }\r\n}\r\n\r\nexport function removeStepperEventListener(element: HTMLElement, isActive: Boolean) {\r\n  if (element?.removeEventListener) {\r\n    element.removeEventListener(\r\n      'transitionend',\r\n      e => onTransition(e, isActive, element),\r\n      false\r\n    );\r\n  }\r\n}\r\n\r\nexport function initStepperWrapper(element: HTMLElement) {\r\n  if (!element.classList.contains('active')) {\r\n    element.style.display = 'none';\r\n  }\r\n\r\n  var observer = new MutationObserver(function (mutationsList) {\r\n    for (let mutation of mutationsList) {\r\n      if (mutation.type === 'attributes') {\r\n        if (mutation.attributeName == 'class') {\r\n          var target: HTMLElement = mutation.target as HTMLElement;\r\n          if (target.classList.contains('active')) {\r\n            target.style.display = '';\r\n            enter(target, true);\r\n          } else {\r\n            leave(target);\r\n            setTimeout(() => {\r\n              target.style.display = 'none';\r\n            }, 300);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  });\r\n\r\n  observer.observe(element, { attributes: true, attributeFilter: ['class'] });\r\n}\r\n\r\nfunction onTransition(e: TransitionEvent, isActive: Boolean, element: HTMLElement) {\r\n  if (!isActive ||\r\n    e.propertyName !== 'height'\r\n  ) return\r\n\r\n  element.style.height = 'auto';\r\n}\r\n\r\nfunction enter(element: HTMLElement, isActive: Boolean) {\r\n  let scrollHeight = 0\r\n\r\n  // Render bug with height\r\n  requestAnimationFrame(() => {\r\n    scrollHeight = element.scrollHeight;\r\n  });\r\n\r\n  element.style.height = 0 + 'px';\r\n  // Give the collapsing element time to collapse\r\n  setTimeout(() => isActive && (element.style.height = (scrollHeight + 'px' || 'auto')), 450)\r\n}\r\n\r\nfunction leave(element: HTMLElement) {\r\n  element.style.height = element.clientHeight + 'px';\r\n  setTimeout(() => {\r\n    element.style.height = 0 + 'px';\r\n  }, 10)\r\n}\r\n\r\nexport function getDom(element) {\r\n  if (!element) {\r\n    element = document.body;  // TODO: really ???\r\n  } else if (typeof element === 'string') {\r\n    if (element === 'document') {\r\n      return document.documentElement;\r\n    } else if (element.indexOf('.') > 0) {\r\n      let array = element.split('.');\r\n      let el = document.querySelector(array[0]);\r\n      if (!el) {\r\n        return null;\r\n      }\r\n\r\n      element = el[array[1]];\r\n    } else {\r\n      element = document.querySelector(element);\r\n    }\r\n  }\r\n  return element;\r\n}\r\n\r\nexport function getDomInfo(element, selector = \"body\") {\r\n  var result = {};\r\n\r\n  var dom = getDom(element);\r\n\r\n  if (dom) {\r\n    if (dom.style && dom.style['display'] === 'none') {\r\n      // clone and set display not none becuase\r\n      // element with display:none can not get the dom info\r\n      var cloned = dom.cloneNode(true);\r\n      cloned.style['display'] = 'inline-block';\r\n      cloned.style['z-index'] = -1000;\r\n      dom.parentElement.appendChild(cloned);\r\n\r\n      result = getDomInfoObj(cloned);\r\n\r\n      dom.parentElement.removeChild(cloned);\r\n    } else {\r\n      result = getDomInfoObj(dom);\r\n    }\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\nfunction getDomInfoObj(dom) {\r\n  var result = {};\r\n  result[\"offsetTop\"] = dom.offsetTop || 0;\r\n  result[\"offsetLeft\"] = dom.offsetLeft || 0;\r\n  result[\"scrollHeight\"] = dom.scrollHeight || 0;\r\n  result[\"scrollWidth\"] = dom.scrollWidth || 0;\r\n  result[\"scrollLeft\"] = dom.scrollLeft || 0;\r\n  result[\"scrollTop\"] = dom.scrollTop || 0;\r\n  result[\"clientTop\"] = dom.clientTop || 0;\r\n  result[\"clientLeft\"] = dom.clientLeft || 0;\r\n  result[\"clientHeight\"] = dom.clientHeight || 0;\r\n  result[\"clientWidth\"] = dom.clientWidth || 0;\r\n  var position = getElementPos(dom);\r\n  result[\"offsetWidth\"] = Math.round(position.offsetWidth) || 0;\r\n  result[\"offsetHeight\"] = Math.round(position.offsetHeight) || 0;\r\n  result[\"relativeTop\"] = Math.round(position.relativeTop) || 0;\r\n  result[\"relativeBottom\"] = Math.round(position.relativeBottom) || 0;\r\n  result[\"relativeLeft\"] = Math.round(position.relativeLeft) || 0;\r\n  result[\"relativeRight\"] = Math.round(position.relativeRight) || 0;\r\n  result[\"absoluteLeft\"] = Math.round(position.absoluteLeft) || 0;\r\n  result[\"absoluteTop\"] = Math.round(position.absoluteTop) || 0;\r\n  return result;\r\n}\r\n\r\nfunction getElementPos(element) {\r\n  var res: any = new Object();\r\n  res.x = 0;\r\n  res.y = 0;\r\n  if (element !== null) {\r\n    if (element.getBoundingClientRect) {\r\n      var viewportElement = document.documentElement;\r\n      var box = element.getBoundingClientRect();\r\n      var scrollLeft = viewportElement.scrollLeft;\r\n      var scrollTop = viewportElement.scrollTop;\r\n\r\n      res.offsetWidth = box.width;\r\n      res.offsetHeight = box.height;\r\n      res.relativeTop = box.top;\r\n      res.relativeBottom = box.bottom;\r\n      res.relativeLeft = box.left;\r\n      res.relativeRight = box.right;\r\n      res.absoluteLeft = box.left + scrollLeft;\r\n      res.absoluteTop = box.top + scrollTop;\r\n    }\r\n  }\r\n  return res;\r\n}\r\n\r\nexport function addFileClickEventListener(btn) {\r\n  if ((btn as HTMLElement).addEventListener) {\r\n    (btn as HTMLElement).addEventListener(\"click\", fileClickEvent);\r\n  }\r\n}\r\n\r\nexport function removeFileClickEventListener(btn) {\r\n  (btn as HTMLElement).removeEventListener(\"click\", fileClickEvent);\r\n}\r\n\r\nexport function fileClickEvent() {\r\n  var fileId = this.attributes[\"data-fileid\"].nodeValue;\r\n  var element = document.getElementById(fileId);\r\n  (element as HTMLInputElement).click();\r\n}\r\n\r\nexport function clearFile(element) {\r\n  element.setAttribute(\"type\", \"input\");\r\n  element.value = '';\r\n  element.setAttribute(\"type\", \"file\");\r\n}\r\n\r\nexport function getFileInfo(element) {\r\n  if (element.files && element.files.length > 0) {\r\n    var fileInfo = [];\r\n    for (var i = 0; i < element.files.length; i++) {\r\n      var file = element.files[i];\r\n      var objectUrl = getObjectURL(file);\r\n      fileInfo.push({\r\n        fileName: file.name,\r\n        size: file.size,\r\n        objectURL: objectUrl,\r\n        type: file.type\r\n      });\r\n    }\r\n\r\n    return fileInfo;\r\n  }\r\n}\r\n\r\nexport function getObjectURL(file: File) {\r\n  var url = null;\r\n  if (window.URL != undefined) {\r\n    url = window.URL.createObjectURL(file);\r\n  } else if (window.webkitURL != undefined) {\r\n    url = window.webkitURL.createObjectURL(file);\r\n  }\r\n  return url;\r\n}\r\n\r\nexport function uploadFile(element, index, data, headers, fileId, url, name, instance, percentMethod, successMethod, errorMethod) {\r\n  let formData = new FormData();\r\n  var file = element.files[index];\r\n  var size = file.size;\r\n  formData.append(name, file);\r\n  if (data != null) {\r\n    for (var key in data) {\r\n      formData.append(key, data[key]);\r\n    }\r\n  }\r\n  const req = new XMLHttpRequest()\r\n  req.onreadystatechange = function () {\r\n    if (req.readyState === 4) {\r\n      if (req.status != 200) {\r\n        instance.invokeMethodAsync(errorMethod, fileId, `{\"status\": ${req.status}}`);\r\n        return;\r\n      }\r\n      instance.invokeMethodAsync(successMethod, fileId, req.responseText);\r\n    }\r\n  }\r\n  req.upload.onprogress = function (event) {\r\n    var percent = Math.floor(event.loaded / size * 100);\r\n    instance.invokeMethodAsync(percentMethod, fileId, percent);\r\n  }\r\n  req.onerror = function (e) {\r\n    instance.invokeMethodAsync(errorMethod, fileId, \"error\");\r\n  }\r\n  req.open('post', url, true)\r\n  if (headers != null) {\r\n    for (var header in headers) {\r\n      req.setRequestHeader(header, headers[header]);\r\n    }\r\n  }\r\n  req.send(formData)\r\n}\r\n\r\nexport function triggerEvent(element, eventType, eventName, stopPropagation) {\r\n  var dom = getDom(element);\r\n  var evt = document.createEvent(eventType);\r\n  evt.initEvent(eventName);\r\n\r\n  if (stopPropagation) {\r\n    evt.stopPropagation();\r\n  }\r\n\r\n  return dom.dispatchEvent(evt);\r\n}\r\n\r\nexport function setProperty(element, name, value) {\r\n  var dom = getDom(element);\r\n  dom[name] = value;\r\n}\r\n\r\nexport function getBoundingClientRect(element, attach = \"body\") {\r\n  let dom = getDom(element);\r\n\r\n  var result = {}\r\n\r\n  if (dom && dom.getBoundingClientRect) {\r\n    if (dom.style && dom.style['display'] === 'none') {\r\n      var cloned = dom.cloneNode(true);\r\n      cloned.style['display'] = 'inline-block';\r\n      cloned.style['z-index'] = -1000;\r\n      document.querySelector(attach)?.appendChild(cloned);\r\n\r\n      result = cloned.getBoundingClientRect();\r\n\r\n      document.querySelector(attach)?.removeChild(cloned);\r\n    } else {\r\n      result = dom.getBoundingClientRect()\r\n    }\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\nexport function getFirstChildBoundingClientRect(element, selector = \"body\") {\r\n  let dom = getDom(element);\r\n  if (dom.firstElementChild) {\r\n    if (dom.firstElementChild.style['display'] === 'none') {\r\n      // clone and set display not none becuase\r\n      // element with display:none can not getBoundingClientRect\r\n      var cloned = dom.firstElementChild.cloneNode(true);\r\n      cloned.style['display'] = 'inline-block'\r\n      cloned.style['z-index'] = -1000\r\n      document.querySelector(selector).appendChild(cloned);\r\n      var value = getBoundingClientRect(cloned);\r\n      document.querySelector(selector).removeChild(cloned);\r\n      return value;\r\n    } else {\r\n      return getBoundingClientRect(dom.firstElementChild);\r\n    }\r\n  }\r\n  return null;\r\n}\r\n\r\nvar htmlElementEventListennerConfigs: { [prop: string]: any[] } = {}\r\n\r\nexport function addHtmlElementEventListener<K extends keyof HTMLElementTagNameMap>(\r\n  selector: \"window\" | \"document\" | K,\r\n  type: string,\r\n  invoker: DotNet.DotNetObject,\r\n  options?: boolean | AddEventListenerOptions,\r\n  extras?: Partial<Pick<Event, \"stopPropagation\" | \"preventDefault\">> & { relatedTarget?: string, throttle?: number, debounce?: number, key?: string }) {\r\n  let htmlElement: HTMLElement | Window\r\n\r\n  if (selector == \"window\") {\r\n    htmlElement = window;\r\n  } else if (selector == \"document\") {\r\n    htmlElement = document.documentElement;\r\n  } else {\r\n    htmlElement = document.querySelector(selector);\r\n  }\r\n\r\n  var key = extras?.key || `${selector}:${type}`;\r\n\r\n  //save for remove\r\n  var config = {};\r\n\r\n  var listener = (args: any): void => {\r\n    if (extras?.stopPropagation) {\r\n      args.stopPropagation();\r\n    }\r\n\r\n    if (extras?.preventDefault) {\r\n      args.preventDefault();\r\n    }\r\n\r\n    // mouseleave relatedTarget\r\n    if (extras?.relatedTarget && document.querySelector(extras.relatedTarget)?.contains(args.relatedTarget)) {\r\n      return;\r\n    }\r\n\r\n    const obj = {};\r\n\r\n    for (var k in args) {\r\n      if (typeof args[k] == 'string' || typeof args[k] == 'number') {\r\n        obj[k] = args[k];\r\n      } else if (k == 'target' && args.target.attributes) {\r\n        var target = {\r\n          attributes: {}\r\n        };\r\n\r\n        for (let index = 0; index < args.target.attributes.length; index++) {\r\n          const attr = args.target.attributes[index];\r\n          target.attributes[attr.name] = attr.value;\r\n        }\r\n        obj[k] = target;\r\n      } else if (k == 'touches' || k == 'targetTouches' || k == 'changedTouches') {\r\n        var list = [];\r\n        args[k].forEach(touch => {\r\n          var item = {};\r\n\r\n          for (var attr in touch) {\r\n            if (typeof (touch[attr]) == 'string' || typeof (touch[attr]) == 'number') {\r\n              item[attr] = touch[attr];\r\n            }\r\n          }\r\n          list.push(item);\r\n        });\r\n\r\n        obj[k] = list;\r\n      }\r\n    }\r\n\r\n    invoker.invokeMethodAsync('Invoke', obj);\r\n  };\r\n\r\n  if (extras?.debounce && extras.debounce > 0) {\r\n    let timeout;\r\n    config[\"listener\"] = function (args: any) {\r\n      clearTimeout(timeout)\r\n      timeout = setTimeout(() => listener(args), extras.debounce);\r\n    }\r\n  }\r\n  else if (extras?.throttle && extras.throttle > 0) {\r\n    let throttled: boolean;\r\n    config[\"listener\"] = function (args: any) {\r\n      if (!throttled) {\r\n        listener(args)\r\n        throttled = true;\r\n        setTimeout(() => {\r\n          throttled = false;\r\n        }, (extras?.throttle ?? 0));\r\n      }\r\n    }\r\n  } else {\r\n    config[\"listener\"] = listener;\r\n  }\r\n\r\n  config['options'] = options;\r\n\r\n  if (htmlElementEventListennerConfigs[key]) {\r\n    htmlElementEventListennerConfigs[key].push(config);\r\n  } else {\r\n    htmlElementEventListennerConfigs[key] = [config]\r\n  }\r\n\r\n  if (htmlElement) {\r\n    htmlElement.addEventListener(type, config[\"listener\"], options);\r\n  }\r\n}\r\n\r\nexport function removeHtmlElementEventListener(selector, type, k?: string) {\r\n  let htmlElement: any\r\n\r\n  if (selector == \"window\") {\r\n    htmlElement = window;\r\n  } else if (selector == \"document\") {\r\n    htmlElement = document.documentElement;\r\n  } else {\r\n    htmlElement = document.querySelector(selector);\r\n  }\r\n\r\n  var k = k || `${selector}:${type}`;\r\n\r\n  var configs = htmlElementEventListennerConfigs[k];\r\n\r\n  if (configs) {\r\n    configs.forEach(item => {\r\n      htmlElement?.removeEventListener(type, item[\"listener\"], item['options']);\r\n    });\r\n\r\n    htmlElementEventListennerConfigs[k] = []\r\n  }\r\n}\r\n\r\nvar outsideClickListenerCaches: { [key: string]: any } = {}\r\n\r\nexport function addOutsideClickEventListener(invoker, noInvokeSelectors: string[], invokeSelectors: string[]) {\r\n  if (!noInvokeSelectors) return;\r\n\r\n  noInvokeSelectors = noInvokeSelectors.filter(s => !!s)\r\n\r\n  var listener = function (args) {\r\n    var exists = noInvokeSelectors.some(s => getDom(s)?.contains(args.target));\r\n    if (exists) return;\r\n\r\n    var pointerSelector = getElementSelector(args.target)\r\n\r\n    if (invokeSelectors) {\r\n      if (invokeSelectors.some(s => getDom(s)?.contains(args.target))) {\r\n        invoker.invokeMethodAsync(\"Invoke\", {pointerSelector});\r\n      }\r\n    } else {\r\n      invoker.invokeMethodAsync(\"Invoke\", {pointerSelector});\r\n    }\r\n  }\r\n\r\n  document.addEventListener(\"click\", listener, true);\r\n\r\n  var key = `(${noInvokeSelectors.join(',')})document:click`\r\n\r\n  outsideClickListenerCaches[key] = listener;\r\n}\r\n\r\nexport function removeOutsideClickEventListener(noInvokeSelectors: string[]) {\r\n  if (!noInvokeSelectors) return;\r\n\r\n  noInvokeSelectors = noInvokeSelectors.filter(s => !!s)\r\n\r\n  var key = `(${noInvokeSelectors.join(',')})document:click`\r\n\r\n  if (outsideClickListenerCaches[key]) {\r\n    document.removeEventListener('click', outsideClickListenerCaches[key], true);\r\n    outsideClickListenerCaches[key] = undefined\r\n  }\r\n}\r\n\r\nexport function addMouseleaveEventListener(selector) {\r\n  var htmlElement = document.querySelector(selector);\r\n  if (htmlElement) {\r\n    htmlElement.addEventListener()\r\n  }\r\n}\r\n\r\nexport function contains(e1, e2) {\r\n  const dom1 = getDom(e1);\r\n  if (dom1 && dom1.contains) {\r\n    return dom1.contains(getDom(e2));\r\n  }\r\n  return false;\r\n}\r\n\r\nexport function equalsOrContains(e1: any, e2: any) {\r\n  const dom1 = getDom(e1);\r\n  const dom2 = getDom(e2);\r\n  return !!dom1 && dom1.contains && !!dom2 && (dom1 == dom2 || dom1.contains(dom2));\r\n}\r\n\r\nexport function matchMedia(query) {\r\n  return window.matchMedia(query).matches;\r\n}\r\n\r\nfunction fallbackCopyTextToClipboard(text) {\r\n  var textArea = document.createElement(\"textarea\");\r\n  textArea.value = text;\r\n\r\n  // Avoid scrolling to bottom\r\n  textArea.style.top = \"0\";\r\n  textArea.style.left = \"0\";\r\n  textArea.style.position = \"fixed\";\r\n\r\n  document.body.appendChild(textArea);\r\n  textArea.focus();\r\n  textArea.select();\r\n\r\n  try {\r\n    var successful = document.execCommand('copy');\r\n    var msg = successful ? 'successful' : 'unsuccessful';\r\n    console.log('Fallback: Copying text command was ' + msg);\r\n  } catch (err) {\r\n    console.error('Fallback: Oops, unable to copy', err);\r\n  }\r\n\r\n  document.body.removeChild(textArea);\r\n}\r\n\r\nexport function copy(text) {\r\n  if (!navigator.clipboard) {\r\n    fallbackCopyTextToClipboard(text);\r\n    return;\r\n  }\r\n  navigator.clipboard.writeText(text).then(function () {\r\n    console.log('Async: Copying to clipboard was successful!');\r\n  }, function (err) {\r\n    console.error('Async: Could not copy text: ', err);\r\n  });\r\n}\r\n\r\nexport function focus(selector, noScroll: boolean = false) {\r\n  let dom = getDom(selector);\r\n  if (!(dom instanceof HTMLElement))\r\n    throw new Error(\"Unable to focus an invalid element.\");\r\n  dom.focus({\r\n    preventScroll: noScroll\r\n  })\r\n}\r\n\r\nexport function select(selector) {\r\n  let dom = getDom(selector);\r\n  if (!(dom instanceof HTMLInputElement || dom instanceof HTMLTextAreaElement))\r\n    throw new Error(\"Unable to select an invalid element\")\r\n  dom.select()\r\n}\r\n\r\nexport function hasFocus(selector) {\r\n  let dom = getDom(selector);\r\n  return (document.activeElement === dom);\r\n}\r\n\r\nexport function blur(selector) {\r\n  let dom = getDom(selector);\r\n  dom.blur();\r\n}\r\n\r\nexport function log(text) {\r\n  console.log(text);\r\n}\r\n\r\nexport function backTop(target: string) {\r\n  let dom = getDom(target);\r\n  if (dom) {\r\n    slideTo(dom.scrollTop);\r\n  } else {\r\n    slideTo(0);\r\n  }\r\n}\r\n\r\nfunction slideTo(targetPageY) {\r\n  var timer = setInterval(function () {\r\n    var currentY = document.documentElement.scrollTop || document.body.scrollTop;\r\n    var distance = targetPageY > currentY ? targetPageY - currentY : currentY - targetPageY;\r\n    var speed = Math.ceil(distance / 10);\r\n    if (currentY == targetPageY) {\r\n      clearInterval(timer);\r\n    } else {\r\n      window.scrollTo(0, targetPageY > currentY ? currentY + speed : currentY - speed);\r\n    }\r\n  }, 10);\r\n}\r\n\r\nexport function scrollTo(target) {\r\n  let dom = getDom(target);\r\n  if (dom instanceof HTMLElement) {\r\n    dom.scrollIntoView({\r\n      behavior: \"smooth\",\r\n      block: \"start\",\r\n      inline: \"nearest\"\r\n    });\r\n  }\r\n}\r\n\r\nexport function scrollToActiveElement(container, target) {\r\n  let dom: HTMLElement = getDom(container);\r\n\r\n  target = dom.querySelector('.active') as HTMLElement;\r\n  if (!target) {\r\n    return;\r\n  }\r\n\r\n  dom.scrollTop = target.offsetTop - dom.offsetHeight / 2 + target.offsetHeight / 2;\r\n}\r\n\r\nexport function scrollToPosition(container, position) {\r\n  var dom = getDom(container);\r\n  dom.scrollTo({ top: position, behavior: 'smooth'})\r\n}\r\n\r\nexport function getFirstChildDomInfo(element, selector = \"body\") {\r\n  var dom = getDom(element);\r\n  if (dom.firstElementChild)\r\n    return getDomInfo(dom.firstElementChild, selector);\r\n  return getDomInfo(dom, selector);\r\n}\r\n\r\nexport function addClsToFirstChild(element, className) {\r\n  var dom = getDom(element);\r\n  if (dom.firstElementChild) {\r\n    dom.firstElementChild.classList.add(className);\r\n  }\r\n}\r\n\r\nexport function removeClsFromFirstChild(element, className) {\r\n  var dom = getDom(element);\r\n  if (dom.firstElementChild) {\r\n    dom.firstElementChild.classList.remove(className);\r\n  }\r\n}\r\n\r\nexport function getAbsoluteTop(e) {\r\n  var offset = e.offsetTop;\r\n  if (e.offsetParent != null) {\r\n    offset += getAbsoluteTop(e.offsetParent);\r\n  }\r\n  return offset;\r\n}\r\n\r\nexport function getAbsoluteLeft(e) {\r\n  var offset = e.offsetLeft;\r\n  if (e.offsetParent != null) {\r\n    offset += getAbsoluteLeft(e.offsetParent);\r\n  }\r\n  return offset;\r\n}\r\n\r\nexport function addElementToBody(element) {\r\n  document.body.appendChild(element);\r\n}\r\n\r\nexport function delElementFromBody(element) {\r\n  document.body.removeChild(element);\r\n}\r\n\r\nexport function addElementTo(addElement, elementSelector) {\r\n  let parent = getDom(elementSelector);\r\n  if (parent && addElement) {\r\n    parent.appendChild(addElement);\r\n  }\r\n}\r\n\r\nexport function delElementFrom(delElement, elementSelector) {\r\n  let parent = getDom(elementSelector);\r\n  if (parent && delElement) {\r\n    parent.removeChild(delElement);\r\n  }\r\n}\r\n\r\nexport function getActiveElement() {\r\n  let element = document.activeElement;\r\n  let id = element.getAttribute(\"id\") || \"\";\r\n  return id;\r\n}\r\n\r\nexport function focusDialog(selector: string, count: number = 0) {\r\n  let ele = <HTMLElement>document.querySelector(selector);\r\n  if (ele && !ele.hasAttribute(\"disabled\")) {\r\n    setTimeout(() => {\r\n      ele.focus();\r\n      let curId = \"#\" + getActiveElement();\r\n      if (curId !== selector) {\r\n        if (count < 10) {\r\n          focusDialog(selector, count + 1);\r\n        }\r\n      }\r\n    }, 10);\r\n  }\r\n}\r\n\r\nexport function getWindow() {\r\n  return {\r\n    innerWidth: window.innerWidth,\r\n    innerHeight: window.innerHeight,\r\n    pageXOffset: window.pageXOffset,\r\n    pageYOffset: window.pageYOffset,\r\n    isTop: window.scrollY == 0,\r\n    isBottom: (window.scrollY + window.innerHeight) == document.body.clientHeight\r\n  };\r\n}\r\n\r\nexport function getWindowAndDocumentProps(windowProps: string[] = [], documentProps: string[] = []) {\r\n  const obj = {}\r\n\r\n  if (windowProps) {\r\n    windowProps.forEach(prop => obj[prop] = window[prop]);\r\n  }\r\n\r\n  if (documentProps) {\r\n    documentProps.forEach(prop => obj[prop] = document.documentElement[prop]);\r\n  }\r\n\r\n  return obj\r\n}\r\n\r\nfunction debounce(func, wait, immediate) {\r\n  var timeout;\r\n  return () => {\r\n    const context = this, args = arguments;\r\n    const later = () => {\r\n      timeout = null;\r\n      if (!immediate) func.apply(this, args);\r\n    };\r\n    const callNow = immediate && !timeout;\r\n    clearTimeout(timeout);\r\n    timeout = setTimeout(later, wait);\r\n    if (callNow) func.apply(context, args);\r\n  };\r\n};\r\n\r\nexport function css(element: any, name: string | object, value: string | null = null) {\r\n  var dom = getDom(element);\r\n  if (typeof name === 'string') {\r\n    dom.style[name] = value;\r\n  } else {\r\n    for (let key in name) {\r\n      if (name.hasOwnProperty(key)) {\r\n        dom.style[key] = name[key];\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport function addCls(selector: Element | string, clsName: string | Array<string>) {\r\n  let element = getDom(selector);\r\n\r\n  if (typeof clsName === \"string\") {\r\n    element.classList.add(clsName);\r\n  } else {\r\n    element.classList.add(...clsName);\r\n  }\r\n}\r\n\r\nexport function removeCls(selector: Element | string, clsName: string | Array<string>) {\r\n  let element = getDom(selector);\r\n\r\n  if (typeof clsName === \"string\") {\r\n    element.classList.remove(clsName);\r\n  } else {\r\n    element.classList.remove(...clsName);\r\n  }\r\n}\r\n\r\nexport function elementScrollIntoView(selector: Element | string) {\r\n  let element = getDom(selector);\r\n\r\n  if (!element)\r\n    return;\r\n\r\n  element.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'start' });\r\n}\r\n\r\nconst oldBodyCacheStack = [];\r\n\r\nconst hasScrollbar = () => {\r\n  let overflow = document.body.style.overflow;\r\n  if (overflow && overflow === \"hidden\") return false;\r\n  return document.body.scrollHeight > (window.innerHeight || document.documentElement.clientHeight);\r\n}\r\n\r\nexport function createIconFromfontCN(scriptUrl) {\r\n  if (document.querySelector(`[data-namespace=\"${scriptUrl}\"]`)) {\r\n    return;\r\n  }\r\n  const script = document.createElement('script');\r\n  script.setAttribute('src', scriptUrl);\r\n  script.setAttribute('data-namespace', scriptUrl);\r\n  document.body.appendChild(script);\r\n}\r\n\r\nexport function getScroll() {\r\n  return { x: window.pageXOffset, y: window.pageYOffset };\r\n}\r\n\r\nexport function getInnerText(element) {\r\n  let dom = getDom(element);\r\n  return dom.innerText;\r\n}\r\n\r\nexport function getMenuOrDialogMaxZIndex(exclude: Element[] = [], element: Element) {\r\n  const base = getDom(element);\r\n  // Start with lowest allowed z-index or z-index of\r\n  // base component's element, whichever is greater\r\n  const zis = [getZIndex(base)]\r\n\r\n  const activeElements = [\r\n    ...document.getElementsByClassName('m-menu__content--active'),\r\n    ...document.getElementsByClassName('m-dialog__content--active'),\r\n  ]\r\n\r\n  // Get z-index for all active dialogs\r\n  for (let index = 0; index < activeElements.length; index++) {\r\n    if (!exclude.includes(activeElements[index])) {\r\n      zis.push(getZIndex(activeElements[index]))\r\n    }\r\n  }\r\n\r\n  return Math.max(...zis)\r\n}\r\n\r\nexport function getMaxZIndex() {\r\n  return [...document.all].reduce((r, e) => Math.max(r, +window.getComputedStyle(e).zIndex || 0), 0)\r\n}\r\n\r\nexport function getStyle(element, styleProp) {\r\n  element = getDom(element);\r\n\r\n  if (element.currentStyle) {\r\n    return element.currentStyle[styleProp];\r\n  } else if (window.getComputedStyle) {\r\n    return document.defaultView.getComputedStyle(element, null).getPropertyValue(styleProp);\r\n  }\r\n}\r\n\r\nexport function getTextAreaInfo(element) {\r\n  var result = {};\r\n  var dom = getDom(element);\r\n  result[\"scrollHeight\"] = dom.scrollHeight || 0;\r\n\r\n  if (element.currentStyle) {\r\n    result[\"lineHeight\"] = parseFloat(element.currentStyle[\"line-height\"]);\r\n    result[\"paddingTop\"] = parseFloat(element.currentStyle[\"padding-top\"]);\r\n    result[\"paddingBottom\"] = parseFloat(element.currentStyle[\"padding-bottom\"]);\r\n    result[\"borderBottom\"] = parseFloat(element.currentStyle[\"border-bottom\"]);\r\n    result[\"borderTop\"] = parseFloat(element.currentStyle[\"border-top\"]);\r\n  } else if (window.getComputedStyle) {\r\n    result[\"lineHeight\"] = parseFloat(document.defaultView.getComputedStyle(element, null).getPropertyValue(\"line-height\"));\r\n    result[\"paddingTop\"] = parseFloat(document.defaultView.getComputedStyle(element, null).getPropertyValue(\"padding-top\"));\r\n    result[\"paddingBottom\"] = parseFloat(document.defaultView.getComputedStyle(element, null).getPropertyValue(\"padding-bottom\"));\r\n    result[\"borderBottom\"] = parseFloat(document.defaultView.getComputedStyle(element, null).getPropertyValue(\"border-bottom\"));\r\n    result[\"borderTop\"] = parseFloat(document.defaultView.getComputedStyle(element, null).getPropertyValue(\"border-top\"));\r\n  }\r\n  //Firefox can return this as NaN, so it has to be handled here like that.\r\n  if (Object.is(NaN, result[\"borderTop\"]))\r\n    result[\"borderTop\"] = 1;\r\n  if (Object.is(NaN, result[\"borderBottom\"]))\r\n    result[\"borderBottom\"] = 1;\r\n  return result;\r\n}\r\n\r\nconst funcDict = {};\r\n\r\nexport function registerResizeTextArea(element, minRows, maxRows, objReference) {\r\n  if (!objReference) {\r\n    disposeResizeTextArea(element);\r\n  } else {\r\n    objReferenceDict[element.id] = objReference;\r\n    funcDict[element.id + \"input\"] = function () {\r\n      resizeTextArea(element, minRows, maxRows);\r\n    }\r\n    element.addEventListener(\"input\", funcDict[element.id + \"input\"]);\r\n    return getTextAreaInfo(element);\r\n  }\r\n}\r\n\r\nexport function disposeResizeTextArea(element) {\r\n  element.removeEventListener(\"input\", funcDict[element.id + \"input\"]);\r\n  objReferenceDict[element.id] = null;\r\n  funcDict[element.id + \"input\"] = null;\r\n\r\n}\r\n\r\nexport function resizeTextArea(element, minRows, maxRows) {\r\n  var dims = getTextAreaInfo(element);\r\n  var rowHeight = dims[\"lineHeight\"];\r\n  var offsetHeight = dims[\"paddingTop\"] + dims[\"paddingBottom\"] + dims[\"borderTop\"] + dims[\"borderBottom\"];\r\n  var oldHeight = parseFloat(element.style.height);\r\n  element.style.height = 'auto';\r\n\r\n  var rows = Math.trunc(element.scrollHeight / rowHeight);\r\n  rows = Math.max(minRows, rows);\r\n\r\n  var newHeight = 0;\r\n  if (rows > maxRows) {\r\n    rows = maxRows;\r\n\r\n    newHeight = (rows * rowHeight + offsetHeight);\r\n    element.style.height = newHeight + \"px\";\r\n    element.style.overflowY = \"visible\";\r\n  } else {\r\n    newHeight = rows * rowHeight + offsetHeight;\r\n    element.style.height = newHeight + \"px\";\r\n    element.style.overflowY = \"hidden\";\r\n  }\r\n  if (oldHeight !== newHeight) {\r\n    let textAreaObj = objReferenceDict[element.id];\r\n    textAreaObj.invokeMethodAsync(\"ChangeSizeAsyncJs\", parseFloat(element.scrollWidth), newHeight);\r\n  }\r\n}\r\n\r\n\r\nconst objReferenceDict = {};\r\n\r\nexport function disposeObj(objReferenceName) {\r\n  delete objReferenceDict[objReferenceName];\r\n}\r\n\r\nfunction mentionsOnWindowClick(e) {\r\n  let mentionsObj = objReferenceDict[\"mentions\"];\r\n  if (mentionsObj) {\r\n    mentionsObj.invokeMethodAsync(\"CloseMentionsDropDown\");\r\n  } else {\r\n    window.removeEventListener(\"click\", mentionsOnWindowClick);\r\n  }\r\n}\r\n\r\nexport function bindTableHeaderAndBodyScroll(bodyRef, headerRef) {\r\n  bodyRef.bindScrollLeftToHeader = () => {\r\n    headerRef.scrollLeft = bodyRef.scrollLeft;\r\n  }\r\n  bodyRef.addEventListener('scroll', bodyRef.bindScrollLeftToHeader);\r\n}\r\n\r\nexport function unbindTableHeaderAndBodyScroll(bodyRef) {\r\n  if (bodyRef) {\r\n    bodyRef.removeEventListener('scroll', bodyRef.bindScrollLeftToHeader);\r\n  }\r\n}\r\n\r\nfunction preventKeys(e, keys: string[]) {\r\n  if (keys.indexOf(e.key.toUpperCase()) !== -1) {\r\n    e.preventDefault();\r\n    return false;\r\n  }\r\n}\r\n\r\nexport function addPreventKeys(inputElement, keys: string[]) {\r\n  if (inputElement) {\r\n    let dom = getDom(inputElement);\r\n    keys = keys.map(function (x) {\r\n      return x.toUpperCase();\r\n    })\r\n    funcDict[inputElement.id + \"keydown\"] = (e) => preventKeys(e, keys);\r\n    (dom as HTMLElement).addEventListener(\"keydown\", funcDict[inputElement.id + \"keydown\"], false);\r\n  }\r\n}\r\n\r\nexport function removePreventKeys(inputElement) {\r\n  if (inputElement) {\r\n    let dom = getDom(inputElement);\r\n    (dom as HTMLElement).removeEventListener(\"keydown\", funcDict[inputElement.id + \"keydown\"]);\r\n    funcDict[inputElement.id + \"keydown\"] = null;\r\n  }\r\n}\r\n\r\nfunction preventKeyOnCondition(e, key: string, check: () => boolean) {\r\n  if (e.key.toUpperCase() === key.toUpperCase() && check()) {\r\n    e.preventDefault();\r\n    return false;\r\n  }\r\n}\r\n\r\nexport function addPreventEnterOnOverlayVisible(element, overlayElement) {\r\n  if (element && overlayElement) {\r\n    let dom = getDom(element);\r\n    funcDict[element.id + \"keydown:Enter\"] = (e) => preventKeyOnCondition(e, \"enter\", () => overlayElement.offsetParent !== null);\r\n    (dom as HTMLElement).addEventListener(\"keydown\", funcDict[element.id + \"keydown:Enter\"], false);\r\n  }\r\n}\r\n\r\nexport function removePreventEnterOnOverlayVisible(element) {\r\n  if (element) {\r\n    let dom = getDom(element);\r\n    (dom as HTMLElement).removeEventListener(\"keydown\", funcDict[element.id + \"keydown:Enter\"]);\r\n    funcDict[element.id + \"keydown:Enter\"] = null;\r\n  }\r\n}\r\n\r\nexport function insertAdjacentHTML(position, text: string) {\r\n  document.head.insertAdjacentHTML(position, text);\r\n}\r\n\r\nexport function getImageDimensions(src: string) {\r\n  return new Promise(function (resolve, reject) {\r\n    var img = new Image()\r\n    img.src = src\r\n    img.onload = function () {\r\n      resolve({\r\n        width: img.width,\r\n        height: img.height,\r\n        hasError: false\r\n      })\r\n    }\r\n    img.onerror = function () {\r\n      resolve({\r\n        width: 0,\r\n        height: 0,\r\n        hasError: true\r\n      })\r\n    }\r\n  })\r\n}\r\n\r\nexport function enablePreventDefaultForEvent(element: any, event: string, condition?: any) {\r\n  const dom = getDom(element);\r\n  if (!dom) return;\r\n  if (event === 'keydown') {\r\n    dom.addEventListener(event, (e: KeyboardEvent) => {\r\n      if (Array.isArray(condition)) {\r\n        var codes = condition as string[];\r\n        if (codes.includes(e.code)) {\r\n          e.preventDefault();\r\n        }\r\n      } else {\r\n        e.preventDefault();\r\n      }\r\n    })\r\n  } else {\r\n    dom.addEventListener(event, e => {\r\n      if (e.preventDefault) {\r\n        e.preventDefault();\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\nexport function resizeObserver(selector: string, invoker: DotNet.DotNetObject) {\r\n  var el = document.querySelector(selector);\r\n  if (!el) return;\r\n\r\n  const resizeObserver = new ResizeObserver((entries => {\r\n    const dimensions = [];\r\n    for (var entry of entries) {\r\n      const dimension = entry.contentRect;\r\n      dimensions.push(dimension);\r\n    }\r\n    invoker.invokeMethodAsync('Invoke', dimensions);\r\n  }));\r\n\r\n  resizeObserver.observe(el);\r\n}\r\n\r\nexport function intersectionObserver(selector: string, invokers: DotNet.DotNetObject[]) {\r\n  var el = document.querySelector(selector);\r\n  if (!el) return;\r\n\r\n  const observer = new IntersectionObserver((\r\n    entries: IntersectionObserverEntry[] = [],\r\n    observer: IntersectionObserver\r\n  ) => {\r\n    if (entries.some(e => e.isIntersecting)) {\r\n      invokers.forEach(item => {\r\n        item.invokeMethodAsync('Invoke')\r\n      })\r\n    }\r\n  })\r\n\r\n  observer.observe(el)\r\n}\r\n\r\nexport function getBoundingClientRects(selector) {\r\n  var elements = document.querySelectorAll(selector);\r\n\r\n  var result = [];\r\n\r\n  for (var i = 0; i < elements.length; i++) {\r\n    var e: Element = elements[i];\r\n    var dom = {\r\n      id: e.id,\r\n      rect: e.getBoundingClientRect()\r\n    };\r\n    result.push(dom);\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\nexport function getSize(selectors, sizeProp) {\r\n  var el = getDom(selectors);\r\n\r\n  var display = el.style.display;\r\n  var overflow = el.style.overflow;\r\n\r\n  el.style.display = \"\";\r\n  el.style.overflow = \"hidden\";\r\n\r\n  var size = el[\"offset\" + sizeProp.charAt(0).toUpperCase() + sizeProp.slice(1)] || 0;\r\n\r\n  el.style.display = display;\r\n  el.style.overflow = overflow;\r\n\r\n  return size;\r\n}\r\n\r\nexport function getProp(selectors, name) {\r\n  var el = getDom(selectors);\r\n  if (!el) {\r\n    return null;\r\n  }\r\n\r\n  return el[name];\r\n}\r\n\r\nexport function updateWindowTransition(selectors, isActive, item) {\r\n  var el: HTMLElement = getDom(selectors);\r\n  var container: HTMLElement = el.querySelector('.m-window__container');\r\n\r\n  if (item) {\r\n    var itemEl: HTMLElement = getDom(item);\r\n    container.style.height = itemEl.clientHeight + 'px';\r\n    return;\r\n  }\r\n\r\n  if (isActive) {\r\n    container.classList.add('m-window__container--is-active');\r\n    container.style.height = el.clientHeight + 'px';\r\n  } else {\r\n    container.style.height = '';\r\n    container.classList.remove('m-window__container--is-active');\r\n  }\r\n}\r\n\r\nexport function getScrollHeightWithoutHeight(selectors) {\r\n  var el: HTMLElement = getDom(selectors);\r\n  if (!el) {\r\n    return 0;\r\n  }\r\n\r\n  var height = el.style.height;\r\n  el.style.height = '0'\r\n  var scrollHeight = el.scrollHeight;\r\n  el.style.height = height;\r\n\r\n  return scrollHeight;\r\n}\r\n\r\n//register custom events\r\nwindow.onload = function () {\r\n  registerExtraEvents();\r\n  registerPasteWithData(\"pastewithdata\")\r\n  registerDirective();\r\n}\r\n\r\nfunction registerPasteWithData(customEventName) {\r\n  if (Blazor) {\r\n    Blazor.registerCustomEventType(customEventName, {\r\n      browserEventName: 'paste',\r\n      createEventArgs: (event: ClipboardEvent) => {\r\n        return {\r\n          type: event.type,\r\n          pastedData: event.clipboardData.getData('text')\r\n        };\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport function registerTextFieldOnMouseDown(element, inputElement, callback) {\r\n  if (!element || !inputElement) return\r\n\r\n  element.addEventListener('mousedown', (e: MouseEvent) => {\r\n    const target = e.target;\r\n    const inputDom = getDom(inputElement);\r\n    if (target !== inputDom) {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n    }\r\n\r\n    if (callback) {\r\n      const mouseEventArgs = {\r\n        Detail: e.detail,\r\n        ScreenX: e.screenX,\r\n        ScreenY: e.screenY,\r\n        ClientX: e.clientX,\r\n        ClientY: e.clientY,\r\n        OffsetX: e.offsetX,\r\n        OffsetY: e.offsetY,\r\n        PageX: e.pageX,\r\n        PageY: e.pageY,\r\n        Button: e.button,\r\n        Buttons: e.buttons,\r\n        CtrlKey: e.ctrlKey,\r\n        ShiftKey: e.shiftKey,\r\n        AltKey: e.altKey,\r\n        MetaKey: e.metaKey,\r\n        Type: e.type\r\n      }\r\n\r\n      callback.invokeMethodAsync('Invoke', mouseEventArgs);\r\n    }\r\n  })\r\n}\r\n\r\nexport function isMobile() {\r\n  return /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)\r\n    || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(navigator.userAgent.substr(0, 4));\r\n}\r\n\r\nexport function containsActiveElement(selector) {\r\n  var el = getDom(selector);\r\n  if (el && el.contains) {\r\n    return el.contains(document.activeElement);\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\nexport function copyChild(el) {\r\n  if (typeof el === 'string') {\r\n    el = document.querySelector(el);\r\n  }\r\n\r\n  if (!el) return;\r\n\r\n  el.setAttribute('contenteditable', 'true');\r\n  el.focus();\r\n  document.execCommand('selectAll', false, null);\r\n  document.execCommand('copy');\r\n  document.execCommand('unselect');\r\n  el.removeAttribute('contenteditable');\r\n}\r\n\r\nexport function copyText(text) {\r\n  if (!navigator.clipboard) {\r\n    var textArea = document.createElement(\"textarea\");\r\n    textArea.value = text;\r\n\r\n    // Avoid scrolling to bottom\r\n    textArea.style.top = \"0\";\r\n    textArea.style.left = \"0\";\r\n    textArea.style.position = \"fixed\";\r\n\r\n    document.body.appendChild(textArea);\r\n    textArea.focus();\r\n    textArea.select();\r\n\r\n    try {\r\n      var successful = document.execCommand('copy');\r\n      var msg = successful ? 'successful' : 'unsuccessful';\r\n      console.log('Fallback: Copying text command was ' + msg);\r\n    } catch (err) {\r\n      console.error('Fallback: Oops, unable to copy', err);\r\n    }\r\n\r\n    document.body.removeChild(textArea);\r\n    return;\r\n  }\r\n\r\n  navigator.clipboard.writeText(text).then(function () {\r\n    console.log('Async: Copying to clipboard was successful!');\r\n  }, function (err) {\r\n    console.error('Async: Could not copy text: ', err);\r\n  });\r\n}\r\n\r\nexport function getMenuableDimensions(hasActivator, activatorSelector, attach, contentElement, attached, attachSelector) {\r\n  if (!attached) {\r\n    var container = document.querySelector(attachSelector);\r\n    if (contentElement.nodeType) {\r\n      container.appendChild(contentElement);\r\n    }\r\n  }\r\n\r\n  var dimensions = {\r\n    activator: {} as any,\r\n    content: null,\r\n    relativeYOffset: 0,\r\n    offsetParentLeft: 0\r\n  };\r\n\r\n  if (hasActivator) {\r\n    var activator = document.querySelector(activatorSelector);\r\n    dimensions.activator = measure(activator, attach)\r\n    dimensions.activator.offsetLeft = activator.offsetLeft\r\n    if (attach !== null) {\r\n      // account for css padding causing things to not line up\r\n      // this is mostly for v-autocomplete, hopefully it won't break anything\r\n      dimensions.activator.offsetTop = activator.offsetTop\r\n    } else {\r\n      dimensions.activator.offsetTop = 0\r\n    }\r\n  }\r\n\r\n  sneakPeek(() => {\r\n    if (contentElement) {\r\n      if (contentElement.offsetParent) {\r\n        const offsetRect = getRoundedBoundedClientRect(contentElement.offsetParent)\r\n        dimensions.relativeYOffset = window.pageYOffset + offsetRect.top\r\n\r\n        if (hasActivator) {\r\n          dimensions.activator.top -= dimensions.relativeYOffset\r\n          dimensions.activator.left -= window.pageXOffset + offsetRect.left\r\n        } else {\r\n          dimensions.offsetParentLeft = offsetRect.left\r\n        }\r\n      }\r\n\r\n      dimensions.content = measure(contentElement, attach)\r\n    }\r\n  }, contentElement);\r\n\r\n  return dimensions;\r\n}\r\n\r\nfunction measure(el: HTMLElement, attach) {\r\n  if (!el) return null\r\n\r\n  const rect = getRoundedBoundedClientRect(el)\r\n\r\n  // Account for activator margin\r\n  if (attach !== null) {\r\n    const style = window.getComputedStyle(el)\r\n\r\n    rect.left = parseInt(style.marginLeft!)\r\n    rect.top = parseInt(style.marginTop!)\r\n  }\r\n\r\n  return rect\r\n}\r\n\r\nfunction getRoundedBoundedClientRect(el: Element) {\r\n  if (!el || !el.nodeType) {\r\n    return null\r\n  }\r\n\r\n  const rect = el.getBoundingClientRect()\r\n  return {\r\n    top: Math.round(rect.top),\r\n    left: Math.round(rect.left),\r\n    bottom: Math.round(rect.bottom),\r\n    right: Math.round(rect.right),\r\n    width: Math.round(rect.width),\r\n    height: Math.round(rect.height),\r\n  }\r\n}\r\n\r\nfunction sneakPeek(cb: () => void, el) {\r\n  if (!el || !el.style || el.style.display !== 'none') {\r\n    cb()\r\n    return\r\n  }\r\n\r\n  el.style.display = 'inline-block'\r\n  cb()\r\n  el.style.display = 'none'\r\n}\r\n\r\nexport function invokeMultipleMethod(windowProps, documentProps, hasActivator, activatorSelector, attach, contentElement, attached, attachSelector, element) {\r\n  var multipleResult = {\r\n    windowAndDocument: null,\r\n    dimensions: null,\r\n    zIndex: 0\r\n  };\r\n\r\n  multipleResult.windowAndDocument = getWindowAndDocumentProps(windowProps, documentProps);\r\n  multipleResult.dimensions = getMenuableDimensions(hasActivator, activatorSelector, attach, contentElement, attached, attachSelector);\r\n  multipleResult.zIndex = getMenuOrDialogMaxZIndex([contentElement], element);\r\n\r\n  return multipleResult;\r\n}\r\n\r\nexport function registerOTPInputOnInputEvent(elementList, callback) {\r\n  for (let i = 0; i < elementList.length; i++) {\r\n    elementList[i].addEventListener('input', (e: Event) => otpInputOnInputEvent(e, i, elementList, callback));\r\n    elementList[i].addEventListener('focus', (e: Event) => otpInputFocusEvent(e, i, elementList));\r\n    elementList[i].addEventListener('keyup', (e: KeyboardEvent) => otpInputKeyupEvent(e, i, elementList, callback));\r\n  }\r\n}\r\n\r\nexport function otpInputKeyupEvent(e: KeyboardEvent, otpIdx: number, elementList, callback) {\r\n  e.preventDefault();\r\n  const eventKey = e.key;\r\n  if (eventKey === 'ArrowLeft' || eventKey === 'Backspace') {\r\n    if (eventKey === 'Backspace') {\r\n      const obj = {\r\n        type: eventKey,\r\n        index: otpIdx,\r\n        value: ''\r\n      }\r\n      if (callback) {\r\n        callback.invokeMethodAsync('Invoke', JSON.stringify(obj));\r\n      }\r\n    }\r\n    otpInputFocus(otpIdx - 1, elementList);\r\n  }\r\n  else if (eventKey === 'ArrowRight') {\r\n    otpInputFocus(otpIdx + 1, elementList);\r\n  }\r\n}\r\n\r\nexport function otpInputFocus(focusIndex: number, elementList) {\r\n  if (focusIndex < 0) {\r\n    otpInputFocus(0, elementList);\r\n  }\r\n  else if (focusIndex >= elementList.length) {\r\n    otpInputFocus(elementList.length - 1, elementList);\r\n  }\r\n  else {\r\n    if (document.activeElement !== elementList[focusIndex]) {\r\n      const element = getDom(elementList[focusIndex])\r\n      element.focus();\r\n    }\r\n  }\r\n}\r\n\r\nexport function otpInputFocusEvent(e: Event, otpIdx: number, elementList) {\r\n  const element = getDom(elementList[otpIdx]);\r\n  if (element && document.activeElement === element) {\r\n    element.select();\r\n  }\r\n}\r\n\r\nexport function otpInputOnInputEvent(e: Event, otpIdx: number, elementList, callback) {\r\n  const target = e.target as HTMLInputElement;\r\n  const value = target.value;\r\n\r\n  if (value && value !== '') {\r\n    otpInputFocus(otpIdx + 1, elementList);\r\n\r\n    if (callback) {\r\n      const obj = {\r\n        type: 'Input',\r\n        index: otpIdx,\r\n        value: value\r\n      }\r\n      callback.invokeMethodAsync('Invoke', JSON.stringify(obj));\r\n    }\r\n  }\r\n}\r\n\r\nexport function getListIndexWhereAttributeExists(selector: string, attribute:string, value: string) {\r\n  const tiles = document.querySelectorAll(selector);\r\n  if (!tiles) {\r\n    return -1;\r\n  }\r\n\r\n  let index = -1;\r\n  for (let i = 0; i < tiles.length; i++) {\r\n    if (tiles[i].getAttribute(attribute) === value) {\r\n      index = i;\r\n      break;\r\n    }\r\n  }\r\n\r\n  return index;\r\n}\r\n\r\nexport function scrollToTile(contentSelector: string, tilesSelector: string, index: number, keyCode: string) {\r\n  var tiles = document.querySelectorAll(tilesSelector)\r\n  if (!tiles) return;\r\n\r\n  let tile = tiles[index] as HTMLElement;\r\n\r\n  if (!tile) return;\r\n\r\n  const content = document.querySelector(contentSelector);\r\n  if (!content) return;\r\n\r\n  const scrollTop = content.scrollTop;\r\n  const contentHeight = content.clientHeight;\r\n\r\n  if (scrollTop > tile.offsetTop - 8) {\r\n    content.scrollTo({ top: tile.offsetTop - tile.clientHeight, behavior: \"smooth\" })\r\n  } else if (scrollTop + contentHeight < tile.offsetTop + tile.clientHeight + 8) {\r\n    content.scrollTo({ top: tile.offsetTop - contentHeight + tile.clientHeight * 2, behavior: \"smooth\" })\r\n  }\r\n}\r\n\r\nexport function getElementTranslateY(element) {\r\n  const style = window.getComputedStyle(element);\r\n  const transform = style.transform || style.webkitTransform;\r\n  const translateY = transform.slice(7, transform.length - 1).split(', ')[5];\r\n\r\n  return Number(translateY);\r\n}\r\n\r\nfunction isWindow(element: any | Window): element is Window {\r\n  return element === window\r\n}\r\n\r\nexport function checkIfThresholdIsExceededWhenScrolling(el: Element, parent: Element, threshold: number) {\r\n  if (!el || !parent) return\r\n\r\n  const rect = el.getBoundingClientRect();\r\n  const elementTop = rect.top;\r\n  const current = isWindow(parent)\r\n    ? window.innerHeight\r\n    : parent.getBoundingClientRect().bottom\r\n\r\n  return (current >= elementTop - threshold)\r\n}","// Utilities\r\nimport { addPassiveEventListener, composedPath, getDom, keyCodes } from \"../../utils/helper\";\r\n\r\nvar wheelListenerCaches: { [key: string]: any } = {}\r\n\r\nexport function hideScroll(fullscreen: boolean, overlaySelector: string, content, dialog) {\r\n  if (fullscreen) {\r\n    document.documentElement!.classList.add('overflow-y-hidden')\r\n  } else {\r\n    if (!overlaySelector) return\r\n    const overlay = getDom(overlaySelector);\r\n    const listener = (e) => {\r\n      scrollListener(e, overlay, content, dialog)\r\n    }\r\n\r\n    wheelListenerCaches[`window_${overlaySelector}`] = listener;\r\n\r\n    addPassiveEventListener(window, 'wheel', listener, { passive: false })\r\n    window.addEventListener('keydown', listener)\r\n  }\r\n}\r\n\r\nexport function showScroll (overlaySelector) {\r\n  document.documentElement!.classList.remove('overflow-y-hidden')\r\n\r\n  var listener = wheelListenerCaches[`window_${overlaySelector}`]\r\n  if (listener) {\r\n    window.removeEventListener('wheel', listener)\r\n    window.removeEventListener('keydown', listener)\r\n  }\r\n}\r\n\r\nfunction scrollListener (e: WheelEvent & KeyboardEvent, overlay, content, dialog) {\r\n  if (e.type === 'keydown') {\r\n    if (\r\n      ['INPUT', 'TEXTAREA', 'SELECT'].includes((e.target as Element).tagName) ||\r\n      // https://github.com/vuetifyjs/vuetify/issues/4715\r\n      (e.target as HTMLElement).isContentEditable\r\n    ) return\r\n\r\n    const up = [keyCodes.up, keyCodes.pageup]\r\n    const down = [keyCodes.down, keyCodes.pagedown]\r\n\r\n    if (up.includes(e.keyCode)) {\r\n      (e as any).deltaY = -1\r\n    } else if (down.includes(e.keyCode)) {\r\n      (e as any).deltaY = 1\r\n    } else {\r\n      return\r\n    }\r\n  }\r\n\r\n  if (e.target === overlay ||\r\n    (e.type !== 'keydown' && e.target === document.body) ||\r\n    checkPath(e, content, dialog)) e.preventDefault()\r\n}\r\n\r\nfunction checkPath(e: WheelEvent, content, dialog) {\r\n  const path = composedPath(e)\r\n\r\n  if (e.type === 'keydown' && path[0] === document.body) {\r\n    // getSelection returns null in firefox in some edge cases, can be ignored\r\n    const selected = window.getSelection()!.anchorNode as Element\r\n    if (dialog && hasScrollbar(dialog) && isInside(selected, dialog)) {\r\n      return !shouldScroll(dialog, e)\r\n    }\r\n    return true\r\n  }\r\n\r\n  for (let index = 0; index < path.length; index++) {\r\n    const el = path[index]\r\n\r\n    if (el === document) return true\r\n    if (el === document.documentElement) return true\r\n    if (el === content) return true\r\n\r\n    if (hasScrollbar(el as Element)) return !shouldScroll(el as Element, e)\r\n  }\r\n\r\n  return true\r\n}\r\n\r\nfunction shouldScroll(el: Element, e: WheelEvent): boolean {\r\n  if (el.hasAttribute('data-app')) return false\r\n\r\n  const dir = e.shiftKey || e.deltaX ? 'x' : 'y'\r\n  const delta = dir === 'y' ? e.deltaY : e.deltaX || e.deltaY\r\n\r\n  let alreadyAtStart: boolean\r\n  let alreadyAtEnd: boolean\r\n  if (dir === 'y') {\r\n    alreadyAtStart = el.scrollTop === 0\r\n    alreadyAtEnd = el.scrollTop + el.clientHeight === el.scrollHeight\r\n  } else {\r\n    alreadyAtStart = el.scrollLeft === 0\r\n    alreadyAtEnd = el.scrollLeft + el.clientWidth === el.scrollWidth\r\n  }\r\n\r\n  const scrollingUp = delta < 0\r\n  const scrollingDown = delta > 0\r\n\r\n  if (!alreadyAtStart && scrollingUp) return true\r\n  if (!alreadyAtEnd && scrollingDown) return true\r\n  if ((alreadyAtStart || alreadyAtEnd)) {\r\n    return shouldScroll(el.parentNode as Element, e)\r\n  }\r\n\r\n  return false\r\n}\r\n\r\nfunction isInside(el: Element, parent: Element): boolean {\r\n  if (el === parent) {\r\n    return true\r\n  } else if (el === null || el === document.body) {\r\n    return false\r\n  } else {\r\n    return isInside(el.parentNode as Element, parent)\r\n  }\r\n}\r\n\r\nfunction hasScrollbar(el?: Element) {\r\n  if (!el || el.nodeType !== Node.ELEMENT_NODE) return false\r\n\r\n  const style = window.getComputedStyle(el)\r\n  return ((['auto', 'scroll'].includes(style.overflowY!) || el.tagName === 'SELECT') && el.scrollHeight > el.clientHeight) ||\r\n    ((['auto', 'scroll'].includes(style.overflowX!)) && el.scrollWidth > el.clientWidth)\r\n}\r\n","import * as interop from \"./interop\";\r\nimport * as overlayable from \"./mixins/overlayable\";\r\n\r\ndeclare global {\r\n  interface Window {\r\n    BlazorComponent: any;\r\n  }\r\n}\r\n\r\nwindow.BlazorComponent = {\r\n  interop: {\r\n    ...interop,\r\n    ...overlayable,\r\n  },\r\n};\r\n"],"names":["transform","el","value","style","webkitTransform","opacity","toString","ripples","show","e","container","document","createElement","animation","appendChild","className","radius","scale","x","y","centerX","centerY","localX","localY","offset","getBoundingClientRect","target","clientX","left","clientY","top","Math","sqrt","clientWidth","clientHeight","calculate","size","width","height","computed","window","getComputedStyle","position","dataset","previousPosition","classList","add","activated","String","performance","now","setTimeout","remove","hide","getElementsByClassName","length","isHiding","diff","Number","delay","max","parentNode","removeChild","rippleShow","currentTarget","rippleHide","rippleHideWrapper","passiveSupported","testListenerOpts","Object","defineProperty","get","addEventListener","removeEventListener","console","warn","keyCodes","freeze","enter","tab","delete","esc","space","up","down","right","end","home","del","backspace","insert","pageup","pagedown","shift","getElementSelector","Element","path","nodeType","Node","ELEMENT_NODE","selector","nodeName","toLowerCase","id","unshift","sib","nth","previousElementSibling","join","parseTouch","touchList","touches","i","touch","push","identifier","screenX","screenY","pageX","pageY","registerExtraMouseEvent","eventType","eventName","Blazor","registerCustomEventType","browserEventName","createEventArgs","sharedCreateEventArgs","type","args","assign","parseMouseEvent","event","detail","offsetX","offsetY","button","buttons","ctrlKey","shiftKey","altKey","metaKey","parseTouchEvent","targetTouches","changedTouches","elementReferenceId","getAttributeNames","find","a","startsWith","getAttribute","registerExtraEvents","registerExtraTouchEvent","registerEvent","getZIndex","index","getPropertyValue","onTransition","isActive","element","propertyName","scrollHeight","requestAnimationFrame","leave","getDom","documentElement","indexOf","array","split","querySelector","body","getDomInfo","result","dom","cloned","cloneNode","parentElement","getDomInfoObj","offsetTop","offsetLeft","scrollWidth","scrollLeft","scrollTop","clientTop","clientLeft","getElementPos","res","viewportElement","box","offsetWidth","offsetHeight","relativeTop","relativeBottom","bottom","relativeLeft","relativeRight","absoluteLeft","absoluteTop","round","fileClickEvent","fileId","this","attributes","nodeValue","getElementById","click","getObjectURL","file","url","undefined","URL","createObjectURL","webkitURL","attach","_a","_b","htmlElementEventListennerConfigs","outsideClickListenerCaches","slideTo","targetPageY","timer","setInterval","currentY","distance","speed","ceil","clearInterval","scrollTo","getActiveElement","activeElement","getWindowAndDocumentProps","windowProps","documentProps","obj","forEach","prop","getMenuOrDialogMaxZIndex","exclude","zis","activeElements","includes","getTextAreaInfo","currentStyle","parseFloat","defaultView","is","NaN","funcDict","disposeResizeTextArea","objReferenceDict","resizeTextArea","minRows","maxRows","dims","rowHeight","oldHeight","rows","trunc","newHeight","overflowY","invokeMethodAsync","getMenuableDimensions","hasActivator","activatorSelector","contentElement","attached","attachSelector","dimensions","activator","content","relativeYOffset","offsetParentLeft","measure","sneakPeek","cb","display","offsetParent","offsetRect","getRoundedBoundedClientRect","pageYOffset","pageXOffset","rect","parseInt","marginLeft","marginTop","otpInputKeyupEvent","otpIdx","elementList","callback","preventDefault","eventKey","key","JSON","stringify","otpInputFocus","focusIndex","focus","otpInputFocusEvent","select","otpInputOnInputEvent","onload","registerPasteWithData","customEventName","pastedData","clipboardData","getData","registerDirective","MutationObserver","mutationsList","mutation","_bind","rippleEls","querySelectorAll","rippleEl","attributeName","observe","subtree","childList","attributeFilter","updateCanvas","hue","canvas","ctx","getContext","saturationGradient","createLinearGradient","addColorStop","fillStyle","fillRect","valueGradient","addStepperEventListener","removeStepperEventListener","initStepperWrapper","contains","addFileClickEventListener","btn","removeFileClickEventListener","clearFile","setAttribute","getFileInfo","files","fileInfo","objectUrl","fileName","name","objectURL","uploadFile","data","headers","instance","percentMethod","successMethod","errorMethod","formData","FormData","append","req","XMLHttpRequest","onreadystatechange","readyState","status","responseText","upload","onprogress","percent","floor","loaded","onerror","open","header","setRequestHeader","send","triggerEvent","stopPropagation","evt","createEvent","initEvent","dispatchEvent","setProperty","getFirstChildBoundingClientRect","firstElementChild","addHtmlElementEventListener","invoker","options","extras","htmlElement","config","listener","relatedTarget","k","attr","list","item","debounce","timeout","clearTimeout","throttle","throttled","removeHtmlElementEventListener","configs","addOutsideClickEventListener","noInvokeSelectors","invokeSelectors","filter","s","some","pointerSelector","removeOutsideClickEventListener","addMouseleaveEventListener","e1","e2","dom1","equalsOrContains","dom2","matchMedia","query","matches","copy","text","navigator","clipboard","writeText","then","log","err","error","fallbackCopyTextToClipboard","textArea","msg","execCommand","noScroll","HTMLElement","Error","preventScroll","HTMLInputElement","HTMLTextAreaElement","hasFocus","blur","backTop","scrollIntoView","behavior","block","inline","scrollToActiveElement","scrollToPosition","getFirstChildDomInfo","addClsToFirstChild","removeClsFromFirstChild","getAbsoluteTop","getAbsoluteLeft","addElementToBody","delElementFromBody","addElementTo","addElement","elementSelector","parent","delElementFrom","delElement","focusDialog","count","ele","hasAttribute","getWindow","innerWidth","innerHeight","isTop","scrollY","isBottom","css","hasOwnProperty","addCls","clsName","removeCls","elementScrollIntoView","createIconFromfontCN","scriptUrl","script","getScroll","getInnerText","innerText","getMaxZIndex","all","reduce","r","zIndex","getStyle","styleProp","registerResizeTextArea","objReference","disposeObj","objReferenceName","bindTableHeaderAndBodyScroll","bodyRef","headerRef","bindScrollLeftToHeader","unbindTableHeaderAndBodyScroll","addPreventKeys","inputElement","keys","map","toUpperCase","preventKeys","removePreventKeys","addPreventEnterOnOverlayVisible","overlayElement","preventKeyOnCondition","check","removePreventEnterOnOverlayVisible","insertAdjacentHTML","head","getImageDimensions","src","Promise","resolve","reject","img","Image","hasError","enablePreventDefaultForEvent","condition","Array","isArray","code","resizeObserver","ResizeObserver","entries","entry","dimension","contentRect","intersectionObserver","invokers","IntersectionObserver","observer","isIntersecting","getBoundingClientRects","elements","getSize","selectors","sizeProp","overflow","charAt","slice","getProp","updateWindowTransition","itemEl","getScrollHeightWithoutHeight","registerTextFieldOnMouseDown","mouseEventArgs","Detail","ScreenX","ScreenY","ClientX","ClientY","OffsetX","OffsetY","PageX","PageY","Button","Buttons","CtrlKey","ShiftKey","AltKey","MetaKey","Type","isMobile","test","userAgent","substr","containsActiveElement","copyChild","removeAttribute","copyText","invokeMultipleMethod","multipleResult","windowAndDocument","registerOTPInputOnInputEvent","getListIndexWhereAttributeExists","attribute","tiles","scrollToTile","contentSelector","tilesSelector","keyCode","tile","contentHeight","getElementTranslateY","translateY","checkIfThresholdIsExceededWhenScrolling","threshold","elementTop","isWindow","wheelListenerCaches","shouldScroll","dir","deltaX","delta","deltaY","alreadyAtStart","alreadyAtEnd","isInside","hasScrollbar","tagName","overflowX","hideScroll","fullscreen","overlaySelector","dialog","overlay","scrollListener","isContentEditable","checkPath","composedPath","selected","getSelection","anchorNode","addPassiveEventListener","passive","showScroll","BlazorComponent","interop","overlayable"],"mappings":"AAwBA,SAASA,UAAUC,EAAIC,GACrBD,EAAGE,MAAMH,UAAYE,EACrBD,EAAGE,MAAMC,gBAAkBF,CAC7B,CAEA,SAASG,QAAQJ,EAAIC,GACnBD,EAAGE,MAAME,QAAUH,EAAMI,UAC3B,CAEA,MAAMC,EAAU,CAEdC,KAAKC,EAAGR,GACN,MAAMS,EAAYC,SAASC,cAAc,QACnCC,EAAYF,SAASC,cAAc,QAEzCF,EAAUI,YAAYD,GACtBH,EAAUK,UAAY,sBAEtB,MAAMC,OAAEA,EAAMC,MAAEA,EAAKC,EAAEA,EAACC,EAAEA,EAACC,QAAEA,EAAOC,QAAEA,GA1CxB,EAACZ,EAAGR,KACpB,IAAIqB,EAAS,EACTC,EAAS,EAEb,MAAMC,EAASvB,EAAGwB,wBACZC,EAASjB,EAEfa,EAASI,EAAOC,QAAUH,EAAOI,KACjCL,EAASG,EAAOG,QAAUL,EAAOM,IAEjC,IAAId,EAAS,EAWb,OARAA,EAASe,KAAKC,KAAK/B,EAAGgC,aAAe,EAAIhC,EAAGiC,cAAgB,GAAK,EAQ1D,CAAElB,SAAQC,MAVL,GAUYC,EAHXI,EAASN,EAAZ,KAGiBG,EAFdI,EAASP,EAAZ,KAEoBI,SANVnB,EAAGgC,YAAuB,EAATjB,GAAc,EAAnC,KAMuBK,SALnBpB,EAAGiC,aAAwB,EAATlB,GAAc,EAApC,KAKgC,EAqBImB,CAAU1B,EAAGR,GAEzDmC,EAAmB,EAATpB,EAAH,KACbH,EAAUE,UAAY,sBACtBF,EAAUV,MAAMkC,MAAQD,EACxBvB,EAAUV,MAAMmC,OAASF,EAEzBnC,EAAGa,YAAYJ,GAEf,MAAM6B,EAAWC,OAAOC,iBAAiBxC,GACrCsC,GAAkC,WAAtBA,EAASG,WACvBzC,EAAGE,MAAMuC,SAAW,WACpBzC,EAAG0C,QAAQC,iBAAmB,UAGhC/B,EAAUgC,UAAUC,IAAI,8BACxBjC,EAAUgC,UAAUC,IAAI,gCACxB9C,UACEa,EACA,aAAaK,MAAMC,cAAcF,KAASA,KAASA,MAErDZ,QAAQQ,EAAW,GACnBA,EAAU8B,QAAQI,UAAYC,OAAOC,YAAYC,OAEjDC,YAAW,KACTtC,EAAUgC,UAAUO,OAAO,8BAC3BvC,EAAUgC,UAAUC,IAAI,2BACxB9C,UAAUa,EAAW,aAAaO,MAAYC,qBAC9ChB,QAAQQ,EAAW,IAAK,GACvB,EACJ,EAEDwC,KAAKpD,GACH,MAAMM,EAAUN,EAAGqD,uBAAuB,uBAE1C,GAAuB,IAAnB/C,EAAQgD,OAAc,OAC1B,MAAM1C,EAAYN,EAAQA,EAAQgD,OAAS,GAE3C,GAAI1C,EAAU8B,QAAQa,SAAU,OAC3B3C,EAAU8B,QAAQa,SAAW,OAElC,MAAMC,EAAOR,YAAYC,MAAQQ,OAAO7C,EAAU8B,QAAQI,WACpDY,EAAQ5B,KAAK6B,IAAI,IAAMH,EAAM,GAEnCN,YAAW,KACTtC,EAAUgC,UAAUO,OAAO,2BAC3BvC,EAAUgC,UAAUC,IAAI,4BACxBzC,QAAQQ,EAAW,GAEnBsC,YAAW,KAEc,IADPlD,EAAGqD,uBAAuB,uBAC9BC,QAAgBtD,EAAG0C,QAAQC,mBACrC3C,EAAGE,MAAMuC,SAAWzC,EAAG0C,QAAQC,wBACxB3C,EAAG0C,QAAQC,kBAGpB/B,EAAUgD,YAAc5D,EAAG6D,YAAYjD,EAAUgD,WAAW,GAC3D,IAAI,GACNF,EACJ,GAGG,SAAUI,WAAWtD,GACzBF,EAAQC,KAAKC,EAAGA,EAAEuD,cACpB,CAEM,SAAUC,WAAWxD,GACzBF,EAAQ8C,KAAK5C,EAAEuD,cACjB,CC5GA,SAASE,kBAAkBzD,GACvBwD,WAAWxD,EACf,CCUA,IAAI0D,GAAmB,EACvB,IACE,GAAsB,oBAAX3B,OAAwB,CACjC,MAAM4B,EAAmBC,OAAOC,eAAe,CAAA,EAAI,UAAW,CAC5DC,IAAK,KACHJ,GAAmB,CAAI,IAI3B3B,OAAOgC,iBAAiB,eAAuBJ,EAAyBA,GACxE5B,OAAOiC,oBAAoB,eAAuBL,EAAyBA,EAC5E,CAC4B,CAA7B,MAAO3D,GAAKiE,QAAQC,KAAKlE,EAAI,CAsBxB,MAAMmE,EAAWP,OAAOQ,OAAO,CACpCC,MAAO,GACPC,IAAK,EACLC,OAAQ,GACRC,IAAK,GACLC,MAAO,GACPC,GAAI,GACJC,KAAM,GACNxD,KAAM,GACNyD,MAAO,GACPC,IAAK,GACLC,KAAM,GACNC,IAAK,GACLC,UAAW,EACXC,OAAQ,GACRC,OAAQ,GACRC,SAAU,GACVC,MAAO,KAkCH,SAAUC,mBAAmB7F,GACjC,GAAMA,aAAc8F,QAApB,CAGA,IADA,IAAIC,EAAO,GACJ/F,EAAGgG,WAAaC,KAAKC,cAAc,CACxC,IAAIC,EAAWnG,EAAGoG,SAASC,cAC3B,GAAIrG,EAAGsG,GAAI,CACTH,GAAY,IAAMnG,EAAGsG,GACrBP,EAAKQ,QAAQJ,GACb,KACD,CAEC,IADA,IAAIK,EAAMxG,EAAIyG,EAAM,EACbD,EAAMA,EAAIE,wBACXF,EAAIJ,SAASC,eAAiBF,GAChCM,IAEO,GAAPA,IACFN,GAAY,gBAAkBM,EAAM,KAExCV,EAAKQ,QAAQJ,GACbnG,EAAKA,EAAG4D,UACT,CACD,OAAOmC,EAAKY,KAAK,MApBR,CAqBX,CCpFA,SAASC,WAAWC,GAClB,MAAMC,EAA+B,GAErC,IAAK,IAAIC,EAAI,EAAGA,EAAIF,EAAUvD,OAAQyD,IAAK,CACzC,MAAMC,EAAQH,EAAUE,GACxBD,EAAQG,KAAK,CACXC,WAAYF,EAAME,WAClBxF,QAASsF,EAAMtF,QACfE,QAASoF,EAAMpF,QACfuF,QAASH,EAAMG,QACfC,QAASJ,EAAMI,QACfC,MAAOL,EAAMK,MACbC,MAAON,EAAMM,OAEhB,CACD,OAAOR,CACT,CCnDgB,SAAAS,wBAAwBC,EAAmBC,GACrDC,QACFA,OAAOC,wBAAwBH,EAAW,CACxCI,iBAAkBH,EAClBI,gBAAiBrH,GAAKsH,sBAAsB,QAAStH,IAG3D,CAWA,SAASsH,sBAAsBC,EAAyBvH,GACtD,IAAIwH,EAAO,CAAEvG,OAAQ,CAAA,GAarB,GAZa,UAATsG,EACFC,EAAI5D,OAAA6D,OAAA7D,OAAA6D,OAAA,GACCD,GDtBH,SAAUE,gBAAgBC,GAC9B,MAAO,CACLC,OAAQD,EAAMC,OACdjB,QAASgB,EAAMhB,QACfC,QAASe,EAAMf,QACf1F,QAASyG,EAAMzG,QACfE,QAASuG,EAAMvG,QACfyG,QAASF,EAAME,QACfC,QAASH,EAAMG,QACfjB,MAAOc,EAAMd,MACbC,MAAOa,EAAMb,MACbiB,OAAQJ,EAAMI,OACdC,QAASL,EAAMK,QACfC,QAASN,EAAMM,QACfC,SAAUP,EAAMO,SAChBC,OAAQR,EAAMQ,OACdC,QAAST,EAAMS,QACfb,KAAMI,EAAMJ,KAEhB,CCISG,CAAgB1H,IAEH,UAATuH,IACTC,EAAI5D,OAAA6D,OAAA7D,OAAA6D,OAAA,GACCD,GDNH,SAAUa,gBAAgBV,GAC9B,MAAO,CACLC,OAAQD,EAAMC,OACdtB,QAASF,WAAWuB,EAAMrB,SAC1BgC,cAAelC,WAAWuB,EAAMW,eAChCC,eAAgBnC,WAAWuB,EAAMY,gBACjCN,QAASN,EAAMM,QACfC,SAAUP,EAAMO,SAChBC,OAAQR,EAAMQ,OACdC,QAAST,EAAMS,QACfb,KAAMI,EAAMJ,KAEhB,CCLSc,CAAgBrI,KAInBA,EAAEiB,OAAQ,CACZ,MAAMA,EAASjB,EAAEiB,OACXuH,EAAqBvH,EAAOwH,oBAAoBC,MAAKC,GAAKA,EAAEC,WAAW,UACzEJ,GACFhB,EAAKvG,OAA2B,mBAAIuH,EACpChB,EAAKvG,OAAiB,SAAI,IAAIuH,MAE9BhB,EAAKvG,OAAiB,SAAIoE,mBAAmBpE,GAG/CuG,EAAKvG,OAAc,MAAIA,EAAO4H,aAAa,QAC5C,CAED,OAAOrB,CACT,UC/CgBsB,sBACZ/B,wBAAwB,cAAe,aACvCA,wBAAwB,YAAa,WACrCA,wBAAwB,UAAW,SACnCA,wBAAwB,eAAgB,cACxCA,wBAAwB,eAAgB,cACxCA,wBAAwB,cAAe,aDI3B,SAAAgC,wBAAwB/B,EAAmBC,GACrDC,QACFA,OAAOC,wBAAwBH,EAAW,CACxCI,iBAAkBH,EAClBI,gBAAiBrH,GAAKsH,sBAAsB,QAAStH,IAG3D,CCVI+I,CAAwB,eAAgB,cAI5C,SAASC,cAAchC,EAAmBC,GAClCC,QACAA,OAAOC,wBAAwBH,EAAW,CACtCI,iBAAkBH,GAG9B,CATI+B,CAAc,gBAAiB,gBACnC,CCYM,SAAUC,UAAUzJ,GACxB,IAAKA,GAAMA,EAAGgG,WAAaC,KAAKC,aAAc,OAAO,EAErD,MAAMwD,GAASnH,OAAOC,iBAAiBxC,GAAI2J,iBAAiB,WAE5D,OAAKD,GAAcD,UAAUzJ,EAAG4D,WAElC,CAiDA,SAASgG,aAAapJ,EAAoBqJ,EAAmBC,GACtDD,GACgB,WAAnBrJ,EAAEuJ,eAGJD,EAAQ5J,MAAMmC,OAAS,OACzB,CAEA,SAASwC,MAAMiF,EAAsBD,GACnC,IAAIG,EAAe,EAGnBC,uBAAsB,KACpBD,EAAeF,EAAQE,YAAY,IAGrCF,EAAQ5J,MAAMmC,OAAS,MAEvBa,YAAW,IAAM2G,IAAaC,EAAQ5J,MAAMmC,OAAU2H,EAAe,MAAQ,SAAU,IACzF,CAEA,SAASE,MAAMJ,GACbA,EAAQ5J,MAAMmC,OAASyH,EAAQ7H,aAAe,KAC9CiB,YAAW,KACT4G,EAAQ5J,MAAMmC,OAAS,KAAQ,GAC9B,GACL,CAEM,SAAU8H,OAAOL,GACrB,GAAKA,GAEE,GAAuB,iBAAZA,EAAsB,CACtC,GAAgB,aAAZA,EACF,OAAOpJ,SAAS0J,gBACX,GAAIN,EAAQO,QAAQ,KAAO,EAAG,CACnC,IAAIC,EAAQR,EAAQS,MAAM,KACtBvK,EAAKU,SAAS8J,cAAcF,EAAM,IACtC,IAAKtK,EACH,OAAO,KAGT8J,EAAU9J,EAAGsK,EAAM,GACpB,MACCR,EAAUpJ,SAAS8J,cAAcV,EAEpC,OAfCA,EAAUpJ,SAAS+J,KAgBrB,OAAOX,CACT,UAEgBY,WAAWZ,EAAS3D,EAAW,QAC7C,IAAIwE,EAAS,CAAA,EAETC,EAAMT,OAAOL,GAEjB,GAAIc,EACF,GAAIA,EAAI1K,OAAkC,SAAzB0K,EAAI1K,MAAe,QAAc,CAGhD,IAAI2K,EAASD,EAAIE,WAAU,GAC3BD,EAAO3K,MAAe,QAAI,eAC1B2K,EAAO3K,MAAM,YAAc,IAC3B0K,EAAIG,cAAclK,YAAYgK,GAE9BF,EAASK,cAAcH,GAEvBD,EAAIG,cAAclH,YAAYgH,EAC/B,MACCF,EAASK,cAAcJ,GAI3B,OAAOD,CACT,CAEA,SAASK,cAAcJ,GACrB,IAAID,EAAS,CAAA,EACbA,EAAkB,UAAIC,EAAIK,WAAa,EACvCN,EAAmB,WAAIC,EAAIM,YAAc,EACzCP,EAAqB,aAAIC,EAAIZ,cAAgB,EAC7CW,EAAoB,YAAIC,EAAIO,aAAe,EAC3CR,EAAmB,WAAIC,EAAIQ,YAAc,EACzCT,EAAkB,UAAIC,EAAIS,WAAa,EACvCV,EAAkB,UAAIC,EAAIU,WAAa,EACvCX,EAAmB,WAAIC,EAAIW,YAAc,EACzCZ,EAAqB,aAAIC,EAAI3I,cAAgB,EAC7C0I,EAAoB,YAAIC,EAAI5I,aAAe,EAC3C,IAAIS,EAYN,SAAS+I,cAAc1B,GACrB,IAAI2B,EAAW,IAAIrH,OAGnB,GAFAqH,EAAIxK,EAAI,EACRwK,EAAIvK,EAAI,EACQ,OAAZ4I,GACEA,EAAQtI,sBAAuB,CACjC,IAAIkK,EAAkBhL,SAAS0J,gBAC3BuB,EAAM7B,EAAQtI,wBACd4J,EAAaM,EAAgBN,WAC7BC,EAAYK,EAAgBL,UAEhCI,EAAIG,YAAcD,EAAIvJ,MACtBqJ,EAAII,aAAeF,EAAItJ,OACvBoJ,EAAIK,YAAcH,EAAI9J,IACtB4J,EAAIM,eAAiBJ,EAAIK,OACzBP,EAAIQ,aAAeN,EAAIhK,KACvB8J,EAAIS,cAAgBP,EAAIvG,MACxBqG,EAAIU,aAAeR,EAAIhK,KAAOyJ,EAC9BK,EAAIW,YAAcT,EAAI9J,IAAMwJ,CAC7B,CAEH,OAAOI,CACT,CAlCiBD,CAAcZ,GAS7B,OARAD,EAAoB,YAAI7I,KAAKuK,MAAM5J,EAASmJ,cAAgB,EAC5DjB,EAAqB,aAAI7I,KAAKuK,MAAM5J,EAASoJ,eAAiB,EAC9DlB,EAAoB,YAAI7I,KAAKuK,MAAM5J,EAASqJ,cAAgB,EAC5DnB,EAAuB,eAAI7I,KAAKuK,MAAM5J,EAASsJ,iBAAmB,EAClEpB,EAAqB,aAAI7I,KAAKuK,MAAM5J,EAASwJ,eAAiB,EAC9DtB,EAAsB,cAAI7I,KAAKuK,MAAM5J,EAASyJ,gBAAkB,EAChEvB,EAAqB,aAAI7I,KAAKuK,MAAM5J,EAAS0J,eAAiB,EAC9DxB,EAAoB,YAAI7I,KAAKuK,MAAM5J,EAAS2J,cAAgB,EACrDzB,CACT,UAoCgB2B,iBACd,IAAIC,EAASC,KAAKC,WAAW,eAAeC,UAC9BhM,SAASiM,eAAeJ,GACRK,OAChC,CA0BM,SAAUC,aAAaC,GAC3B,IAAIC,EAAM,KAMV,OALkBC,MAAdzK,OAAO0K,IACTF,EAAMxK,OAAO0K,IAAIC,gBAAgBJ,GACJE,MAApBzK,OAAO4K,YAChBJ,EAAMxK,OAAO4K,UAAUD,gBAAgBJ,IAElCC,CACT,UAuDgBvL,sBAAsBsI,EAASsD,EAAS,gBACtD,IAAIxC,EAAMT,OAAOL,GAEjB,IAAIa,EAAS,CAAA,EAEb,GAAIC,GAAOA,EAAIpJ,sBACb,GAAIoJ,EAAI1K,OAAkC,SAAzB0K,EAAI1K,MAAe,QAAc,CAChD,IAAI2K,EAASD,EAAIE,WAAU,GAC3BD,EAAO3K,MAAe,QAAI,eAC1B2K,EAAO3K,MAAM,YAAc,IACG,QAA9BmN,EAAA3M,SAAS8J,cAAc4C,UAAO,IAAAC,GAAAA,EAAExM,YAAYgK,GAE5CF,EAASE,EAAOrJ,wBAEc,QAA9B8L,EAAA5M,SAAS8J,cAAc4C,UAAO,IAAAE,GAAAA,EAAEzJ,YAAYgH,EAC7C,MACCF,EAASC,EAAIpJ,wBAIjB,OAAOmJ,CACT,CAsBA,IAAI4C,EAA8D,CAAA,EAmIlE,IAAIC,EAAqD,CAAA,EA8IzD,SAASC,QAAQC,GACf,IAAIC,EAAQC,aAAY,WACtB,IAAIC,EAAWnN,SAAS0J,gBAAgBiB,WAAa3K,SAAS+J,KAAKY,UAC/DyC,EAAWJ,EAAcG,EAAWH,EAAcG,EAAWA,EAAWH,EACxEK,EAAQjM,KAAKkM,KAAKF,EAAW,IAC7BD,GAAYH,EACdO,cAAcN,GAEdpL,OAAO2L,SAAS,EAAGR,EAAcG,EAAWA,EAAWE,EAAQF,EAAWE,EAE7E,GAAE,GACL,UAwFgBI,mBAGd,OAFczN,SAAS0N,cACN/E,aAAa,OAAS,EAEzC,UA4BgBgF,0BAA0BC,EAAwB,GAAIC,EAA0B,IAC9F,MAAMC,EAAM,CAAA,EAUZ,OARIF,GACFA,EAAYG,SAAQC,GAAQF,EAAIE,GAAQnM,OAAOmM,KAG7CH,GACFA,EAAcE,SAAQC,GAAQF,EAAIE,GAAQhO,SAAS0J,gBAAgBsE,KAG9DF,CACT,UAsFgBG,yBAAyBC,EAAqB,GAAI9E,GAChE,MAGM+E,EAAM,CAACpF,UAHAU,OAAOL,KAKdgF,EAAiB,IAClBpO,SAAS2C,uBAAuB,8BAChC3C,SAAS2C,uBAAuB,8BAIrC,IAAK,IAAIqG,EAAQ,EAAGA,EAAQoF,EAAexL,OAAQoG,IAC5CkF,EAAQG,SAASD,EAAepF,KACnCmF,EAAI5H,KAAKwC,UAAUqF,EAAepF,KAItC,OAAO5H,KAAK6B,OAAOkL,EACrB,CAgBM,SAAUG,gBAAgBlF,GAC9B,IAAIa,EAAS,CAAA,EACTC,EAAMT,OAAOL,GAqBjB,OApBAa,EAAqB,aAAIC,EAAIZ,cAAgB,EAEzCF,EAAQmF,cACVtE,EAAmB,WAAIuE,WAAWpF,EAAQmF,aAAa,gBACvDtE,EAAmB,WAAIuE,WAAWpF,EAAQmF,aAAa,gBACvDtE,EAAsB,cAAIuE,WAAWpF,EAAQmF,aAAa,mBAC1DtE,EAAqB,aAAIuE,WAAWpF,EAAQmF,aAAa,kBACzDtE,EAAkB,UAAIuE,WAAWpF,EAAQmF,aAAa,gBAC7C1M,OAAOC,mBAChBmI,EAAmB,WAAIuE,WAAWxO,SAASyO,YAAY3M,iBAAiBsH,EAAS,MAAMH,iBAAiB,gBACxGgB,EAAmB,WAAIuE,WAAWxO,SAASyO,YAAY3M,iBAAiBsH,EAAS,MAAMH,iBAAiB,gBACxGgB,EAAsB,cAAIuE,WAAWxO,SAASyO,YAAY3M,iBAAiBsH,EAAS,MAAMH,iBAAiB,mBAC3GgB,EAAqB,aAAIuE,WAAWxO,SAASyO,YAAY3M,iBAAiBsH,EAAS,MAAMH,iBAAiB,kBAC1GgB,EAAkB,UAAIuE,WAAWxO,SAASyO,YAAY3M,iBAAiBsH,EAAS,MAAMH,iBAAiB,gBAGrGvF,OAAOgL,GAAGC,IAAK1E,EAAkB,aACnCA,EAAkB,UAAI,GACpBvG,OAAOgL,GAAGC,IAAK1E,EAAqB,gBACtCA,EAAqB,aAAI,GACpBA,CACT,CAEA,MAAM2E,EAAW,CAAA,EAeX,SAAUC,sBAAsBzF,GACpCA,EAAQtF,oBAAoB,QAAS8K,EAASxF,EAAQxD,GAAK,UAC3DkJ,EAAiB1F,EAAQxD,IAAM,KAC/BgJ,EAASxF,EAAQxD,GAAK,SAAW,IAEnC,UAEgBmJ,eAAe3F,EAAS4F,EAASC,GAC/C,IAAIC,EAAOZ,gBAAgBlF,GACvB+F,EAAYD,EAAiB,WAC7B/D,EAAe+D,EAAiB,WAAIA,EAAoB,cAAIA,EAAgB,UAAIA,EAAmB,aACnGE,EAAYZ,WAAWpF,EAAQ5J,MAAMmC,QACzCyH,EAAQ5J,MAAMmC,OAAS,OAEvB,IAAI0N,EAAOjO,KAAKkO,MAAMlG,EAAQE,aAAe6F,GAGzCI,EAAY,EAYhB,IAdAF,EAAOjO,KAAK6B,IAAI+L,EAASK,IAGdJ,GAGTM,GAFAF,EAAOJ,GAEaE,EAAYhE,EAChC/B,EAAQ5J,MAAMmC,OAAS4N,EAAY,KACnCnG,EAAQ5J,MAAMgQ,UAAY,YAE1BD,EAAYF,EAAOF,EAAYhE,EAC/B/B,EAAQ5J,MAAMmC,OAAS4N,EAAY,KACnCnG,EAAQ5J,MAAMgQ,UAAY,UAExBJ,IAAcG,EAAW,CACTT,EAAiB1F,EAAQxD,IAC/B6J,kBAAkB,oBAAqBjB,WAAWpF,EAAQqB,aAAc8E,EACrF,CACH,CAGA,MAAMT,EAAmB,CAAA,EAkWT,SAAAY,sBAAsBC,EAAcC,EAAmBlD,EAAQmD,EAAgBC,EAAUC,GACvG,IAAKD,EAAU,CACb,IAAI/P,EAAYC,SAAS8J,cAAciG,GACnCF,EAAevK,UACjBvF,EAAUI,YAAY0P,EAEzB,CAED,IAAIG,EAAa,CACfC,UAAW,CAAS,EACpBC,QAAS,KACTC,gBAAiB,EACjBC,iBAAkB,GAGpB,GAAIT,EAAc,CAChB,IAAIM,EAAYjQ,SAAS8J,cAAc8F,GACvCI,EAAWC,UAAYI,QAAQJ,EAAWvD,GAC1CsD,EAAWC,UAAUzF,WAAayF,EAAUzF,WAI1CwF,EAAWC,UAAU1F,UAHR,OAAXmC,EAG+BuD,EAAU1F,UAEV,CAEpC,CAoBD,OAmCF,SAAS+F,UAAUC,EAAgBjR,GACjC,IAAKA,IAAOA,EAAGE,OAA8B,SAArBF,EAAGE,MAAMgR,QAE/B,YADAD,IAIFjR,EAAGE,MAAMgR,QAAU,eACnBD,IACAjR,EAAGE,MAAMgR,QAAU,MACrB,CA9DEF,EAAU,KACR,GAAIT,EAAgB,CAClB,GAAIA,EAAeY,aAAc,CAC/B,MAAMC,EAAaC,4BAA4Bd,EAAeY,cAC9DT,EAAWG,gBAAkBtO,OAAO+O,YAAcF,EAAWvP,IAEzDwO,GACFK,EAAWC,UAAU9O,KAAO6O,EAAWG,gBACvCH,EAAWC,UAAUhP,MAAQY,OAAOgP,YAAcH,EAAWzP,MAE7D+O,EAAWI,iBAAmBM,EAAWzP,IAE5C,CAED+O,EAAWE,QAAUG,QAAQR,EAAgBnD,EAC9C,IACAmD,GAEIG,CACT,CAEA,SAASK,QAAQ/Q,EAAiBoN,GAChC,IAAKpN,EAAI,OAAO,KAEhB,MAAMwR,EAAOH,4BAA4BrR,GAGzC,GAAe,OAAXoN,EAAiB,CACnB,MAAMlN,EAAQqC,OAAOC,iBAAiBxC,GAEtCwR,EAAK7P,KAAO8P,SAASvR,EAAMwR,YAC3BF,EAAK3P,IAAM4P,SAASvR,EAAMyR,UAC3B,CAED,OAAOH,CACT,CAEA,SAASH,4BAA4BrR,GACnC,IAAKA,IAAOA,EAAGgG,SACb,OAAO,KAGT,MAAMwL,EAAOxR,EAAGwB,wBAChB,MAAO,CACLK,IAAKC,KAAKuK,MAAMmF,EAAK3P,KACrBF,KAAMG,KAAKuK,MAAMmF,EAAK7P,MACtBqK,OAAQlK,KAAKuK,MAAMmF,EAAKxF,QACxB5G,MAAOtD,KAAKuK,MAAMmF,EAAKpM,OACvBhD,MAAON,KAAKuK,MAAMmF,EAAKpP,OACvBC,OAAQP,KAAKuK,MAAMmF,EAAKnP,QAE5B,CAmCM,SAAUuP,mBAAmBpR,EAAkBqR,EAAgBC,EAAaC,GAChFvR,EAAEwR,iBACF,MAAMC,EAAWzR,EAAE0R,IACnB,GAAiB,cAAbD,GAAyC,cAAbA,EAA0B,CACxD,GAAiB,cAAbA,EAA0B,CAC5B,MAAMzD,EAAM,CACVzG,KAAMkK,EACNvI,MAAOmI,EACP5R,MAAO,IAEL8R,GACFA,EAAS5B,kBAAkB,SAAUgC,KAAKC,UAAU5D,GAEvD,CACD6D,cAAcR,EAAS,EAAGC,EAC3B,KACqB,eAAbG,GACPI,cAAcR,EAAS,EAAGC,EAE9B,CAEgB,SAAAO,cAAcC,EAAoBR,GAChD,GAAIQ,EAAa,EACfD,cAAc,EAAGP,QAEd,GAAIQ,GAAcR,EAAYxO,OACjC+O,cAAcP,EAAYxO,OAAS,EAAGwO,QAGtC,GAAIpR,SAAS0N,gBAAkB0D,EAAYQ,GAAa,CACtCnI,OAAO2H,EAAYQ,IAC3BC,OACT,CAEL,UAEgBC,mBAAmBhS,EAAUqR,EAAgBC,GAC3D,MAAMhI,EAAUK,OAAO2H,EAAYD,IAC/B/H,GAAWpJ,SAAS0N,gBAAkBtE,GACxCA,EAAQ2I,QAEZ,CAEM,SAAUC,qBAAqBlS,EAAUqR,EAAgBC,EAAaC,GAC1E,MACM9R,EADSO,EAAEiB,OACIxB,MAErB,GAAIA,GAAmB,KAAVA,IACXoS,cAAcR,EAAS,EAAGC,GAEtBC,GAAU,CACZ,MAAMvD,EAAM,CACVzG,KAAM,QACN2B,MAAOmI,EACP5R,MAAOA,GAET8R,EAAS5B,kBAAkB,SAAUgC,KAAKC,UAAU5D,GACrD,CAEL,CAnSAjM,OAAOoQ,OAAS,WACdrJ,sBAKF,SAASsJ,sBAAsBC,GACzBnL,QACFA,OAAOC,wBAAwBkL,EAAiB,CAC9CjL,iBAAkB,QAClBC,gBAAkBM,IACT,CACLJ,KAAMI,EAAMJ,KACZ+K,WAAY3K,EAAM4K,cAAcC,QAAQ,WAKlD,CAhBEJ,CAAsB,iBLzqCV,SAAUK,oBACP,IAAIC,kBAAiB,SAAUC,GAC5C,IAAK,IAAIC,KAAYD,EACnB,GAAsB,cAAlBC,EAASrL,MAGX,KAFItG,EAAc2R,EAAS3R,QAEf4R,OAAS5R,EAAOgL,WAAmB,OAC7ChL,EAAO8C,iBAAiB,YAAaT,YACrCrC,EAAO8C,iBAAiB,UAAWN,mBACnCxC,EAAO8C,iBAAiB,aAAcN,mBAEtCxC,EAAO4R,OAAQ,OACV,GAAuB,QAAnB5R,EAAO2E,SAAoB,CACpC,IAAIkN,EAAY5S,SAAS6S,iBAAiB,YAC1C,IAAK,IAAIC,KAAYF,EAAW,CAC9B,IAAItT,EAAUwT,EACTxT,EAAGqT,QACNrT,EAAGuE,iBAAiB,YAAaT,YACjC9D,EAAGuE,iBAAiB,WAAY/D,GAAMwD,WAAWxD,KACjDR,EAAGuE,iBAAiB,cAAe/D,GAAMwD,WAAWxD,KAEpDR,EAAGqT,OAAQ,EAEd,CACF,OACI,GAAsB,eAAlBD,EAASrL,KAAuB,CAGvC,IAAItG,EADwB,UAA1B2R,EAASK,iBACPhS,EAAc2R,EAAS3R,QAChBgL,WAAmB,QAC5BhL,EAAO8C,iBAAiB,YAAaT,YACrCrC,EAAO8C,iBAAiB,WAAY/D,GAAMwD,WAAWxD,KACrDiB,EAAO8C,iBAAiB,cAAe/D,GAAMwD,WAAWxD,OAExDiB,EAAO+C,oBAAoB,YAAaV,YACxCrC,EAAO+C,oBAAoB,WAAYhE,GAAMwD,WAAWxD,KACxDiB,EAAO+C,oBAAoB,cAAehE,GAAMwD,WAAWxD,MAGhE,CAEL,IAESkT,QAAQhT,SAAU,CACzB+L,YAAY,EACZkH,SAAS,EACTC,WAAW,EACXC,gBAAiB,CAAC,WAEtB,CKynCEZ,EACF,mDA7qCgB,SAAAa,aAAahK,EAASiK,GACpC,MAAMC,EAASlK,EACTmK,EAAMD,EAAOE,WAAW,MAE9B,IAAKD,EAAK,OAEV,MAAME,EAAqBF,EAAIG,qBAAqB,EAAG,EAAGJ,EAAO5R,MAAO,GACxE+R,EAAmBE,aAAa,EAAG,wBACnCF,EAAmBE,aAAa,EAAG,QAAQN,oBAC3CE,EAAIK,UAAYH,EAChBF,EAAIM,SAAS,EAAG,EAAGP,EAAO5R,MAAO4R,EAAO3R,QAExC,MAAMmS,EAAgBP,EAAIG,qBAAqB,EAAG,EAAG,EAAGJ,EAAO3R,QAC/DmS,EAAcH,aAAa,EAAG,wBAC9BG,EAAcH,aAAa,EAAG,sBAC9BJ,EAAIK,UAAYE,EAChBP,EAAIM,SAAS,EAAG,EAAGP,EAAO5R,MAAO4R,EAAO3R,OAC1C,8CAWgB,SAAAoS,wBAAwB3K,EAAsBD,IACxDC,eAAAA,EAASvF,mBACXuF,EAAQvF,iBACN,iBACA/D,GAAKoJ,aAAapJ,EAAGqJ,EAAUC,KAC/B,EAGN,6BAEgB,SAAA4K,2BAA2B5K,EAAsBD,IAC3DC,eAAAA,EAAStF,sBACXsF,EAAQtF,oBACN,iBACAhE,GAAKoJ,aAAapJ,EAAGqJ,EAAUC,KAC/B,EAGN,qBAEM,SAAU6K,mBAAmB7K,GAC5BA,EAAQlH,UAAUgS,SAAS,YAC9B9K,EAAQ5J,MAAMgR,QAAU,QAGX,IAAIgC,kBAAiB,SAAUC,GAC5C,IAAK,IAAIC,KAAYD,EACnB,GAAsB,eAAlBC,EAASrL,MACmB,SAA1BqL,EAASK,cAA0B,CACrC,IAAIhS,EAAsB2R,EAAS3R,OAC/BA,EAAOmB,UAAUgS,SAAS,WAC5BnT,EAAOvB,MAAMgR,QAAU,GACvBrM,MAAMpD,GAAQ,KAEdyI,MAAMzI,GACNyB,YAAW,KACTzB,EAAOvB,MAAMgR,QAAU,MAAM,GAC5B,KAEN,CAGP,IAESwC,QAAQ5J,EAAS,CAAE2C,YAAY,EAAMoH,gBAAiB,CAAC,UAClE,gEA4HM,SAAUgB,0BAA0BC,GACnCA,EAAoBvQ,kBACtBuQ,EAAoBvQ,iBAAiB,QAAS+H,eAEnD,+BAEM,SAAUyI,6BAA6BD,GAC1CA,EAAoBtQ,oBAAoB,QAAS8H,eACpD,0CAQM,SAAU0I,UAAUlL,GACxBA,EAAQmL,aAAa,OAAQ,SAC7BnL,EAAQ7J,MAAQ,GAChB6J,EAAQmL,aAAa,OAAQ,OAC/B,cAEM,SAAUC,YAAYpL,GAC1B,GAAIA,EAAQqL,OAASrL,EAAQqL,MAAM7R,OAAS,EAAG,CAE7C,IADA,IAAI8R,EAAW,GACNrO,EAAI,EAAGA,EAAI+C,EAAQqL,MAAM7R,OAAQyD,IAAK,CAC7C,IAAI+F,EAAOhD,EAAQqL,MAAMpO,GACrBsO,EAAYxI,aAAaC,GAC7BsI,EAASnO,KAAK,CACZqO,SAAUxI,EAAKyI,KACfpT,KAAM2K,EAAK3K,KACXqT,UAAWH,EACXtN,KAAM+E,EAAK/E,MAEd,CAED,OAAOqN,CACR,CACH,uCAYM,SAAUK,WAAW3L,EAASJ,EAAOgM,EAAMC,EAASpJ,EAAQQ,EAAKwI,EAAMK,EAAUC,EAAeC,EAAeC,GACnH,IAAIC,EAAW,IAAIC,SACnB,IAAInJ,EAAOhD,EAAQqL,MAAMzL,GACrBvH,EAAO2K,EAAK3K,KAEhB,GADA6T,EAASE,OAAOX,EAAMzI,GACV,MAAR4I,EACF,IAAK,IAAIxD,KAAOwD,EACdM,EAASE,OAAOhE,EAAKwD,EAAKxD,IAG9B,MAAMiE,EAAM,IAAIC,eAkBhB,GAjBAD,EAAIE,mBAAqB,WACvB,GAAuB,IAAnBF,EAAIG,WAAkB,CACxB,GAAkB,KAAdH,EAAII,OAEN,YADAX,EAASzF,kBAAkB4F,EAAaxJ,EAAQ,cAAc4J,EAAII,WAGpEX,EAASzF,kBAAkB2F,EAAevJ,EAAQ4J,EAAIK,aACvD,CACH,EACAL,EAAIM,OAAOC,WAAa,SAAUvO,GAChC,IAAIwO,EAAU7U,KAAK8U,MAAMzO,EAAM0O,OAAS1U,EAAO,KAC/CyT,EAASzF,kBAAkB0F,EAAetJ,EAAQoK,EACpD,EACAR,EAAIW,QAAU,SAAUtW,GACtBoV,EAASzF,kBAAkB4F,EAAaxJ,EAAQ,QAClD,EACA4J,EAAIY,KAAK,OAAQhK,GAAK,GACP,MAAX4I,EACF,IAAK,IAAIqB,KAAUrB,EACjBQ,EAAIc,iBAAiBD,EAAQrB,EAAQqB,IAGzCb,EAAIe,KAAKlB,EACX,eAEM,SAAUmB,aAAarN,EAAStC,EAAWC,EAAW2P,GAC1D,IAAIxM,EAAMT,OAAOL,GACbuN,EAAM3W,SAAS4W,YAAY9P,GAO/B,OANA6P,EAAIE,UAAU9P,GAEV2P,GACFC,EAAID,kBAGCxM,EAAI4M,cAAcH,EAC3B,uBAEgBI,YAAY3N,EAASyL,EAAMtV,GAC/BkK,OAAOL,GACbyL,GAAQtV,CACd,uFAyBgByX,gCAAgC5N,EAAS3D,EAAW,QAClE,IAAIyE,EAAMT,OAAOL,GACjB,GAAIc,EAAI+M,kBAAmB,CACzB,GAA+C,SAA3C/M,EAAI+M,kBAAkBzX,MAAe,QAAc,CAGrD,IAAI2K,EAASD,EAAI+M,kBAAkB7M,WAAU,GAC7CD,EAAO3K,MAAe,QAAI,eAC1B2K,EAAO3K,MAAM,YAAc,IAC3BQ,SAAS8J,cAAcrE,GAAUtF,YAAYgK,GAC7C,IAAI5K,EAAQuB,sBAAsBqJ,GAElC,OADAnK,SAAS8J,cAAcrE,GAAUtC,YAAYgH,GACtC5K,CACR,CACC,OAAOuB,sBAAsBoJ,EAAI+M,kBAEpC,CACD,OAAO,IACT,8BAIM,SAAUC,4BACdzR,EACA4B,EACA8P,EACAC,EACAC,GACA,IAAIC,EAGFA,EADc,UAAZ7R,EACY5D,OACO,YAAZ4D,EACKzF,SAAS0J,gBAET1J,SAAS8J,cAAcrE,GAGvC,IAAI+L,GAAM6F,aAAA,EAAAA,EAAQ7F,MAAO,GAAG/L,KAAY4B,IAGpCkQ,EAAS,CAAA,EAETC,SAAYlQ,UAUd,IATI+P,eAAAA,EAAQX,kBACVpP,EAAKoP,mBAGHW,eAAAA,EAAQ/F,iBACVhK,EAAKgK,kBAIH+F,aAAM,EAANA,EAAQI,iBAA+D,QAA9C9K,EAAA3M,SAAS8J,cAAcuN,EAAOI,sBAAgB,IAAA9K,OAAA,EAAAA,EAAAuH,SAAS5M,EAAKmQ,gBACvF,OAGF,MAAM3J,EAAM,CAAA,EAEZ,IAAK,IAAI4J,KAAKpQ,EACZ,GAAsB,iBAAXA,EAAKoQ,IAAoC,iBAAXpQ,EAAKoQ,GAC5C5J,EAAI4J,GAAKpQ,EAAKoQ,QACT,GAAS,UAALA,GAAiBpQ,EAAKvG,OAAOgL,WAAY,CAClD,IAAIhL,EAAS,CACXgL,WAAY,CAAE,GAGhB,IAAK,IAAI/C,EAAQ,EAAGA,EAAQ1B,EAAKvG,OAAOgL,WAAWnJ,OAAQoG,IAAS,CAClE,MAAM2O,EAAOrQ,EAAKvG,OAAOgL,WAAW/C,GACpCjI,EAAOgL,WAAW4L,EAAK9C,MAAQ8C,EAAKpY,KACrC,CACDuO,EAAI4J,GAAK3W,CACV,MAAM,GAAS,WAAL2W,GAAuB,iBAALA,GAA6B,kBAALA,EAAuB,CAC1E,IAAIE,EAAO,GACXtQ,EAAKoQ,GAAG3J,SAAQzH,IACd,IAAIuR,EAAO,CAAA,EAEX,IAAK,IAAIF,KAAQrR,EACa,iBAAhBA,EAAMqR,IAA8C,iBAAhBrR,EAAMqR,KACpDE,EAAKF,GAAQrR,EAAMqR,IAGvBC,EAAKrR,KAAKsR,EAAK,IAGjB/J,EAAI4J,GAAKE,CACV,CAGHT,EAAQ1H,kBAAkB,SAAU3B,EAAI,EAG1C,IAAIuJ,eAAAA,EAAQS,WAAYT,EAAOS,SAAW,EAAG,CAC3C,IAAIC,EACJR,EAAiB,SAAI,SAAUjQ,GAC7B0Q,aAAaD,GACbA,EAAUvV,YAAW,IAAMgV,SAASlQ,IAAO+P,EAAOS,SACpD,CACD,MACI,IAAIT,eAAAA,EAAQY,WAAYZ,EAAOY,SAAW,EAAG,CAChD,IAAIC,EACJX,EAAiB,SAAI,SAAUjQ,SACxB4Q,IACHV,SAASlQ,GACT4Q,GAAY,EACZ1V,YAAW,KACT0V,GAAY,CAAK,GACC,QAAhBvL,EAAA0K,aAAM,EAANA,EAAQY,gBAAQ,IAAAtL,EAAAA,EAAI,GAE5B,CACD,MACC4K,EAAiB,SAAIC,SAGvBD,EAAgB,QAAIH,EAEhBvK,EAAiC2E,GACnC3E,EAAiC2E,GAAKjL,KAAKgR,GAE3C1K,EAAiC2E,GAAO,CAAC+F,GAGvCD,GACFA,EAAYzT,iBAAiBwD,EAAMkQ,EAAiB,SAAGH,EAE3D,0CAEgBe,+BAA+B1S,EAAU4B,EAAMqQ,GAC7D,IAAIJ,EAGFA,EADc,UAAZ7R,EACY5D,OACO,YAAZ4D,EACKzF,SAAS0J,gBAET1J,SAAS8J,cAAcrE,GAGvC,IAEI2S,EAAUvL,EAFV6K,EAAIA,GAAK,GAAGjS,KAAY4B,KAIxB+Q,IACFA,EAAQrK,SAAQ8J,IACdP,SAAAA,EAAaxT,oBAAoBuD,EAAMwQ,EAAe,SAAGA,EAAc,QAAE,IAG3EhL,EAAiC6K,GAAK,GAE1C,wCAIgBW,6BAA6BlB,EAASmB,EAA6BC,GACjF,GAAKD,EAAL,CAEAA,EAAoBA,EAAkBE,QAAOC,KAAOA,IAEpD,IAAIjB,SAAW,SAAUlQ,GAEvB,IADagR,EAAkBI,MAAKD,IAAK,IAAA9L,EAAA,OAAW,QAAXA,EAAAlD,OAAOgP,UAAI,IAAA9L,OAAA,EAAAA,EAAAuH,SAAS5M,EAAKvG,OAAO,IACzE,CAEA,IAAI4X,EAAkBxT,mBAAmBmC,EAAKvG,QAE1CwX,EACEA,EAAgBG,MAAKD,IAAI,IAAA9L,EAAC,OAAS,QAATA,EAAAlD,OAAOgP,UAAE,IAAA9L,OAAA,EAAAA,EAAEuH,SAAS5M,EAAKvG,OAAO,KAC5DoW,EAAQ1H,kBAAkB,SAAU,CAACkJ,oBAGvCxB,EAAQ1H,kBAAkB,SAAU,CAACkJ,mBATpB,CAWrB,EAEA3Y,SAAS6D,iBAAiB,QAAS2T,UAAU,GAE7C,IAAIhG,EAAM,IAAI8G,EAAkBrS,KAAK,sBAErC6G,EAA2B0E,GAAOgG,QAvBH,CAwBjC,kCAEM,SAAUoB,gCAAgCN,GAC9C,GAAKA,EAAL,CAIA,IAAI9G,EAAM,KAFV8G,EAAoBA,EAAkBE,QAAOC,KAAOA,KAEpBxS,KAAK,sBAEjC6G,EAA2B0E,KAC7BxR,SAAS8D,oBAAoB,QAASgJ,EAA2B0E,IAAM,GACvE1E,EAA2B0E,QAAOlF,EARL,CAUjC,6BAEM,SAAUuM,2BAA2BpT,GACzC,IAAI6R,EAActX,SAAS8J,cAAcrE,GACrC6R,GACFA,EAAYzT,kBAEhB,WAEgB,SAAAqQ,SAAS4E,EAAIC,GAC3B,MAAMC,EAAOvP,OAAOqP,GACpB,SAAIE,IAAQA,EAAK9E,WACR8E,EAAK9E,SAASzK,OAAOsP,GAGhC,mBAEgB,SAAAE,iBAAiBH,EAASC,GACxC,MAAMC,EAAOvP,OAAOqP,GACdI,EAAOzP,OAAOsP,GACpB,QAASC,GAAQA,EAAK9E,YAAcgF,IAASF,GAAQE,GAAQF,EAAK9E,SAASgF,GAC7E,aAEM,SAAUC,WAAWC,GACzB,OAAOvX,OAAOsX,WAAWC,GAAOC,OAClC,OA0BM,SAAUC,KAAKC,GACdC,UAAUC,UAIfD,UAAUC,UAAUC,UAAUH,GAAMI,MAAK,WACvC5V,QAAQ6V,IAAI,8CACb,IAAE,SAAUC,GACX9V,QAAQ+V,MAAM,+BAAgCD,EAChD,IAjCF,SAASE,4BAA4BR,GACnC,IAAIS,EAAWha,SAASC,cAAc,YACtC+Z,EAASza,MAAQga,EAGjBS,EAASxa,MAAM2B,IAAM,IACrB6Y,EAASxa,MAAMyB,KAAO,IACtB+Y,EAASxa,MAAMuC,SAAW,QAE1B/B,SAAS+J,KAAK5J,YAAY6Z,GAC1BA,EAASnI,QACTmI,EAASjI,SAET,IACE,IACIkI,EADaja,SAASka,YAAY,QACf,aAAe,eACtCnW,QAAQ6V,IAAI,sCAAwCK,EAGrD,CAFC,MAAOJ,GACP9V,QAAQ+V,MAAM,iCAAkCD,EACjD,CAED7Z,SAAS+J,KAAK5G,YAAY6W,EAC5B,CAIID,CAA4BR,EAQhC,iBAEgB1H,MAAMpM,EAAU0U,GAAoB,GAClD,IAAIjQ,EAAMT,OAAOhE,GACjB,KAAMyE,aAAekQ,aACnB,MAAM,IAAIC,MAAM,uCAClBnQ,EAAI2H,MAAM,CACRyI,cAAeH,GAEnB,SAEM,SAAUpI,OAAOtM,GACrB,IAAIyE,EAAMT,OAAOhE,GACjB,KAAMyE,aAAeqQ,kBAAoBrQ,aAAesQ,qBACtD,MAAM,IAAIH,MAAM,uCAClBnQ,EAAI6H,QACN,WAEM,SAAU0I,SAAShV,GACvB,IAAIyE,EAAMT,OAAOhE,GACjB,OAAQzF,SAAS0N,gBAAkBxD,CACrC,OAEM,SAAUwQ,KAAKjV,GACTgE,OAAOhE,GACbiV,MACN,MAEM,SAAUd,IAAIL,GAClBxV,QAAQ6V,IAAIL,EACd,UAEM,SAAUoB,QAAQ5Z,GACtB,IAAImJ,EAAMT,OAAO1I,GAEfgM,QADE7C,EACMA,EAAIS,UAEJ,EAEZ,WAeM,SAAU6C,SAASzM,GACvB,IAAImJ,EAAMT,OAAO1I,GACbmJ,aAAekQ,aACjBlQ,EAAI0Q,eAAe,CACjBC,SAAU,SACVC,MAAO,QACPC,OAAQ,WAGd,wBAEgB,SAAAC,sBAAsBjb,EAAWgB,GAC/C,IAAImJ,EAAmBT,OAAO1J,IAE9BgB,EAASmJ,EAAIJ,cAAc,cAK3BI,EAAIS,UAAY5J,EAAOwJ,UAAYL,EAAIiB,aAAe,EAAIpK,EAAOoK,aAAe,EAClF,mBAEgB,SAAA8P,iBAAiBlb,EAAWgC,GAChC0H,OAAO1J,GACbyN,SAAS,CAAErM,IAAKY,EAAU8Y,SAAU,UAC1C,gCAEgBK,qBAAqB9R,EAAS3D,EAAW,QACvD,IAAIyE,EAAMT,OAAOL,GACjB,OAAIc,EAAI+M,kBACCjN,WAAWE,EAAI+M,kBAAmBxR,GACpCuE,WAAWE,EAAKzE,EACzB,qBAEgB,SAAA0V,mBAAmB/R,EAAShJ,GAC1C,IAAI8J,EAAMT,OAAOL,GACbc,EAAI+M,mBACN/M,EAAI+M,kBAAkB/U,UAAUC,IAAI/B,EAExC,0BAEgB,SAAAgb,wBAAwBhS,EAAShJ,GAC/C,IAAI8J,EAAMT,OAAOL,GACbc,EAAI+M,mBACN/M,EAAI+M,kBAAkB/U,UAAUO,OAAOrC,EAE3C,iBAEM,SAAUib,eAAevb,GAC7B,IAAIe,EAASf,EAAEyK,UAIf,OAHsB,MAAlBzK,EAAE2Q,eACJ5P,GAAUwa,eAAevb,EAAE2Q,eAEtB5P,CACT,kBAEM,SAAUya,gBAAgBxb,GAC9B,IAAIe,EAASf,EAAE0K,WAIf,OAHsB,MAAlB1K,EAAE2Q,eACJ5P,GAAUya,gBAAgBxb,EAAE2Q,eAEvB5P,CACT,mBAEM,SAAU0a,iBAAiBnS,GAC/BpJ,SAAS+J,KAAK5J,YAAYiJ,EAC5B,qBAEM,SAAUoS,mBAAmBpS,GACjCpJ,SAAS+J,KAAK5G,YAAYiG,EAC5B,eAEgB,SAAAqS,aAAaC,EAAYC,GACvC,IAAIC,EAASnS,OAAOkS,GAChBC,GAAUF,GACZE,EAAOzb,YAAYub,EAEvB,iBAEgB,SAAAG,eAAeC,EAAYH,GACzC,IAAIC,EAASnS,OAAOkS,GAChBC,GAAUE,GACZF,EAAOzY,YAAY2Y,EAEvB,yDAQgBC,YAAYtW,EAAkBuW,EAAgB,GAC5D,IAAIC,EAAmBjc,SAAS8J,cAAcrE,GAC1CwW,IAAQA,EAAIC,aAAa,aAC3B1Z,YAAW,KACTyZ,EAAIpK,QACQ,IAAMpE,qBACJhI,GACRuW,EAAQ,IACVD,YAAYtW,EAAUuW,EAAQ,EAEjC,GACA,GAEP,qBAEgBG,YACd,MAAO,CACLC,WAAYva,OAAOua,WACnBC,YAAaxa,OAAOwa,YACpBxL,YAAahP,OAAOgP,YACpBD,YAAa/O,OAAO+O,YACpB0L,MAAyB,GAAlBza,OAAO0a,QACdC,SAAW3a,OAAO0a,QAAU1a,OAAOwa,aAAgBrc,SAAS+J,KAAKxI,aAErE,0DA+BM,SAAUkb,IAAIrT,EAAcyL,EAAuBtV,EAAuB,MAC9E,IAAI2K,EAAMT,OAAOL,GACjB,GAAoB,iBAATyL,EACT3K,EAAI1K,MAAMqV,GAAQtV,OAElB,IAAK,IAAIiS,KAAOqD,EACVA,EAAK6H,eAAelL,KACtBtH,EAAI1K,MAAMgS,GAAOqD,EAAKrD,GAI9B,SAEgB,SAAAmL,OAAOlX,EAA4BmX,GACjD,IAAIxT,EAAUK,OAAOhE,GAEE,iBAAZmX,EACTxT,EAAQlH,UAAUC,IAAIya,GAEtBxT,EAAQlH,UAAUC,OAAOya,EAE7B,YAEgB,SAAAC,UAAUpX,EAA4BmX,GACpD,IAAIxT,EAAUK,OAAOhE,GAEE,iBAAZmX,EACTxT,EAAQlH,UAAUO,OAAOma,GAEzBxT,EAAQlH,UAAUO,UAAUma,EAEhC,wBAEM,SAAUE,sBAAsBrX,GACpC,IAAI2D,EAAUK,OAAOhE,GAEhB2D,GAGLA,EAAQwR,eAAe,CAAEC,SAAU,SAAUC,MAAO,UAAWC,OAAQ,SACzE,uBAUM,SAAUgC,qBAAqBC,GACnC,GAAIhd,SAAS8J,cAAc,oBAAoBkT,OAC7C,OAEF,MAAMC,EAASjd,SAASC,cAAc,UACtCgd,EAAO1I,aAAa,MAAOyI,GAC3BC,EAAO1I,aAAa,iBAAkByI,GACtChd,SAAS+J,KAAK5J,YAAY8c,EAC5B,qBAEgBC,YACd,MAAO,CAAE3c,EAAGsB,OAAOgP,YAAarQ,EAAGqB,OAAO+O,YAC5C,eAEM,SAAUuM,aAAa/T,GAE3B,OADUK,OAAOL,GACNgU,SACb,0EAuBgBC,eACd,MAAO,IAAIrd,SAASsd,KAAKC,QAAO,CAACC,EAAG1d,IAAMsB,KAAK6B,IAAIua,GAAI3b,OAAOC,iBAAiBhC,GAAG2d,QAAU,IAAI,EAClG,WAEgB,SAAAC,SAAStU,EAASuU,GAGhC,OAFAvU,EAAUK,OAAOL,IAELmF,aACHnF,EAAQmF,aAAaoP,GACnB9b,OAAOC,iBACT9B,SAASyO,YAAY3M,iBAAiBsH,EAAS,MAAMH,iBAAiB0U,QADxE,CAGT,yDA8BM,SAAUC,uBAAuBxU,EAAS4F,EAASC,EAAS4O,GAChE,GAAKA,EAQH,OALA/O,EAAiB1F,EAAQxD,IAAMiY,EAC/BjP,EAASxF,EAAQxD,GAAK,SAAW,WAC/BmJ,eAAe3F,EAAS4F,EAASC,EACnC,EACA7F,EAAQvF,iBAAiB,QAAS+K,EAASxF,EAAQxD,GAAK,UACjD0I,gBAAgBlF,GAPvByF,sBAAsBzF,EAS1B,uFAwCM,SAAU0U,WAAWC,UAClBjP,EAAiBiP,EAC1B,+BAWgB,SAAAC,6BAA6BC,EAASC,GACpDD,EAAQE,uBAAyB,KAC/BD,EAAUxT,WAAauT,EAAQvT,UAAU,EAE3CuT,EAAQpa,iBAAiB,SAAUoa,EAAQE,uBAC7C,iCAEM,SAAUC,+BAA+BH,GACzCA,GACFA,EAAQna,oBAAoB,SAAUma,EAAQE,uBAElD,iBASgB,SAAAE,eAAeC,EAAcC,GAC3C,GAAID,EAAc,CAChB,IAAIpU,EAAMT,OAAO6U,GACjBC,EAAOA,EAAKC,KAAI,SAAUje,GACxB,OAAOA,EAAEke,aACX,IACA7P,EAAS0P,EAAa1Y,GAAK,WAAc9F,GAb7C,SAAS4e,YAAY5e,EAAGye,GACtB,IAA2C,IAAvCA,EAAK5U,QAAQ7J,EAAE0R,IAAIiN,eAErB,OADA3e,EAAEwR,kBACK,CAEX,CAQmDoN,CAAY5e,EAAGye,GAC7DrU,EAAoBrG,iBAAiB,UAAW+K,EAAS0P,EAAa1Y,GAAK,YAAY,EACzF,CACH,oBAEM,SAAU+Y,kBAAkBL,GAChC,GAAIA,EAAc,CACN7U,OAAO6U,GACIxa,oBAAoB,UAAW8K,EAAS0P,EAAa1Y,GAAK,YAC/EgJ,EAAS0P,EAAa1Y,GAAK,WAAa,IACzC,CACH,kCASgB,SAAAgZ,gCAAgCxV,EAASyV,GACvD,GAAIzV,GAAWyV,EAAgB,CAC7B,IAAI3U,EAAMT,OAAOL,GACjBwF,EAASxF,EAAQxD,GAAK,iBAAoB9F,GAV9C,SAASgf,sBAAsBhf,EAAG0R,EAAauN,GAC7C,GAAIjf,EAAE0R,IAAIiN,gBAAkBjN,EAAIiN,eAAiBM,IAE/C,OADAjf,EAAEwR,kBACK,CAEX,CAKoDwN,CAAsBhf,EAAG,SAAS,IAAsC,OAAhC+e,EAAepO,eACtGvG,EAAoBrG,iBAAiB,UAAW+K,EAASxF,EAAQxD,GAAK,kBAAkB,EAC1F,CACH,qCAEM,SAAUoZ,mCAAmC5V,GACjD,GAAIA,EAAS,CACDK,OAAOL,GACItF,oBAAoB,UAAW8K,EAASxF,EAAQxD,GAAK,kBAC1EgJ,EAASxF,EAAQxD,GAAK,iBAAmB,IAC1C,CACH,qBAEgB,SAAAqZ,mBAAmBld,EAAUwX,GAC3CvZ,SAASkf,KAAKD,mBAAmBld,EAAUwX,EAC7C,qBAEM,SAAU4F,mBAAmBC,GACjC,OAAO,IAAIC,SAAQ,SAAUC,EAASC,GACpC,IAAIC,EAAM,IAAIC,MACdD,EAAIJ,IAAMA,EACVI,EAAIvN,OAAS,WACXqN,EAAQ,CACN5d,MAAO8d,EAAI9d,MACXC,OAAQ6d,EAAI7d,OACZ+d,UAAU,GAEd,EACAF,EAAIpJ,QAAU,WACZkJ,EAAQ,CACN5d,MAAO,EACPC,OAAQ,EACR+d,UAAU,GAEd,CACF,GACF,wCAEgBC,6BAA6BvW,EAAc3B,EAAemY,GACxE,MAAM1V,EAAMT,OAAOL,GACdc,IACS,YAAVzC,EACFyC,EAAIrG,iBAAiB4D,GAAQ3H,IACvB+f,MAAMC,QAAQF,GACJA,EACFvR,SAASvO,EAAEigB,OACnBjgB,EAAEwR,iBAGJxR,EAAEwR,gBACH,IAGHpH,EAAIrG,iBAAiB4D,GAAO3H,IACtBA,EAAEwR,gBACJxR,EAAEwR,gBACH,IAGP,iBAEgB,SAAA0O,eAAeva,EAAkB0R,GAC/C,IAAI7X,EAAKU,SAAS8J,cAAcrE,GAChC,IAAKnG,EAAI,OAEc,IAAI2gB,gBAAgBC,IACzC,MAAMlQ,EAAa,GACnB,IAAK,IAAImQ,KAASD,EAAS,CACzB,MAAME,EAAYD,EAAME,YACxBrQ,EAAWzJ,KAAK6Z,EACjB,CACDjJ,EAAQ1H,kBAAkB,SAAUO,EACrC,IAEcgD,QAAQ1T,EACzB,uBAEgB,SAAAghB,qBAAqB7a,EAAkB8a,GACrD,IAAIjhB,EAAKU,SAAS8J,cAAcrE,GAChC,IAAKnG,EAAI,OAEQ,IAAIkhB,sBAAqB,CACxCN,EAAuC,GACvCO,KAEIP,EAAQxH,MAAK5Y,GAAKA,EAAE4gB,kBACtBH,EAASxS,SAAQ8J,IACfA,EAAKpI,kBAAkB,SAAS,GAEnC,IAGMuD,QAAQ1T,EACnB,yBAEM,SAAUqhB,uBAAuBlb,GAKrC,IAJA,IAAImb,EAAW5gB,SAAS6S,iBAAiBpN,GAErCwE,EAAS,GAEJ5D,EAAI,EAAGA,EAAIua,EAAShe,OAAQyD,IAAK,CACxC,IAAIvG,EAAa8gB,EAASva,GACtB6D,EAAM,CACRtE,GAAI9F,EAAE8F,GACNkL,KAAMhR,EAAEgB,yBAEVmJ,EAAO1D,KAAK2D,EACb,CAED,OAAOD,CACT,UAEgB,SAAA4W,QAAQC,EAAWC,GACjC,IAAIzhB,EAAKmK,OAAOqX,GAEZtQ,EAAUlR,EAAGE,MAAMgR,QACnBwQ,EAAW1hB,EAAGE,MAAMwhB,SAExB1hB,EAAGE,MAAMgR,QAAU,GACnBlR,EAAGE,MAAMwhB,SAAW,SAEpB,IAAIvf,EAAOnC,EAAG,SAAWyhB,EAASE,OAAO,GAAGxC,cAAgBsC,EAASG,MAAM,KAAO,EAKlF,OAHA5hB,EAAGE,MAAMgR,QAAUA,EACnBlR,EAAGE,MAAMwhB,SAAWA,EAEbvf,CACT,UAEgB,SAAA0f,QAAQL,EAAWjM,GACjC,IAAIvV,EAAKmK,OAAOqX,GAChB,OAAKxhB,EAIEA,EAAGuV,GAHD,IAIX,kCAEgBuM,uBAAuBN,EAAW3X,EAAU0O,GAC1D,IAAIvY,EAAkBmK,OAAOqX,GACzB/gB,EAAyBT,EAAGwK,cAAc,wBAE9C,GAAI+N,EAAJ,CACE,IAAIwJ,EAAsB5X,OAAOoO,GACjC9X,EAAUP,MAAMmC,OAAS0f,EAAO9f,aAAe,IAEhD,MAEG4H,GACFpJ,EAAUmC,UAAUC,IAAI,kCACxBpC,EAAUP,MAAMmC,OAASrC,EAAGiC,aAAe,OAE3CxB,EAAUP,MAAMmC,OAAS,GACzB5B,EAAUmC,UAAUO,OAAO,kCAE/B,+BAEM,SAAU6e,6BAA6BR,GAC3C,IAAIxhB,EAAkBmK,OAAOqX,GAC7B,IAAKxhB,EACH,OAAO,EAGT,IAAIqC,EAASrC,EAAGE,MAAMmC,OACtBrC,EAAGE,MAAMmC,OAAS,IAClB,IAAI2H,EAAehK,EAAGgK,aAGtB,OAFAhK,EAAGE,MAAMmC,OAASA,EAEX2H,CACT,wCAuBgBiY,6BAA6BnY,EAASkV,EAAcjN,GAC7DjI,GAAYkV,GAEjBlV,EAAQvF,iBAAiB,aAAc/D,IAQrC,GAPeA,EAAEiB,SACA0I,OAAO6U,KAEtBxe,EAAEwR,iBACFxR,EAAE4W,mBAGArF,EAAU,CACZ,MAAMmQ,EAAiB,CACrBC,OAAQ3hB,EAAE4H,OACVga,QAAS5hB,EAAE2G,QACXkb,QAAS7hB,EAAE4G,QACXkb,QAAS9hB,EAAEkB,QACX6gB,QAAS/hB,EAAEoB,QACX4gB,QAAShiB,EAAE6H,QACXoa,QAASjiB,EAAE8H,QACXoa,MAAOliB,EAAE6G,MACTsb,MAAOniB,EAAE8G,MACTsb,OAAQpiB,EAAE+H,OACVsa,QAASriB,EAAEgI,QACXsa,QAAStiB,EAAEiI,QACXsa,SAAUviB,EAAEkI,SACZsa,OAAQxiB,EAAEmI,OACVsa,QAASziB,EAAEoI,QACXsa,KAAM1iB,EAAEuH,MAGVgK,EAAS5B,kBAAkB,SAAU+R,EACtC,IAEL,oBAEgBiB,WACd,MAAO,qUAAqUC,KAAKlJ,UAAUmJ,YACtV,0kDAA0kDD,KAAKlJ,UAAUmJ,UAAUC,OAAO,EAAG,GACpnD,wBAEM,SAAUC,sBAAsBpd,GACpC,IAAInG,EAAKmK,OAAOhE,GAChB,OAAInG,GAAMA,EAAG4U,SACJ5U,EAAG4U,SAASlU,SAAS0N,eAGvB,IACT,YAEM,SAAUoV,UAAUxjB,GACN,iBAAPA,IACTA,EAAKU,SAAS8J,cAAcxK,IAGzBA,IAELA,EAAGiV,aAAa,kBAAmB,QACnCjV,EAAGuS,QACH7R,SAASka,YAAY,aAAa,EAAO,MACzCla,SAASka,YAAY,QACrBla,SAASka,YAAY,YACrB5a,EAAGyjB,gBAAgB,mBACrB,WAEM,SAAUC,SAASzJ,GACvB,GAAKC,UAAUC,UAyBfD,UAAUC,UAAUC,UAAUH,GAAMI,MAAK,WACvC5V,QAAQ6V,IAAI,8CACb,IAAE,SAAUC,GACX9V,QAAQ+V,MAAM,+BAAgCD,EAChD,QA7BA,CACE,IAAIG,EAAWha,SAASC,cAAc,YACtC+Z,EAASza,MAAQga,EAGjBS,EAASxa,MAAM2B,IAAM,IACrB6Y,EAASxa,MAAMyB,KAAO,IACtB+Y,EAASxa,MAAMuC,SAAW,QAE1B/B,SAAS+J,KAAK5J,YAAY6Z,GAC1BA,EAASnI,QACTmI,EAASjI,SAET,IACE,IACIkI,EADaja,SAASka,YAAY,QACf,aAAe,eACtCnW,QAAQ6V,IAAI,sCAAwCK,EAGrD,CAFC,MAAOJ,GACP9V,QAAQ+V,MAAM,iCAAkCD,EACjD,CAED7Z,SAAS+J,KAAK5G,YAAY6W,EAE3B,CAOH,4EA8FgBiJ,qBAAqBrV,EAAaC,EAAe8B,EAAcC,EAAmBlD,EAAQmD,EAAgBC,EAAUC,EAAgB3G,GAClJ,IAAI8Z,EAAiB,CACnBC,kBAAmB,KACnBnT,WAAY,KACZyN,OAAQ,GAOV,OAJAyF,EAAeC,kBAAoBxV,0BAA0BC,EAAaC,GAC1EqV,EAAelT,WAAaN,sBAAsBC,EAAcC,EAAmBlD,EAAQmD,EAAgBC,EAAUC,GACrHmT,EAAezF,OAASxP,yBAAyB,CAAC4B,GAAiBzG,GAE5D8Z,CACT,+BAEgB,SAAAE,6BAA6BhS,EAAaC,GACxD,IAAK,IAAIhL,EAAI,EAAGA,EAAI+K,EAAYxO,OAAQyD,IACtC+K,EAAY/K,GAAGxC,iBAAiB,SAAU/D,GAAakS,qBAAqBlS,EAAGuG,EAAG+K,EAAaC,KAC/FD,EAAY/K,GAAGxC,iBAAiB,SAAU/D,GAAagS,mBAAmBhS,EAAGuG,EAAG+K,KAChFA,EAAY/K,GAAGxC,iBAAiB,SAAU/D,GAAqBoR,mBAAmBpR,EAAGuG,EAAG+K,EAAaC,IAEzG,8LA+DgBgS,iCAAiC5d,EAAkB6d,EAAkB/jB,GACnF,MAAMgkB,EAAQvjB,SAAS6S,iBAAiBpN,GACxC,IAAK8d,EACH,OAAQ,EAGV,IAAIva,GAAS,EACb,IAAK,IAAI3C,EAAI,EAAGA,EAAIkd,EAAM3gB,OAAQyD,IAChC,GAAIkd,EAAMld,GAAGsC,aAAa2a,KAAe/jB,EAAO,CAC9CyJ,EAAQ3C,EACR,KACD,CAGH,OAAO2C,CACT,eAEM,SAAUwa,aAAaC,EAAyBC,EAAuB1a,EAAe2a,GAC1F,IAAIJ,EAAQvjB,SAAS6S,iBAAiB6Q,GACtC,IAAKH,EAAO,OAEZ,IAAIK,EAAOL,EAAMva,GAEjB,IAAK4a,EAAM,OAEX,MAAM1T,EAAUlQ,SAAS8J,cAAc2Z,GACvC,IAAKvT,EAAS,OAEd,MAAMvF,EAAYuF,EAAQvF,UACpBkZ,EAAgB3T,EAAQ3O,aAE1BoJ,EAAYiZ,EAAKrZ,UAAY,EAC/B2F,EAAQ1C,SAAS,CAAErM,IAAKyiB,EAAKrZ,UAAYqZ,EAAKriB,aAAcsZ,SAAU,WAC7DlQ,EAAYkZ,EAAgBD,EAAKrZ,UAAYqZ,EAAKriB,aAAe,GAC1E2O,EAAQ1C,SAAS,CAAErM,IAAKyiB,EAAKrZ,UAAYsZ,EAAoC,EAApBD,EAAKriB,aAAkBsZ,SAAU,UAE9F,uBAEM,SAAUiJ,qBAAqB1a,GACnC,MAAM5J,EAAQqC,OAAOC,iBAAiBsH,GAChC/J,EAAYG,EAAMH,WAAaG,EAAMC,gBACrCskB,EAAa1kB,EAAU6hB,MAAM,EAAG7hB,EAAUuD,OAAS,GAAGiH,MAAM,MAAM,GAExE,OAAO9G,OAAOghB,EAChB,mDAMgBC,wCAAwC1kB,EAAasc,EAAiBqI,GACpF,IAAK3kB,IAAOsc,EAAQ,OAEpB,MACMsI,EADO5kB,EAAGwB,wBACQK,IAKxB,OAbF,SAASgjB,SAAS/a,GAChB,OAAOA,IAAYvH,MACrB,CAOkBsiB,CAASvI,GACrB/Z,OAAOwa,YACPT,EAAO9a,wBAAwBwK,SAEhB4Y,EAAaD,CAClC,IC3gDIG,EAA8C,CAAA,EA+ElD,SAASC,aAAa/kB,EAAaQ,GACjC,GAAIR,EAAG4c,aAAa,YAAa,OAAO,EAExC,MAAMoI,EAAMxkB,EAAEkI,UAAYlI,EAAEykB,OAAS,IAAM,IACrCC,EAAgB,MAARF,EAAcxkB,EAAE2kB,OAAS3kB,EAAEykB,QAAUzkB,EAAE2kB,OAErD,IAAIC,EACAC,EACQ,MAARL,GACFI,EAAkC,IAAjBplB,EAAGqL,UACpBga,EAAerlB,EAAGqL,UAAYrL,EAAGiC,eAAiBjC,EAAGgK,eAErDob,EAAmC,IAAlBplB,EAAGoL,WACpBia,EAAerlB,EAAGoL,WAAapL,EAAGgC,cAAgBhC,EAAGmL,aAMvD,QAAKia,KAHeF,EAAQ,QAIvBG,KAHiBH,EAAQ,QAIzBE,IAAkBC,IACdN,aAAa/kB,EAAG4D,WAAuBpD,GAIlD,CAEA,SAAS8kB,SAAStlB,EAAasc,GAC7B,OAAItc,IAAOsc,GAEO,OAAPtc,GAAeA,IAAOU,SAAS+J,MAGjC6a,SAAStlB,EAAG4D,WAAuB0Y,EAE9C,CAEA,SAASiJ,aAAavlB,GACpB,IAAKA,GAAMA,EAAGgG,WAAaC,KAAKC,aAAc,OAAO,EAErD,MAAMhG,EAAQqC,OAAOC,iBAAiBxC,GACtC,OAAS,CAAC,OAAQ,UAAU+O,SAAS7O,EAAMgQ,YAA8B,WAAflQ,EAAGwlB,UAAyBxlB,EAAGgK,aAAehK,EAAGiC,cACvG,CAAC,OAAQ,UAAU8M,SAAS7O,EAAMulB,YAAgBzlB,EAAGmL,YAAcnL,EAAGgC,WAC5E,gDAzHM,SAAU0jB,WAAWC,EAAqBC,EAAyBhV,EAASiV,GAChF,GAAIF,EACFjlB,SAAS0J,gBAAiBxH,UAAUC,IAAI,yBACnC,CACL,IAAK+iB,EAAiB,OACtB,MAAME,ELkHJ,SAAU3b,SAAOL,GACrB,GAAKA,GAEE,GAAuB,iBAAZA,EAAsB,CACtC,GAAgB,aAAZA,EACF,OAAOpJ,SAAS0J,gBACX,GAAIN,EAAQO,QAAQ,KAAO,EAAG,CACnC,IAAIC,EAAQR,EAAQS,MAAM,KACtBvK,EAAKU,SAAS8J,cAAcF,EAAM,IACtC,IAAKtK,EACH,OAAO,KAGT8J,EAAU9J,EAAGsK,EAAM,GACpB,MACCR,EAAUpJ,SAAS8J,cAAcV,EAEpC,OAfCA,EAAUpJ,SAAS+J,KAgBrB,OAAOX,CACT,CKrIoBK,CAAOyb,GACjB1N,SAAY1X,KAqBtB,SAASulB,eAAgBvlB,EAA+BslB,EAASlV,EAASiV,GACxE,GAAe,YAAXrlB,EAAEuH,KAAoB,CACxB,GACE,CAAC,QAAS,WAAY,UAAUgH,SAAUvO,EAAEiB,OAAmB+jB,UAE9DhlB,EAAEiB,OAAuBukB,kBAC1B,OAEF,MAAM9gB,EAAK,CAACP,EAASO,GAAIP,EAASe,QAC5BP,EAAO,CAACR,EAASQ,KAAMR,EAASgB,UAEtC,GAAIT,EAAG6J,SAASvO,EAAE6jB,SACf7jB,EAAU2kB,QAAU,MAChB,KAAIhgB,EAAK4J,SAASvO,EAAE6jB,SAGzB,OAFC7jB,EAAU2kB,OAAS,CAGrB,CACF,EAEG3kB,EAAEiB,SAAWqkB,GACH,YAAXtlB,EAAEuH,MAAsBvH,EAAEiB,SAAWf,SAAS+J,MAInD,SAASwb,UAAUzlB,EAAeoQ,EAASiV,GACzC,MAAM9f,ELWF,SAAUmgB,aAAc1lB,GAC5B,GAAIA,EAAE0lB,aAAc,OAAO1lB,EAAE0lB,eAE7B,MAAMngB,EAAO,GACb,IAAI/F,EAAKQ,EAAEiB,OAEX,KAAOzB,GAAI,CAGT,GAFA+F,EAAKkB,KAAKjH,GAES,SAAfA,EAAGwlB,QAIL,OAHAzf,EAAKkB,KAAKvG,UACVqF,EAAKkB,KAAK1E,QAEHwD,EAGT/F,EAAKA,EAAG+K,aACT,CACD,OAAOhF,CACT,CK9BemgB,CAAa1lB,GAE1B,GAAe,YAAXA,EAAEuH,MAAsBhC,EAAK,KAAOrF,SAAS+J,KAAM,CAErD,MAAM0b,EAAW5jB,OAAO6jB,eAAgBC,WACxC,QAAIR,GAAUN,aAAaM,IAAWP,SAASa,EAAUN,MAC/Cd,aAAac,EAAQrlB,EAGhC,CAED,IAAK,IAAIkJ,EAAQ,EAAGA,EAAQ3D,EAAKzC,OAAQoG,IAAS,CAChD,MAAM1J,EAAK+F,EAAK2D,GAEhB,GAAI1J,IAAOU,SAAU,OAAO,EAC5B,GAAIV,IAAOU,SAAS0J,gBAAiB,OAAO,EAC5C,GAAIpK,IAAO4Q,EAAS,OAAO,EAE3B,GAAI2U,aAAavlB,GAAgB,OAAQ+kB,aAAa/kB,EAAeQ,EACtE,CAED,OAAO,CACT,CA1BIylB,CAAUzlB,EAAGoQ,EAASiV,KAASrlB,EAAEwR,gBACrC,CA3CM+T,CAAevlB,EAAGslB,EAASlV,EAASiV,EAAO,EAG7Cf,EAAoB,UAAUc,KAAqB1N,SLcjD,SAAUoO,wBACdtmB,EACAmI,EACA8I,EACA6G,GAEA9X,EAAGuE,iBAAiB4D,EAAO8I,IAAI/M,GAAmB4T,EACpD,CKnBIwO,CAAwB/jB,OAAQ,QAAS2V,SAAU,CAAEqO,SAAS,IAC9DhkB,OAAOgC,iBAAiB,UAAW2T,SACpC,CACH,aAEM,SAAUsO,WAAYZ,GAC1BllB,SAAS0J,gBAAiBxH,UAAUO,OAAO,qBAE3C,IAAI+U,EAAW4M,EAAoB,UAAUc,KACzC1N,IACF3V,OAAOiC,oBAAoB,QAAS0T,GACpC3V,OAAOiC,oBAAoB,UAAW0T,GAE1C,ICrBA3V,OAAOkkB,gBAAkB,CACvBC,QACKtiB,OAAA6D,OAAA7D,OAAA6D,OAAA,GAAAye,GACAC"}