{"version":3,"file":"blazor-component.js","sources":["../../../BlazorComponent.Web/node_modules/just-debounce-it/index.mjs","../../../BlazorComponent.Web/node_modules/just-throttle/index.mjs","../../../BlazorComponent.Web/src/directive/ripple.ts","../../../BlazorComponent.Web/src/events/EventType.ts","../../../BlazorComponent.Web/src/utils/helper.ts","../../../BlazorComponent.Web/src/events/extra.ts","../../../BlazorComponent.Web/src/events/index.ts","../../../BlazorComponent.Web/src/interop.ts","../../../BlazorComponent.Web/src/directive/index.ts","../../../BlazorComponent.Web/src/mixins/overlayable/index.ts","../../../BlazorComponent.Web/src/main.ts"],"sourcesContent":["var functionDebounce = debounce;\n\nfunction debounce(fn, wait, callFirst) {\n  var timeout = null;\n  var debouncedFn = null;\n\n  var clear = function() {\n    if (timeout) {\n      clearTimeout(timeout);\n\n      debouncedFn = null;\n      timeout = null;\n    }\n  };\n\n  var flush = function() {\n    var call = debouncedFn;\n    clear();\n\n    if (call) {\n      call();\n    }\n  };\n\n  var debounceWrapper = function() {\n    if (!wait) {\n      return fn.apply(this, arguments);\n    }\n\n    var context = this;\n    var args = arguments;\n    var callNow = callFirst && !timeout;\n    clear();\n\n    debouncedFn = function() {\n      fn.apply(context, args);\n    };\n\n    timeout = setTimeout(function() {\n      timeout = null;\n\n      if (!callNow) {\n        var call = debouncedFn;\n        debouncedFn = null;\n\n        return call();\n      }\n    }, wait);\n\n    if (callNow) {\n      return debouncedFn();\n    }\n  };\n\n  debounceWrapper.cancel = clear;\n  debounceWrapper.flush = flush;\n\n  return debounceWrapper;\n}\n\nexport {functionDebounce as default};\n","var functionThrottle = throttle;\n\nfunction throttle(fn, interval, options) {\n  var timeoutId = null;\n  var throttledFn = null;\n  var leading = (options && options.leading);\n  var trailing = (options && options.trailing);\n\n  if (leading == null) {\n    leading = true; // default\n  }\n\n  if (trailing == null) {\n    trailing = !leading; //default\n  }\n\n  if (leading == true) {\n    trailing = false; // forced because there should be invocation per call\n  }\n\n  var cancel = function() {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n      timeoutId = null;\n    }\n  };\n\n  var flush = function() {\n    var call = throttledFn;\n    cancel();\n\n    if (call) {\n      call();\n    }\n  };\n\n  var throttleWrapper = function() {\n    var callNow = leading && !timeoutId;\n    var context = this;\n    var args = arguments;\n\n    throttledFn = function() {\n      return fn.apply(context, args);\n    };\n\n    if (!timeoutId) {\n      timeoutId = setTimeout(function() {\n        timeoutId = null;\n\n        if (trailing) {\n          return throttledFn();\n        }\n      }, interval);\n    }\n\n    if (callNow) {\n      callNow = false;\n      return throttledFn();\n    }\n  };\n\n  throttleWrapper.cancel = cancel;\n  throttleWrapper.flush = flush;\n\n  return throttleWrapper;\n}\n\nexport {functionThrottle as default};\n","const calculate = (e, el) => {\r\n  let localX = 0;\r\n  let localY = 0;\r\n\r\n  const offset = el.getBoundingClientRect();\r\n  const target = e;\r\n\r\n  localX = target.clientX - offset.left;\r\n  localY = target.clientY - offset.top;\r\n\r\n  let radius = 0;\r\n  let scale = 0.3;\r\n\r\n  radius = Math.sqrt(el.clientWidth ** 2 + el.clientHeight ** 2) / 2;\r\n\r\n  const centerX = `${(el.clientWidth - radius * 2) / 2}px`;\r\n  const centerY = `${(el.clientHeight - radius * 2) / 2}px`;\r\n\r\n  const x = `${localX - radius}px`;\r\n  const y = `${localY - radius}px`;\r\n\r\n  return { radius, scale, x, y, centerX, centerY };\r\n};\r\n\r\nfunction transform(el, value) {\r\n  el.style.transform = value;\r\n  el.style.webkitTransform = value;\r\n}\r\n\r\nfunction opacity(el, value) {\r\n  el.style.opacity = value.toString();\r\n}\r\n\r\nconst ripples = {\r\n  /* eslint-disable max-statements */\r\n  show(e, el) {\r\n    const container = document.createElement(\"span\");\r\n    const animation = document.createElement(\"span\");\r\n\r\n    container.appendChild(animation);\r\n    container.className = \"m-ripple__container\";\r\n\r\n    const { radius, scale, x, y, centerX, centerY } = calculate(e, el);\r\n\r\n    const size = `${radius * 2}px`;\r\n    animation.className = \"m-ripple__animation\";\r\n    animation.style.width = size;\r\n    animation.style.height = size;\r\n\r\n    el.appendChild(container);\r\n\r\n    const computed = window.getComputedStyle(el);\r\n    if (computed && computed.position === \"static\") {\r\n      el.style.position = \"relative\";\r\n      el.dataset.previousPosition = \"static\";\r\n    }\r\n\r\n    animation.classList.add(\"m-ripple__animation--enter\");\r\n    animation.classList.add(\"m-ripple__animation--visible\");\r\n    transform(\r\n      animation,\r\n      `translate(${x}, ${y}) scale3d(${scale},${scale},${scale})`\r\n    );\r\n    opacity(animation, 0);\r\n    animation.dataset.activated = String(performance.now());\r\n\r\n    setTimeout(() => {\r\n      animation.classList.remove(\"m-ripple__animation--enter\");\r\n      animation.classList.add(\"m-ripple__animation--in\");\r\n      transform(animation, `translate(${centerX}, ${centerY}) scale3d(1,1,1)`);\r\n      opacity(animation, 0.25);\r\n    }, 0);\r\n  },\r\n\r\n  hide(el) {\r\n    const ripples = el.getElementsByClassName(\"m-ripple__animation\");\r\n\r\n    if (ripples.length === 0) return;\r\n    const animation = ripples[ripples.length - 1];\r\n\r\n    if (animation.dataset.isHiding) return;\r\n    else animation.dataset.isHiding = \"true\";\r\n\r\n    const diff = performance.now() - Number(animation.dataset.activated);\r\n    const delay = Math.max(250 - diff, 0);\r\n\r\n    setTimeout(() => {\r\n      animation.classList.remove(\"m-ripple__animation--in\");\r\n      animation.classList.add(\"m-ripple__animation--out\");\r\n      opacity(animation, 0);\r\n\r\n      setTimeout(() => {\r\n        const ripples = el.getElementsByClassName(\"m-ripple__animation\");\r\n        if (ripples.length === 1 && el.dataset.previousPosition) {\r\n          el.style.position = el.dataset.previousPosition;\r\n          delete el.dataset.previousPosition;\r\n        }\r\n\r\n        animation.parentNode && el && el.removeChild(animation.parentNode);\r\n      }, 300);\r\n    }, delay);\r\n  },\r\n};\r\n\r\nexport function rippleShow(e) {\r\n  ripples.show(e, e.currentTarget);\r\n}\r\n\r\nexport function rippleHide(e) {\r\n  ripples.hide(e.currentTarget);\r\n}\r\n","// see https://github.com/dotnet/aspnetcore/blob/main/src/Components/Web.JS/src/Rendering/Events/EventTypes.ts\r\n// updated at 2022/08/31\r\n\r\nexport const touchEvents = [\r\n  \"touchcancel\",\r\n  \"touchend\",\r\n  \"touchmove\",\r\n  \"touchenter\",\r\n  \"touchleave\",\r\n  \"touchstart\",\r\n];\r\n\r\nexport function parseMouseEvent(event: MouseEvent): Blazor.MouseEventArgs {\r\n  return {\r\n    detail: event.detail,\r\n    screenX: event.screenX,\r\n    screenY: event.screenY,\r\n    clientX: event.clientX,\r\n    clientY: event.clientY,\r\n    offsetX: event.offsetX,\r\n    offsetY: event.offsetY,\r\n    pageX: event.pageX,\r\n    pageY: event.pageY,\r\n    button: event.button,\r\n    buttons: event.buttons,\r\n    ctrlKey: event.ctrlKey,\r\n    shiftKey: event.shiftKey,\r\n    altKey: event.altKey,\r\n    metaKey: event.metaKey,\r\n    type: event.type,\r\n  } as Blazor.MouseEventArgs;\r\n}\r\n\r\nexport function parseTouchEvent(event: TouchEvent): Blazor.TouchEventArgs {\r\n  return {\r\n    detail: event.detail,\r\n    touches: parseTouch(event.touches),\r\n    targetTouches: parseTouch(event.targetTouches),\r\n    changedTouches: parseTouch(event.changedTouches),\r\n    ctrlKey: event.ctrlKey,\r\n    shiftKey: event.shiftKey,\r\n    altKey: event.altKey,\r\n    metaKey: event.metaKey,\r\n    type: event.type,\r\n  };\r\n}\r\n\r\nfunction parseTouch(touchList: TouchList): Blazor.TouchPoint[] {\r\n  const touches: Blazor.TouchPoint[] = [];\r\n\r\n  for (let i = 0; i < touchList.length; i++) {\r\n    const touch = touchList[i];\r\n    touches.push({\r\n      identifier: touch.identifier,\r\n      clientX: touch.clientX,\r\n      clientY: touch.clientY,\r\n      screenX: touch.screenX,\r\n      screenY: touch.screenY,\r\n      pageX: touch.pageX,\r\n      pageY: touch.pageY,\r\n    });\r\n  }\r\n  return touches;\r\n}\r\n\r\nexport function parseChangeEvent(event: Event): Blazor.ChangeEventArgs {\r\n  const element = event.target as Element;\r\n  if (isTimeBasedInput(element)) {\r\n    const normalizedValue = normalizeTimeBasedValue(element);\r\n    return { value: normalizedValue };\r\n  } else if (isMultipleSelectInput(element)) {\r\n    const selectElement = element as HTMLSelectElement;\r\n    const selectedValues = Array.from(selectElement.options)\r\n      .filter((option) => option.selected)\r\n      .map((option) => option.value);\r\n    return { value: selectedValues };\r\n  } else {\r\n    const targetIsCheckbox = isCheckbox(element);\r\n    const newValue = targetIsCheckbox ? !!element[\"checked\"] : element[\"value\"];\r\n    return { value: newValue };\r\n  }\r\n}\r\n\r\nexport function parseDragEvent(event: DragEvent): Blazor.DragEventArgs {\r\n  return {\r\n    ...parseMouseEvent(event),\r\n    dataTransfer: event.dataTransfer ? {\r\n      dropEffect: event.dataTransfer.dropEffect,\r\n      effectAllowed: event.dataTransfer.effectAllowed,\r\n      files: Array.from(event.dataTransfer.files).map(f => f.name),\r\n      items: Array.from(event.dataTransfer.items).map(i => ({ kind: i.kind, type: i.type })),\r\n      types: event.dataTransfer.types\r\n    } : null,\r\n  };\r\n}\r\n\r\nfunction isTimeBasedInput(element: Element): element is HTMLInputElement {\r\n  return timeBasedInputs.indexOf(element.getAttribute(\"type\")!) !== -1;\r\n}\r\n\r\nconst timeBasedInputs = [\"date\", \"datetime-local\", \"month\", \"time\", \"week\"];\r\n\r\nfunction normalizeTimeBasedValue(element: HTMLInputElement): string {\r\n  const value = element.value;\r\n  const type = element.type;\r\n  switch (type) {\r\n    case \"date\":\r\n    case \"month\":\r\n      return value;\r\n    case \"datetime-local\":\r\n      return value.length === 16 ? value + \":00\" : value; // Convert yyyy-MM-ddTHH:mm to yyyy-MM-ddTHH:mm:00\r\n    case \"time\":\r\n      return value.length === 5 ? value + \":00\" : value; // Convert hh:mm to hh:mm:00\r\n    case \"week\":\r\n      // For now we are not going to normalize input type week as it is not trivial\r\n      return value;\r\n  }\r\n\r\n  throw new Error(`Invalid element type '${type}'.`);\r\n}\r\n\r\nfunction isMultipleSelectInput(element: Element): element is HTMLSelectElement {\r\n  return (\r\n    element instanceof HTMLSelectElement && element.type === \"select-multiple\"\r\n  );\r\n}\r\n\r\nfunction isCheckbox(element: Element | null): boolean {\r\n  return (\r\n    !!element &&\r\n    element.tagName === \"INPUT\" &&\r\n    element.getAttribute(\"type\") === \"checkbox\"\r\n  );\r\n}\r\n","export function addOnceEventListener (\r\n  el: EventTarget,\r\n  eventName: string,\r\n  cb: (event: Event) => void,\r\n  options: boolean | AddEventListenerOptions = false\r\n): void {\r\n  const once = (event: Event) => {\r\n    cb(event)\r\n    el.removeEventListener(eventName, once, options)\r\n  }\r\n\r\n  el.addEventListener(eventName, once, options)\r\n}\r\n\r\nlet passiveSupported = false\r\ntry {\r\n  if (typeof window !== 'undefined') {\r\n    const testListenerOpts = Object.defineProperty({}, 'passive', {\r\n      get: () => {\r\n        passiveSupported = true\r\n      },\r\n    })\r\n\r\n    window.addEventListener('testListener' as any, testListenerOpts as any, testListenerOpts)\r\n    window.removeEventListener('testListener' as any, testListenerOpts as any, testListenerOpts)\r\n  }\r\n} catch (e) { console.warn(e) } /* eslint-disable-line no-console */\r\nexport { passiveSupported }\r\n\r\nexport function addPassiveEventListener (\r\n  el: EventTarget,\r\n  event: string,\r\n  cb: ((e: any) => void),\r\n  options: {}\r\n): void {\r\n  el.addEventListener(event, cb, passiveSupported ? options : false)\r\n}\r\n\r\nexport function getZIndex (el?: Element | null): number {\r\n  if (!el || el.nodeType !== Node.ELEMENT_NODE) return 0\r\n\r\n  const index = +window.getComputedStyle(el).getPropertyValue('z-index')\r\n\r\n  if (!index) return getZIndex(el.parentNode as Element)\r\n  return index\r\n}\r\n\r\n// KeyboardEvent.keyCode aliases\r\nexport const keyCodes = Object.freeze({\r\n  enter: 13,\r\n  tab: 9,\r\n  delete: 46,\r\n  esc: 27,\r\n  space: 32,\r\n  up: 38,\r\n  down: 40,\r\n  left: 37,\r\n  right: 39,\r\n  end: 35,\r\n  home: 36,\r\n  del: 46,\r\n  backspace: 8,\r\n  insert: 45,\r\n  pageup: 33,\r\n  pagedown: 34,\r\n  shift: 16,\r\n})\r\n\r\n/**  Polyfill for Event.prototype.composedPath */\r\nexport function composedPath (e: Event): EventTarget[] {\r\n  if (e.composedPath) return e.composedPath()\r\n\r\n  const path = []\r\n  let el = e.target as Element\r\n\r\n  while (el) {\r\n    path.push(el)\r\n\r\n    if (el.tagName === 'HTML') {\r\n      path.push(document)\r\n      path.push(window)\r\n\r\n      return path\r\n    }\r\n\r\n    el = el.parentElement!\r\n  }\r\n  return path\r\n}\r\n\r\nexport function getBlazorId(el) {\r\n  if (!el) {\r\n    return null;\r\n  }\r\n  let _bl_ = el.getAttributeNames().find(a => a.startsWith('_bl_'))\r\n  if (_bl_) {\r\n    _bl_ = _bl_.substring(4);\r\n  }\r\n\r\n  return _bl_;\r\n}\r\n\r\nexport function getElementSelector(el) {\r\n  if (!(el instanceof Element))\r\n    return;\r\n  var path = [];\r\n  while (el.nodeType === Node.ELEMENT_NODE) {\r\n    var selector = el.nodeName.toLowerCase();\r\n    if (el.id) {\r\n      selector += '#' + el.id;\r\n      path.unshift(selector);\r\n      break;\r\n    } else {\r\n      var sib = el, nth = 1;\r\n      while (sib = sib.previousElementSibling) {\r\n        if (sib.nodeName.toLowerCase() == selector)\r\n          nth++;\r\n      }\r\n      if (nth != 1)\r\n        selector += \":nth-of-type(\" + nth + \")\";\r\n    }\r\n    path.unshift(selector);\r\n    el = el.parentNode;\r\n  }\r\n  return path.join(\" > \");\r\n}\r\n\r\nexport function getDom(elOrString: Element | string | undefined) {\r\n  let element: HTMLElement;\r\n\r\n  try {\r\n    if (!elOrString) {\r\n      element = document.body;\r\n    } else if (typeof elOrString === \"string\") {\r\n      if (elOrString === \"document\") {\r\n        element = document.documentElement;\r\n      } else if (elOrString.indexOf(\"__.__\") > 0) {\r\n        // for example: el__.__parentElement\r\n        let array = elOrString.split(\"__.__\");\r\n        let i = 0;\r\n        let el = document.querySelector(array[i++]);\r\n\r\n        if (el) {\r\n          while (array[i]) {\r\n            el = el[array[i]];\r\n            i++;\r\n          }\r\n        }\r\n\r\n        if (el instanceof HTMLElement) {\r\n          element = el;\r\n        }\r\n      } else {\r\n        element = document.querySelector(elOrString);\r\n      }\r\n    } else {\r\n      element = elOrString as HTMLElement;\r\n    }\r\n\r\n  } catch (error) {\r\n    console.error(error)\r\n  }\r\n\r\n  return element;\r\n}\r\n\r\nexport const canUseDom = !!(\r\n  typeof window !== 'undefined' &&\r\n  typeof document !== 'undefined' &&\r\n  window.document &&\r\n  window.document.createElement\r\n)\r\n\r\nexport function convertToUnit (str: number, unit?: string): string\r\nexport function convertToUnit (str: string | number | null | undefined, unit?: string): string | undefined\r\nexport function convertToUnit (str: string | number | null | undefined, unit = 'px'): string | undefined {\r\n  if (str == null || str === '') {\r\n    return undefined\r\n  } else if (isNaN(+str!)) {\r\n    return String(str)\r\n  } else if (!isFinite(+str!)) {\r\n    return undefined\r\n  } else {\r\n    return `${Number(str)}${unit}`\r\n  }\r\n}","import { getElementSelector } from \"../utils/helper\";\r\nimport { parseDragEvent, parseMouseEvent, parseTouchEvent } from \"./EventType\";\r\n\r\nexport function registerExtraMouseEvent(eventType: string, eventName: string) {\r\n  if (Blazor) {\r\n    Blazor.registerCustomEventType(eventType, {\r\n      browserEventName: eventName,\r\n      createEventArgs: e => createSharedEventArgs(\"mouse\", e)\r\n    })\r\n  }\r\n}\r\n\r\nexport function registerExtraTouchEvent(eventType: string, eventName: string) {\r\n  if (Blazor) {\r\n    Blazor.registerCustomEventType(eventType, {\r\n      browserEventName: eventName,\r\n      createEventArgs: e => createSharedEventArgs(\"touch\", e)\r\n    })\r\n  }\r\n}\r\n\r\nexport function registerExtraDropEvent(eventType: string, eventName: string) {\r\n  if (Blazor) {\r\n    Blazor.registerCustomEventType(eventType, {\r\n      browserEventName: eventName,\r\n      createEventArgs: (e: DragEvent) => {\r\n        const eventArgs = parseDragEvent(e);\r\n        const value = e.dataTransfer.getData('data-value');\r\n        const offsetX = e.dataTransfer.getData('offsetX');\r\n        const offsetY = e.dataTransfer.getData('offsetY');\r\n\r\n        eventArgs.dataTransfer['data'] = {\r\n          value,\r\n          offsetX: Number(offsetX),\r\n          offsetY: Number(offsetY)\r\n        }\r\n\r\n        return eventArgs;\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\nexport function createSharedEventArgs(type: \"mouse\" | \"touch\", e: Event,) {\r\n  let args = { target: {} }\r\n  if (type === 'mouse') {\r\n    args = {\r\n      ...args,\r\n      ...parseMouseEvent(e as MouseEvent)\r\n    }\r\n  } else if (type === 'touch') {\r\n    args = {\r\n      ...args,\r\n      ...parseTouchEvent(e as TouchEvent)\r\n    }\r\n  }\r\n\r\n  if (e.target) {\r\n    const target = e.target as HTMLElement;\r\n    const elementReferenceId = target.getAttributeNames().find(a => a.startsWith('_bl_'));\r\n    if (elementReferenceId) {\r\n      args.target['elementReferenceId'] = elementReferenceId\r\n      args.target['selector'] = `[${elementReferenceId}]`\r\n    } else {\r\n      args.target['selector'] = getElementSelector(target)\r\n    }\r\n\r\n    args.target['class'] = target.getAttribute('class')\r\n  }\r\n\r\n  return args;\r\n}","import { registerExtraDropEvent, registerExtraMouseEvent, registerExtraTouchEvent } from \"./extra\";\r\n\r\nexport function registerExtraEvents() {\r\n    registerExtraMouseEvent(\"exmousedown\", \"mousedown\");\r\n    registerExtraMouseEvent(\"exmouseup\", \"mouseup\");\r\n    registerExtraMouseEvent(\"exclick\", \"click\");\r\n    registerExtraMouseEvent(\"exmouseleave\", \"mouseleave\");\r\n    registerExtraMouseEvent(\"exmouseenter\", \"mouseenter\");\r\n    registerExtraMouseEvent(\"exmousemove\", \"mousemove\");\r\n    registerExtraTouchEvent(\"extouchstart\", \"touchstart\");\r\n    registerEvent(\"transitionend\", \"transitionend\")\r\n    registerExtraDropEvent(\"exdrop\", \"drop\");\r\n}\r\n\r\nfunction registerEvent(eventType: string, eventName: string) {\r\n    if (Blazor) {\r\n        Blazor.registerCustomEventType(eventType, {\r\n            browserEventName: eventName,\r\n        })\r\n    }\r\n}","import debounceIt from \"just-debounce-it\";\r\nimport throttle from \"just-throttle\";\r\n\r\nimport registerDirective from \"./directive/index\";\r\nimport { parseDragEvent, parseTouchEvent, touchEvents } from \"./events/EventType\";\r\nimport { registerExtraEvents } from \"./events/index\";\r\nimport { canUseDom, getBlazorId, getDom, getElementSelector } from \"./utils/helper\";\r\n\r\nexport function getZIndex(el?: Element | null): number {\r\n  if (!el || el.nodeType !== Node.ELEMENT_NODE) return 0\r\n\r\n  const index = +window.getComputedStyle(el).getPropertyValue('z-index')\r\n\r\n  if (!index) return getZIndex(el.parentNode as Element)\r\n  return index\r\n}\r\n\r\nexport function getDomInfo(element, selector = \"body\") {\r\n  var result = {};\r\n\r\n  var dom = getDom(element);\r\n\r\n  if (dom) {\r\n    if (dom.style && dom.style[\"display\"] === \"none\") {\r\n      // clone and set display not none because\r\n      // element with display:none can not get the dom info\r\n      var cloned = dom.cloneNode(true) as HTMLElement;\r\n      cloned.style[\"display\"] = \"inline-block\";\r\n      cloned.style[\"z-index\"] = -1000;\r\n      dom.parentElement.appendChild(cloned);\r\n\r\n      result = getDomInfoObj(cloned);\r\n\r\n      dom.parentElement.removeChild(cloned);\r\n    } else {\r\n      result = getDomInfoObj(dom);\r\n    }\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\nfunction getDomInfoObj(dom) {\r\n  var result = {};\r\n  result[\"offsetTop\"] = dom.offsetTop || 0;\r\n  result[\"offsetLeft\"] = dom.offsetLeft || 0;\r\n  result[\"scrollHeight\"] = dom.scrollHeight || 0;\r\n  result[\"scrollWidth\"] = dom.scrollWidth || 0;\r\n  result[\"scrollLeft\"] = dom.scrollLeft || 0;\r\n  result[\"scrollTop\"] = dom.scrollTop || 0;\r\n  result[\"clientTop\"] = dom.clientTop || 0;\r\n  result[\"clientLeft\"] = dom.clientLeft || 0;\r\n  result[\"clientHeight\"] = dom.clientHeight || 0;\r\n  result[\"clientWidth\"] = dom.clientWidth || 0;\r\n  var position = getElementPos(dom);\r\n  result[\"offsetWidth\"] = Math.round(position.offsetWidth) || 0;\r\n  result[\"offsetHeight\"] = Math.round(position.offsetHeight) || 0;\r\n  result[\"relativeTop\"] = Math.round(position.relativeTop) || 0;\r\n  result[\"relativeBottom\"] = Math.round(position.relativeBottom) || 0;\r\n  result[\"relativeLeft\"] = Math.round(position.relativeLeft) || 0;\r\n  result[\"relativeRight\"] = Math.round(position.relativeRight) || 0;\r\n  result[\"absoluteLeft\"] = Math.round(position.absoluteLeft) || 0;\r\n  result[\"absoluteTop\"] = Math.round(position.absoluteTop) || 0;\r\n  return result;\r\n}\r\n\r\nfunction getElementPos(element) {\r\n  var res: any = new Object();\r\n  res.x = 0;\r\n  res.y = 0;\r\n  if (element !== null) {\r\n    if (element.getBoundingClientRect) {\r\n      var viewportElement = document.documentElement;\r\n      var box = element.getBoundingClientRect();\r\n      var scrollLeft = viewportElement.scrollLeft;\r\n      var scrollTop = viewportElement.scrollTop;\r\n\r\n      res.offsetWidth = box.width;\r\n      res.offsetHeight = box.height;\r\n      res.relativeTop = box.top;\r\n      res.relativeBottom = box.bottom;\r\n      res.relativeLeft = box.left;\r\n      res.relativeRight = box.right;\r\n      res.absoluteLeft = box.left + scrollLeft;\r\n      res.absoluteTop = box.top + scrollTop;\r\n    }\r\n  }\r\n  return res;\r\n}\r\n\r\nexport function triggerEvent(element, eventType, eventName, stopPropagation) {\r\n  var dom = getDom(element);\r\n  var evt = document.createEvent(eventType);\r\n  evt.initEvent(eventName);\r\n\r\n  if (stopPropagation) {\r\n    evt.stopPropagation();\r\n  }\r\n\r\n  return dom.dispatchEvent(evt);\r\n}\r\n\r\nexport function setProperty(element, name, value) {\r\n  var dom = getDom(element);\r\n  dom[name] = value;\r\n}\r\n\r\nexport function getBoundingClientRect(element, attach = \"body\") {\r\n  let dom = getDom(element);\r\n\r\n  var result = {};\r\n\r\n  if (dom && dom.getBoundingClientRect) {\r\n    if (dom.style && dom.style[\"display\"] === \"none\") {\r\n      var cloned = dom.cloneNode(true) as HTMLElement;\r\n      cloned.style[\"display\"] = \"inline-block\";\r\n      cloned.style[\"z-index\"] = -1000;\r\n      document.querySelector(attach)?.appendChild(cloned);\r\n\r\n      result = cloned.getBoundingClientRect();\r\n\r\n      document.querySelector(attach)?.removeChild(cloned);\r\n    } else {\r\n      result = dom.getBoundingClientRect();\r\n    }\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\nvar htmlElementEventListenerConfigs: { [prop: string]: HtmlElementEventListenerConfig[] } = {}\r\n\r\ntype HtmlElementEventListenerConfig = {\r\n  listener?: (args: any) => void;\r\n  options?: any;\r\n  handle?: DotNet.DotNetObject;\r\n}\r\n\r\nexport function addHtmlElementEventListener<K extends keyof HTMLElementTagNameMap>(\r\n  selector: \"window\" | \"document\" | K,\r\n  type: string,\r\n  invoker: DotNet.DotNetObject,\r\n  options?: boolean | AddEventListenerOptions,\r\n  extras?: Partial<Pick<Event, \"stopPropagation\" | \"preventDefault\">> & { relatedTarget?: string, throttle?: number, debounce?: number, key?: string }) {\r\n  let htmlElement: HTMLElement | Window\r\n\r\n  if (selector == \"window\") {\r\n    htmlElement = window;\r\n  } else if (selector == \"document\") {\r\n    htmlElement = document.documentElement;\r\n  } else {\r\n    htmlElement = document.querySelector(selector);\r\n  }\r\n\r\n  var key = extras?.key || `${selector}:${type}`;\r\n\r\n  //save for remove\r\n  const config: HtmlElementEventListenerConfig = {};\r\n\r\n  var listener = (e: any): void => {\r\n    if (extras?.stopPropagation) {\r\n      e.stopPropagation();\r\n    }\r\n\r\n    if ((typeof e.cancelable !== \"boolean\" || e.cancelable) && extras?.preventDefault) {\r\n      e.preventDefault();\r\n    }\r\n\r\n    // mouseleave relatedTarget\r\n    if (extras?.relatedTarget && document.querySelector(extras.relatedTarget)?.contains(e.relatedTarget)) {\r\n      return;\r\n    }\r\n\r\n    let obj: any = {}\r\n\r\n    if (touchEvents.includes(e.type)) {\r\n      obj = parseTouchEvent(e)\r\n    } else {\r\n      for (var k in e) {\r\n        if (typeof e[k] == 'string' || typeof e[k] == 'number') {\r\n          obj[k] = e[k];\r\n        }\r\n      }\r\n    }\r\n\r\n    if (e.target && e.target !== window && e.target !== document) {\r\n      obj.target = {}\r\n      const target = e.target as HTMLElement;\r\n      const elementReferenceId = target.getAttributeNames().find(a => a.startsWith('_bl_'));\r\n      if (elementReferenceId) {\r\n        obj.target['elementReferenceId'] = elementReferenceId\r\n        obj.target['selector'] = `[${elementReferenceId}]`\r\n      } else {\r\n        obj.target['selector'] = getElementSelector(target)\r\n      }\r\n\r\n      obj.target['class'] = target.getAttribute('class')\r\n    }\r\n\r\n    invoker.invokeMethodAsync('Invoke', obj);\r\n  };\r\n\r\n  if (extras?.debounce && extras.debounce > 0) {\r\n    config.listener = debounceIt(listener, extras.debounce)\r\n  } else if (extras?.throttle && extras.throttle > 0) {\r\n    config.listener = throttle(listener, extras.throttle, { trailing: true })\r\n  } else {\r\n    config.listener = listener;\r\n  }\r\n\r\n  config.options = options;\r\n  config.handle = invoker\r\n\r\n  if (htmlElementEventListenerConfigs[key]) {\r\n    htmlElementEventListenerConfigs[key].push(config);\r\n  } else {\r\n    htmlElementEventListenerConfigs[key] = [config]\r\n  }\r\n\r\n  if (htmlElement) {\r\n    htmlElement.addEventListener(type, config.listener, config.options);\r\n  }\r\n}\r\n\r\nexport function removeHtmlElementEventListener(selector, type, k?: string) {\r\n  let htmlElement: any\r\n\r\n  if (selector == \"window\") {\r\n    htmlElement = window;\r\n  } else if (selector == \"document\") {\r\n    htmlElement = document.documentElement;\r\n  } else {\r\n    htmlElement = document.querySelector(selector);\r\n  }\r\n\r\n  var k = k || `${selector}:${type}`;\r\n\r\n  var configs = htmlElementEventListenerConfigs[k];\r\n\r\n  if (configs) {\r\n    configs.forEach(item => {\r\n      item.handle.dispose();\r\n      htmlElement?.removeEventListener(type, item.listener, item.options);\r\n    });\r\n\r\n    htmlElementEventListenerConfigs[k] = []\r\n  }\r\n}\r\n\r\nexport function addMouseleaveEventListener(selector) {\r\n  var htmlElement = document.querySelector(selector);\r\n  if (htmlElement) {\r\n    htmlElement.addEventListener()\r\n  }\r\n}\r\n\r\nexport function contains(e1, e2) {\r\n  const dom1 = getDom(e1);\r\n  if (dom1 && dom1.contains) {\r\n    return dom1.contains(getDom(e2));\r\n  }\r\n  return false;\r\n}\r\n\r\nexport function equalsOrContains(e1: any, e2: any) {\r\n  const dom1 = getDom(e1);\r\n  const dom2 = getDom(e2);\r\n  return !!dom1 && dom1.contains && !!dom2 && (dom1 == dom2 || dom1.contains(dom2));\r\n}\r\n\r\nfunction fallbackCopyTextToClipboard(text) {\r\n  var textArea = document.createElement(\"textarea\");\r\n  textArea.value = text;\r\n\r\n  // Avoid scrolling to bottom\r\n  textArea.style.top = \"0\";\r\n  textArea.style.left = \"0\";\r\n  textArea.style.position = \"fixed\";\r\n\r\n  document.body.appendChild(textArea);\r\n  textArea.focus();\r\n  textArea.select();\r\n\r\n  try {\r\n    var successful = document.execCommand('copy');\r\n    var msg = successful ? 'successful' : 'unsuccessful';\r\n    console.log('Fallback: Copying text command was ' + msg);\r\n  } catch (err) {\r\n    console.error('Fallback: Oops, unable to copy', err);\r\n  }\r\n\r\n  document.body.removeChild(textArea);\r\n}\r\n\r\nexport function copy(text) {\r\n  if (!navigator.clipboard) {\r\n    fallbackCopyTextToClipboard(text);\r\n    return;\r\n  }\r\n  navigator.clipboard.writeText(text).then(function () {\r\n    console.log('Async: Copying to clipboard was successful!');\r\n  }, function (err) {\r\n    console.error('Async: Could not copy text: ', err);\r\n  });\r\n}\r\n\r\nexport function focus(selector, noScroll: boolean = false) {\r\n  let dom = getDom(selector);\r\n  if (!(dom instanceof HTMLElement))\r\n    throw new Error(\"Unable to focus an invalid element.\");\r\n  dom.focus({\r\n    preventScroll: noScroll\r\n  })\r\n}\r\n\r\nexport function select(selector) {\r\n  let dom = getDom(selector);\r\n  if (!(dom instanceof HTMLInputElement || dom instanceof HTMLTextAreaElement))\r\n    throw new Error(\"Unable to select an invalid element\")\r\n  dom.select()\r\n}\r\n\r\nexport function hasFocus(selector) {\r\n  let dom = getDom(selector);\r\n  return (document.activeElement === dom);\r\n}\r\n\r\nexport function blur(selector) {\r\n  let dom = getDom(selector);\r\n  dom.blur();\r\n}\r\n\r\nexport function log(text) {\r\n  console.log(text);\r\n}\r\n\r\nexport function scrollIntoView(target, arg?: boolean | ScrollIntoViewOptions) {\r\n  let dom = getDom(target);\r\n  if (dom instanceof HTMLElement) {\r\n    if (arg === null || arg == undefined) {\r\n      dom.scrollIntoView();\r\n    } else if (typeof arg === 'boolean') {\r\n      dom.scrollIntoView(arg);\r\n    } else {\r\n      dom.scrollIntoView({\r\n        block: arg.block == null ? undefined : arg.block,\r\n        inline: arg.inline == null ? undefined : arg.inline,\r\n        behavior: arg.behavior\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\nexport function scrollIntoParentView(\r\n  target,\r\n  inline = false,\r\n  start = false,\r\n  level = 1,\r\n  behavior: ScrollBehavior = \"smooth\",\r\n) {\r\n  const dom = getDom(target);\r\n  if (dom instanceof HTMLElement) {\r\n    let parent: HTMLElement = dom;\r\n    while (level > 0) {\r\n      parent = parent.parentElement;\r\n      level--;\r\n      if (!parent) {\r\n        return;\r\n      }\r\n    }\r\n\r\n    const options: ScrollToOptions = {\r\n      behavior,\r\n    };\r\n\r\n    if (inline) {\r\n      if (start) {\r\n        options.left = dom.offsetLeft\r\n      } else {\r\n        const to = dom.offsetLeft - parent.offsetLeft;\r\n        if (to - parent.scrollLeft < 0) {\r\n        options.left = to;\r\n      } else if (\r\n        to + dom.offsetWidth - parent.scrollLeft >\r\n        parent.offsetWidth\r\n        ) {\r\n          options.left = to + dom.offsetWidth - parent.offsetWidth;\r\n        }\r\n      }\r\n    } else {\r\n      if (start) {\r\n        options.top = dom.offsetTop;\r\n      } else {\r\n        const to = dom.offsetTop - parent.offsetTop;\r\n        if (to - parent.scrollTop < 0) {\r\n          options.top = to;\r\n        } else if (\r\n          to + dom.offsetHeight - parent.scrollTop >\r\n          parent.offsetHeight\r\n          ) {\r\n            options.top = to + dom.offsetHeight - parent.offsetHeight;\r\n          }\r\n      }\r\n    }\r\n\r\n    if (options.left || options.top) {\r\n      parent.scrollTo(options);\r\n    }\r\n  }\r\n}\r\n\r\nexport function scrollTo(target, options: ScrollToOptions) {\r\n  let dom = getDom(target);\r\n  if (dom instanceof HTMLElement) {\r\n    const o = {\r\n      left: options.left === null ? undefined : options.left,\r\n      top: options.top === null ? undefined : options.top,\r\n      behavior: options.behavior\r\n    }\r\n    dom.scrollTo(o)\r\n  }\r\n}\r\n\r\nexport function scrollToElement(target, offset: number, behavior?: ScrollBehavior) {\r\n  const dom = getDom(target)\r\n  if (!dom) return;\r\n  const domPosition = dom.getBoundingClientRect().top;\r\n  const offsetPosition = domPosition + window.pageYOffset - offset;\r\n  window.scrollTo({\r\n    top: offsetPosition,\r\n    behavior: behavior\r\n  })\r\n}\r\n\r\nexport function scrollToActiveElement(\r\n  container,\r\n  element = \".active\",\r\n  position: \"center\" | number = \"center\"\r\n) {\r\n  let containerEl: HTMLElement = getDom(container);\r\n\r\n  let activeEl: HTMLElement\r\n  if (typeof element === 'string') {\r\n    activeEl =  container.querySelector(element)\r\n  }\r\n\r\n  if (!containerEl || !activeEl) {\r\n    return;\r\n  }\r\n\r\n  if (position === 'center') {\r\n    containerEl.scrollTop = activeEl.offsetTop - containerEl.offsetHeight / 2 + activeEl.offsetHeight / 2;\r\n  }\r\n  else {\r\n    containerEl.scrollTop = activeEl.offsetTop - position\r\n  }\r\n}\r\n\r\nexport function addClsToFirstChild(element, className) {\r\n  var dom = getDom(element);\r\n  if (dom.firstElementChild) {\r\n    dom.firstElementChild.classList.add(className);\r\n  }\r\n}\r\n\r\nexport function removeClsFromFirstChild(element, className) {\r\n  var dom = getDom(element);\r\n  if (dom.firstElementChild) {\r\n    dom.firstElementChild.classList.remove(className);\r\n  }\r\n}\r\n\r\nexport function getAbsoluteTop(e) {\r\n  var offset = e.offsetTop;\r\n  if (e.offsetParent != null) {\r\n    offset += getAbsoluteTop(e.offsetParent);\r\n  }\r\n  return offset;\r\n}\r\n\r\nexport function getAbsoluteLeft(e) {\r\n  var offset = e.offsetLeft;\r\n  if (e.offsetParent != null) {\r\n    offset += getAbsoluteLeft(e.offsetParent);\r\n  }\r\n  return offset;\r\n}\r\n\r\nexport function addElementToBody(element) {\r\n  document.body.appendChild(element);\r\n}\r\n\r\nexport function delElementFromBody(element) {\r\n  document.body.removeChild(element);\r\n}\r\n\r\nexport function addElementTo(addElement, elementSelector) {\r\n  let parent = getDom(elementSelector);\r\n  if (parent && addElement) {\r\n    parent.appendChild(addElement);\r\n  }\r\n}\r\n\r\nexport function delElementFrom(delElement, elementSelector) {\r\n  let parent = getDom(elementSelector);\r\n  if (parent && delElement) {\r\n    parent.removeChild(delElement);\r\n  }\r\n}\r\n\r\nexport function getActiveElement() {\r\n  let element = document.activeElement;\r\n  let id = element.getAttribute(\"id\") || \"\";\r\n  return id;\r\n}\r\n\r\nexport function focusDialog(selector: string, count: number = 0) {\r\n  let ele = <HTMLElement>document.querySelector(selector);\r\n  if (ele && !ele.hasAttribute(\"disabled\")) {\r\n    setTimeout(() => {\r\n      ele.focus();\r\n      let curId = \"#\" + getActiveElement();\r\n      if (curId !== selector) {\r\n        if (count < 10) {\r\n          focusDialog(selector, count + 1);\r\n        }\r\n      }\r\n    }, 10);\r\n  }\r\n}\r\n\r\nexport function getWindow() {\r\n  return {\r\n    innerWidth: window.innerWidth,\r\n    innerHeight: window.innerHeight,\r\n    pageXOffset: window.pageXOffset,\r\n    pageYOffset: window.pageYOffset,\r\n    isTop: window.scrollY == 0,\r\n    isBottom: (window.scrollY + window.innerHeight) == document.body.clientHeight\r\n  };\r\n}\r\n\r\nexport function getWindowAndDocumentProps(windowProps: string[] = [], documentProps: string[] = []) {\r\n  const obj = {}\r\n\r\n  if (windowProps) {\r\n    windowProps.forEach(prop => obj[prop] = window[prop]);\r\n  }\r\n\r\n  if (documentProps) {\r\n    documentProps.forEach(prop => obj[prop] = document.documentElement[prop]);\r\n  }\r\n\r\n  return obj\r\n}\r\n\r\nfunction debounce(func, wait, immediate) {\r\n  var timeout;\r\n  return () => {\r\n    const context = this, args = arguments;\r\n    const later = () => {\r\n      timeout = null;\r\n      if (!immediate) func.apply(this, args);\r\n    };\r\n    const callNow = immediate && !timeout;\r\n    clearTimeout(timeout);\r\n    timeout = setTimeout(later, wait);\r\n    if (callNow) func.apply(context, args);\r\n  };\r\n};\r\n\r\nexport function css(element: any, name: string | object, value: string | null = null) {\r\n  var dom = getDom(element);\r\n  if (typeof name === 'string') {\r\n    dom.style[name] = value;\r\n  } else {\r\n    for (let key in name) {\r\n      if (name.hasOwnProperty(key)) {\r\n        dom.style[key] = name[key];\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport function addCls(selector: Element | string, clsName: string | Array<string>) {\r\n  let element = getDom(selector);\r\n\r\n  if (typeof clsName === \"string\") {\r\n    element.classList.add(clsName);\r\n  } else {\r\n    element.classList.add(...clsName);\r\n  }\r\n}\r\n\r\nexport function removeCls(selector: Element | string, clsName: string | Array<string>) {\r\n  let element = getDom(selector);\r\n\r\n  if (typeof clsName === \"string\") {\r\n    element.classList.remove(clsName);\r\n  } else {\r\n    element.classList.remove(...clsName);\r\n  }\r\n}\r\n\r\nexport function elementScrollIntoView(selector: Element | string) {\r\n  let element = getDom(selector);\r\n\r\n  if (!element)\r\n    return;\r\n\r\n  element.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'start' });\r\n}\r\n\r\nconst hasScrollbar = () => {\r\n  let overflow = document.body.style.overflow;\r\n  if (overflow && overflow === \"hidden\") return false;\r\n  return document.body.scrollHeight > (window.innerHeight || document.documentElement.clientHeight);\r\n}\r\n\r\nexport function getScroll() {\r\n  return { x: window.pageXOffset, y: window.pageYOffset };\r\n}\r\n\r\nfunction isElement(node: Element) {\r\n  const ELEMENT_NODE_TYPE = 1;\r\n  return (\r\n    node.tagName !== \"HTML\" &&\r\n    node.tagName !== \"BODY\" &&\r\n    node.nodeType == ELEMENT_NODE_TYPE\r\n  )\r\n}\r\n\r\nexport function getScrollParent(el: Element | undefined, root: HTMLElement | Window | undefined = undefined) {\r\n  root ??= canUseDom ? window : undefined;\r\n\r\n  let node = el;\r\n  while (node && node !== root && isElement(node)) {\r\n    const { overflowY } = window.getComputedStyle(node);\r\n    if (/scroll|auto|overlay/i.test(overflowY)) {\r\n      return node;\r\n    }\r\n\r\n    node = node.parentNode as Element;\r\n  }\r\n\r\n  return root;\r\n}\r\n\r\nexport function getScrollTop(el: HTMLElement | Window): number {\r\n  const top = 'scrollTop' in el ? el.scrollTop : el.pageYOffset;\r\n\r\n  // iOS scroll bounce cause minus scrollTop\r\n  return Math.max(top, 0);\r\n}\r\n\r\nexport function getInnerText(element) {\r\n  let dom = getDom(element);\r\n  return dom.innerText;\r\n}\r\n\r\nexport function getMenuOrDialogMaxZIndex(exclude: Element[] = [], element: Element) {\r\n  const base = getDom(element);\r\n  // Start with lowest allowed z-index or z-index of\r\n  // base component's element, whichever is greater\r\n  const zis = [getZIndex(base)]\r\n\r\n  const activeElements = [\r\n    ...document.getElementsByClassName('m-menu__content--active'),\r\n    ...document.getElementsByClassName('m-dialog__content--active'),\r\n  ]\r\n\r\n  // Get z-index for all active dialogs\r\n  for (let index = 0; index < activeElements.length; index++) {\r\n    if (!exclude.includes(activeElements[index])) {\r\n      zis.push(getZIndex(activeElements[index]))\r\n    }\r\n  }\r\n\r\n  return Math.max(...zis)\r\n}\r\n\r\nexport function getMaxZIndex() {\r\n  return [...document.all].reduce((r, e) => Math.max(r, +window.getComputedStyle(e).zIndex || 0), 0)\r\n}\r\n\r\nexport function getStyle(element, styleProp) {\r\n  element = getDom(element);\r\n\r\n  if (element.currentStyle) {\r\n    return element.currentStyle[styleProp];\r\n  } else if (window.getComputedStyle) {\r\n    return document.defaultView.getComputedStyle(element, null).getPropertyValue(styleProp);\r\n  }\r\n}\r\n\r\nexport function getTextAreaInfo(element) {\r\n  var result = {};\r\n  var dom = getDom(element);\r\n  result[\"scrollHeight\"] = dom.scrollHeight || 0;\r\n\r\n  if (element.currentStyle) {\r\n    result[\"lineHeight\"] = parseFloat(element.currentStyle[\"line-height\"]);\r\n    result[\"paddingTop\"] = parseFloat(element.currentStyle[\"padding-top\"]);\r\n    result[\"paddingBottom\"] = parseFloat(element.currentStyle[\"padding-bottom\"]);\r\n    result[\"borderBottom\"] = parseFloat(element.currentStyle[\"border-bottom\"]);\r\n    result[\"borderTop\"] = parseFloat(element.currentStyle[\"border-top\"]);\r\n  } else if (window.getComputedStyle) {\r\n    result[\"lineHeight\"] = parseFloat(document.defaultView.getComputedStyle(element, null).getPropertyValue(\"line-height\"));\r\n    result[\"paddingTop\"] = parseFloat(document.defaultView.getComputedStyle(element, null).getPropertyValue(\"padding-top\"));\r\n    result[\"paddingBottom\"] = parseFloat(document.defaultView.getComputedStyle(element, null).getPropertyValue(\"padding-bottom\"));\r\n    result[\"borderBottom\"] = parseFloat(document.defaultView.getComputedStyle(element, null).getPropertyValue(\"border-bottom\"));\r\n    result[\"borderTop\"] = parseFloat(document.defaultView.getComputedStyle(element, null).getPropertyValue(\"border-top\"));\r\n  }\r\n  //Firefox can return this as NaN, so it has to be handled here like that.\r\n  if (Object.is(NaN, result[\"borderTop\"]))\r\n    result[\"borderTop\"] = 1;\r\n  if (Object.is(NaN, result[\"borderBottom\"]))\r\n    result[\"borderBottom\"] = 1;\r\n  return result;\r\n}\r\n\r\nconst objReferenceDict = {};\r\n\r\nexport function disposeObj(objReferenceName) {\r\n  delete objReferenceDict[objReferenceName];\r\n}\r\n\r\nexport function upsertThemeStyle(id: string, style: string) {\r\n  const d = document.getElementById(id);\r\n  if (d) {\r\n    document.head.removeChild(d);\r\n  }\r\n\r\n  const d_style = document.createElement('style')\r\n  d_style.id = id;\r\n  d_style.type = \"text/css\";\r\n  d_style.innerHTML = style;\r\n\r\n  document.head.insertAdjacentElement('beforeend', d_style)\r\n}\r\n\r\nexport function getImageDimensions(src: string) {\r\n  return new Promise(function (resolve, reject) {\r\n    var img = new Image()\r\n    img.src = src\r\n    img.onload = function () {\r\n      resolve({\r\n        width: img.width,\r\n        height: img.height,\r\n        hasError: false\r\n      })\r\n    }\r\n    img.onerror = function () {\r\n      resolve({\r\n        width: 0,\r\n        height: 0,\r\n        hasError: true\r\n      })\r\n    }\r\n  })\r\n}\r\n\r\nexport function enablePreventDefaultForEvent(element: any, event: string, condition?: any) {\r\n  const dom = getDom(element);\r\n  if (!dom) return;\r\n  if (event === 'keydown') {\r\n    dom.addEventListener(event, (e: KeyboardEvent) => {\r\n      if (Array.isArray(condition)) {\r\n        var codes = condition as string[];\r\n        if (codes.includes(e.code)) {\r\n          e.preventDefault();\r\n        }\r\n      } else {\r\n        e.preventDefault();\r\n      }\r\n    })\r\n  } else {\r\n    dom.addEventListener(event, e => {\r\n      if (e.preventDefault) {\r\n        e.preventDefault();\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\nexport function getBoundingClientRects(selector) {\r\n  var elements = document.querySelectorAll(selector);\r\n\r\n  var result = [];\r\n\r\n  for (var i = 0; i < elements.length; i++) {\r\n    var e: Element = elements[i];\r\n    var dom = {\r\n      id: e.id,\r\n      rect: e.getBoundingClientRect()\r\n    };\r\n    result.push(dom);\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\nexport function getSize(selectors, sizeProp) {\r\n  var el = getDom(selectors);\r\n\r\n  var display = el.style.display;\r\n  var overflow = el.style.overflow;\r\n\r\n  el.style.display = \"\";\r\n  el.style.overflow = \"hidden\";\r\n\r\n  var size = el[\"offset\" + sizeProp.charAt(0).toUpperCase() + sizeProp.slice(1)] || 0;\r\n\r\n  el.style.display = display;\r\n  el.style.overflow = overflow;\r\n\r\n  return size;\r\n}\r\n\r\nexport function getProp(selectors, name) {\r\n  var el = getDom(selectors);\r\n  if (!el) {\r\n    return null;\r\n  }\r\n\r\n  return el[name];\r\n}\r\n\r\nexport function updateWindowTransition(selectors, isActive, item) {\r\n  var el: HTMLElement = getDom(selectors);\r\n  var container: HTMLElement = el.querySelector('.m-window__container');\r\n\r\n  if (item) {\r\n    var itemEl: HTMLElement = getDom(item);\r\n    container.style.height = itemEl.clientHeight + 'px';\r\n    return;\r\n  }\r\n\r\n  if (isActive) {\r\n    container.classList.add('m-window__container--is-active');\r\n    container.style.height = el.clientHeight + 'px';\r\n  } else {\r\n    container.style.height = '';\r\n    container.classList.remove('m-window__container--is-active');\r\n  }\r\n}\r\n\r\nexport function getScrollHeightWithoutHeight(selectors) {\r\n  var el: HTMLElement = getDom(selectors);\r\n  if (!el) {\r\n    return 0;\r\n  }\r\n\r\n  var height = el.style.height;\r\n  el.style.height = '0'\r\n  var scrollHeight = el.scrollHeight;\r\n  el.style.height = height;\r\n\r\n  return scrollHeight;\r\n}\r\n\r\n//register custom events\r\nwindow.onload = function () {\r\n  registerExtraEvents();\r\n  registerPasteWithData(\"pastewithdata\")\r\n  registerDirective();\r\n}\r\n\r\nfunction registerPasteWithData(customEventName) {\r\n  if (Blazor) {\r\n    Blazor.registerCustomEventType(customEventName, {\r\n      browserEventName: 'paste',\r\n      createEventArgs: (event: ClipboardEvent) => {\r\n        return {\r\n          type: event.type,\r\n          pastedData: event.clipboardData.getData('text')\r\n        };\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport function registerTextFieldOnMouseDown(element, inputElement, callback) {\r\n  if (!element || !inputElement) return\r\n\r\n  const listener = (e: MouseEvent) => {\r\n    const target = e.target;\r\n    const inputDom = getDom(inputElement);\r\n    if (target !== inputDom) {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n    }\r\n\r\n    if (callback) {\r\n      const mouseEventArgs = {\r\n        Detail: e.detail,\r\n        ScreenX: e.screenX,\r\n        ScreenY: e.screenY,\r\n        ClientX: e.clientX,\r\n        ClientY: e.clientY,\r\n        OffsetX: e.offsetX,\r\n        OffsetY: e.offsetY,\r\n        PageX: e.pageX,\r\n        PageY: e.pageY,\r\n        Button: e.button,\r\n        Buttons: e.buttons,\r\n        CtrlKey: e.ctrlKey,\r\n        ShiftKey: e.shiftKey,\r\n        AltKey: e.altKey,\r\n        MetaKey: e.metaKey,\r\n        Type: e.type\r\n      }\r\n\r\n      callback.invokeMethodAsync('Invoke', mouseEventArgs);\r\n    }\r\n  };\r\n\r\n  element.addEventListener('mousedown', listener)\r\n\r\n  const config: HtmlElementEventListenerConfig = {\r\n    listener,\r\n    handle: callback\r\n  };\r\n\r\n  const key =`registerTextFieldOnMouseDown_${getBlazorId(element)}`;\r\n  htmlElementEventListenerConfigs[key] = [config]\r\n}\r\n\r\nexport function unregisterTextFieldOnMouseDown(element: HTMLElement) {\r\n  const key =`registerTextFieldOnMouseDown_${getBlazorId(element)}`;\r\n  const configs = htmlElementEventListenerConfigs[key]\r\n  if (configs && configs.length) {\r\n    configs.forEach(item => {\r\n      item.handle.dispose();\r\n      if (element) {\r\n        element.removeEventListener(\"mousedown\", item.listener);\r\n      }\r\n    })\r\n  }\r\n}\r\n\r\nexport function containsActiveElement(selector) {\r\n  var el = getDom(selector);\r\n  if (el && el.contains) {\r\n    return el.contains(document.activeElement);\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\nexport function copyChild(el) {\r\n  if (typeof el === 'string') {\r\n    el = document.querySelector(el);\r\n  }\r\n\r\n  if (!el) return;\r\n\r\n  el.setAttribute('contenteditable', 'true');\r\n  el.focus();\r\n  document.execCommand('selectAll', false, null);\r\n  document.execCommand('copy');\r\n  document.execCommand('unselect');\r\n  el.removeAttribute('contenteditable');\r\n}\r\n\r\nexport function copyText(text) {\r\n  if (!navigator.clipboard) {\r\n    var textArea = document.createElement(\"textarea\");\r\n    textArea.value = text;\r\n\r\n    // Avoid scrolling to bottom\r\n    textArea.style.top = \"0\";\r\n    textArea.style.left = \"0\";\r\n    textArea.style.position = \"fixed\";\r\n\r\n    document.body.appendChild(textArea);\r\n    textArea.focus();\r\n    textArea.select();\r\n\r\n    try {\r\n      var successful = document.execCommand('copy');\r\n      var msg = successful ? 'successful' : 'unsuccessful';\r\n      console.log('Fallback: Copying text command was ' + msg);\r\n    } catch (err) {\r\n      console.error('Fallback: Oops, unable to copy', err);\r\n    }\r\n\r\n    document.body.removeChild(textArea);\r\n    return;\r\n  }\r\n\r\n  navigator.clipboard.writeText(text).then(function () {\r\n    console.log('Async: Copying to clipboard was successful!');\r\n  }, function (err) {\r\n    console.error('Async: Could not copy text: ', err);\r\n  });\r\n}\r\n\r\nexport function getMenuableDimensions(hasActivator, activatorSelector, isDefaultAttach, contentElement, attached, attachSelector) {\r\n  if (!attached) {\r\n    var container = document.querySelector(attachSelector);\r\n    if (contentElement.nodeType) {\r\n      container.appendChild(contentElement);\r\n    }\r\n  }\r\n\r\n  var dimensions = {\r\n    activator: {} as any,\r\n    content: {},\r\n    relativeYOffset: 0,\r\n    offsetParentLeft: 0\r\n  };\r\n\r\n  if (hasActivator) {\r\n    var activator = document.querySelector(activatorSelector);\r\n    dimensions.activator = measure(activator, isDefaultAttach)\r\n    dimensions.activator.offsetLeft = activator.offsetLeft\r\n    if (!isDefaultAttach) {\r\n      // account for css padding causing things to not line up\r\n      // this is mostly for v-autocomplete, hopefully it won't break anything\r\n      dimensions.activator.offsetTop = activator.offsetTop\r\n    } else {\r\n      dimensions.activator.offsetTop = 0\r\n    }\r\n  }\r\n\r\n  sneakPeek(() => {\r\n    if (contentElement) {\r\n      if (contentElement.offsetParent) {\r\n        const offsetRect = getRoundedBoundedClientRect(contentElement.offsetParent)\r\n        dimensions.relativeYOffset = window.pageYOffset + offsetRect.top\r\n\r\n        if (hasActivator) {\r\n          dimensions.activator.top -= dimensions.relativeYOffset\r\n          dimensions.activator.left -= window.pageXOffset + offsetRect.left\r\n        } else {\r\n          dimensions.offsetParentLeft = offsetRect.left\r\n        }\r\n      }\r\n\r\n      dimensions.content = measure(contentElement, isDefaultAttach)\r\n    }\r\n  }, contentElement);\r\n\r\n  return dimensions;\r\n}\r\n\r\nfunction measure(el: HTMLElement, isDefaultAttach) {\r\n  if (!el) return {}\r\n\r\n  const rect = getRoundedBoundedClientRect(el)\r\n\r\n  // Account for activator margin\r\n  if (!isDefaultAttach) {\r\n    const style = window.getComputedStyle(el)\r\n\r\n    rect.left = parseInt(style.marginLeft!)\r\n    rect.top = parseInt(style.marginTop!)\r\n  }\r\n\r\n  return rect\r\n}\r\n\r\nfunction getRoundedBoundedClientRect(el: Element) {\r\n  if (!el || !el.nodeType) {\r\n    return null\r\n  }\r\n\r\n  const rect = el.getBoundingClientRect()\r\n  return {\r\n    top: Math.round(rect.top),\r\n    left: Math.round(rect.left),\r\n    bottom: Math.round(rect.bottom),\r\n    right: Math.round(rect.right),\r\n    width: Math.round(rect.width),\r\n    height: Math.round(rect.height),\r\n  }\r\n}\r\n\r\nfunction sneakPeek(cb: () => void, el) {\r\n  if (!el || !el.style || el.style.display !== 'none') {\r\n    cb()\r\n    return\r\n  }\r\n\r\n  el.style.display = 'inline-block'\r\n  cb()\r\n  el.style.display = 'none'\r\n}\r\n\r\nexport function invokeMultipleMethod(windowProps, documentProps, hasActivator, activatorSelector, attach, contentElement, attached, attachSelector, element) {\r\n  var multipleResult = {\r\n    windowAndDocument: null,\r\n    dimensions: null,\r\n    zIndex: 0\r\n  };\r\n\r\n  multipleResult.windowAndDocument = getWindowAndDocumentProps(windowProps, documentProps);\r\n  multipleResult.dimensions = getMenuableDimensions(hasActivator, activatorSelector, attach, contentElement, attached, attachSelector);\r\n  multipleResult.zIndex = getMenuOrDialogMaxZIndex([contentElement], element);\r\n\r\n  return multipleResult;\r\n}\r\n\r\nexport function registerOTPInputOnInputEvent(elementList, callback) {\r\n  for (let i = 0; i < elementList.length; i++) {\r\n    const inputListener = (e: Event) => otpInputOnInputEvent(e, i, elementList, callback);\r\n    const focusListener = (e: Event) => otpInputFocusEvent(e, i, elementList);\r\n    const keyupListener =(e: KeyboardEvent) => otpInputKeyupEvent(e, i, elementList, callback);\r\n\r\n    elementList[i].addEventListener('input', inputListener);\r\n    elementList[i].addEventListener('focus', focusListener);\r\n    elementList[i].addEventListener('keyup', keyupListener);\r\n\r\n    elementList[i]._optInput = {\r\n      inputListener,\r\n      focusListener,\r\n      keyupListener\r\n    }\r\n  }\r\n}\r\n\r\nfunction otpInputKeyupEvent(e: KeyboardEvent, otpIdx: number, elementList, callback) {\r\n  e.preventDefault();\r\n  const eventKey = e.key;\r\n  if (eventKey === 'ArrowLeft' || eventKey === 'Backspace') {\r\n    if (eventKey === 'Backspace') {\r\n      const obj = {\r\n        type: eventKey,\r\n        index: otpIdx,\r\n        value: ''\r\n      }\r\n      if (callback) {\r\n        callback.invokeMethodAsync('Invoke', JSON.stringify(obj));\r\n      }\r\n    }\r\n    otpInputFocus(otpIdx - 1, elementList);\r\n  }\r\n  else if (eventKey === 'ArrowRight') {\r\n    otpInputFocus(otpIdx + 1, elementList);\r\n  }\r\n}\r\n\r\nfunction otpInputFocus(focusIndex: number, elementList) {\r\n  if (focusIndex < 0) {\r\n    otpInputFocus(0, elementList);\r\n  }\r\n  else if (focusIndex >= elementList.length) {\r\n    otpInputFocus(elementList.length - 1, elementList);\r\n  }\r\n  else {\r\n    if (document.activeElement !== elementList[focusIndex]) {\r\n      const element = getDom(elementList[focusIndex])\r\n      element.focus();\r\n    }\r\n  }\r\n}\r\n\r\nfunction otpInputFocusEvent(e: Event, otpIdx: number, elementList) {\r\n  const element = getDom(elementList[otpIdx]) as HTMLInputElement;\r\n  if (element && document.activeElement === element) {\r\n    element.select();\r\n  }\r\n}\r\n\r\nfunction otpInputOnInputEvent(e: Event, otpIdx: number, elementList, callback) {\r\n  const target = e.target as HTMLInputElement;\r\n  const value = target.value;\r\n\r\n  if (value && value !== '') {\r\n    otpInputFocus(otpIdx + 1, elementList);\r\n\r\n    if (callback) {\r\n      const obj = {\r\n        type: 'Input',\r\n        index: otpIdx,\r\n        value: value\r\n      }\r\n      callback.invokeMethodAsync('Invoke', JSON.stringify(obj));\r\n    }\r\n  }\r\n}\r\n\r\nexport function unregisterOTPInputOnInputEvent(elementList) {\r\n  for (let i = 0; i < elementList.length; i++) {\r\n    const el = elementList[i]\r\n    if(el && el._optInput) {\r\n      el.removeEventListener('input', el._optInput.inputListener)\r\n      el.removeEventListener('focus', el._optInput.focusListener)\r\n      el.removeEventListener('keyup', el._optInput.keyupListener)\r\n    }\r\n  }\r\n}\r\n\r\nexport function getListIndexWhereAttributeExists(selector: string, attribute:string, value: string) {\r\n  const tiles = document.querySelectorAll(selector);\r\n  if (!tiles) {\r\n    return -1;\r\n  }\r\n\r\n  let index = -1;\r\n  for (let i = 0; i < tiles.length; i++) {\r\n    if (tiles[i].getAttribute(attribute) === value) {\r\n      index = i;\r\n      break;\r\n    }\r\n  }\r\n\r\n  return index;\r\n}\r\n\r\nexport function scrollToTile(contentSelector: string, tilesSelector: string, index: number, keyCode: string) {\r\n  var tiles = document.querySelectorAll(tilesSelector)\r\n  if (!tiles) return;\r\n\r\n  let tile = tiles[index] as HTMLElement;\r\n\r\n  if (!tile) return;\r\n\r\n  const content = document.querySelector(contentSelector);\r\n  if (!content) return;\r\n\r\n  const scrollTop = content.scrollTop;\r\n  const contentHeight = content.clientHeight;\r\n\r\n  if (scrollTop > tile.offsetTop - 8) {\r\n    content.scrollTo({ top: tile.offsetTop - tile.clientHeight, behavior: \"smooth\" })\r\n  } else if (scrollTop + contentHeight < tile.offsetTop + tile.clientHeight + 8) {\r\n    content.scrollTo({ top: tile.offsetTop - contentHeight + tile.clientHeight * 2, behavior: \"smooth\" })\r\n  }\r\n}\r\n\r\nexport function getElementTranslateY(element) {\r\n  const style = window.getComputedStyle(element);\r\n  const transform = style.transform || style.webkitTransform;\r\n  const translateY = transform.slice(7, transform.length - 1).split(', ')[5];\r\n\r\n  return Number(translateY);\r\n}\r\n\r\nfunction isWindow(element: any | Window): element is Window {\r\n  return element === window\r\n}\r\n\r\nexport function checkIfThresholdIsExceededWhenScrolling(el: Element, parent: any, threshold: number) {\r\n  if (!el || !parent) return\r\n\r\n  let parentElement: HTMLElement | Window\r\n\r\n  if (parent == \"window\") {\r\n    parentElement = window;\r\n  } else if (parent == \"document\") {\r\n    parentElement = document.documentElement;\r\n  } else {\r\n    parentElement = document.querySelector(parent);\r\n  }\r\n\r\n  const rect = el.getBoundingClientRect();\r\n  const elementTop = rect.top;\r\n  const current = isWindow(parentElement)\r\n    ? window.innerHeight\r\n    : parentElement.getBoundingClientRect().bottom\r\n\r\n  return (current >= elementTop - threshold)\r\n}\r\n\r\nexport function get_top_domain() {\r\n  var i, h,\r\n    weird_cookie = 'weird_get_top_level_domain=cookie',\r\n    hostname = document.location.hostname.split('.');\r\n  for (i = hostname.length - 1; i >= 0; i--) {\r\n    h = hostname.slice(i).join('.');\r\n    document.cookie = weird_cookie + ';domain=.' + h + ';';\r\n    if (document.cookie.indexOf(weird_cookie) > -1) {\r\n        // We were able to store a cookie! This must be it\r\n        document.cookie = weird_cookie.split('=')[0] + '=;domain=.' + h + ';expires=Thu, 01 Jan 1970 00:00:01 GMT;';\r\n        return h;\r\n    }\r\n  }\r\n}\r\n\r\nexport function setCookie(name, value) {\r\n  var domain = get_top_domain();\r\n  if (!domain) {\r\n    domain = '';\r\n  }else if (isNaN(domain[0])) {\r\n    domain = `.${domain}`;\r\n  }\r\n  var Days = 30;\r\n  var exp = new Date();\r\n  exp.setTime(exp.getTime() + Days * 24 * 60 * 60 * 1000);\r\n  document.cookie = `${name}=${escape(value.toString())};path=/;expires=${exp.toUTCString()};domain=${domain}`;\r\n}\r\n\r\nexport function getCookie(name) {\r\n  const reg = new RegExp(`(^| )${name}=([^;]*)(;|$)`);\r\n  const arr = document.cookie.match(reg);\r\n  if (arr) {\r\n    return unescape(arr[2]);\r\n  }\r\n  return null;\r\n}\r\n\r\nexport function registerDragEvent(el: HTMLElement, dataKey?: string) {\r\n  if (el) {\r\n    const blazorId = getBlazorId(el);\r\n    const listener = (e: DragEvent) => {\r\n      if (dataKey) {\r\n        const dataValue = (e.target as HTMLElement).getAttribute(dataKey);\r\n        e.dataTransfer.setData(dataKey, dataValue);\r\n        e.dataTransfer.setData('offsetX', e.offsetX.toString())\r\n        e.dataTransfer.setData('offsetY', e.offsetY.toString())\r\n      }\r\n    };\r\n    const key = `${blazorId}:dragstart`;\r\n    htmlElementEventListenerConfigs[key] = [{\r\n      listener\r\n    }];\r\n    el.addEventListener(\"dragstart\", listener);\r\n  }\r\n}\r\n\r\nexport function unregisterDragEvent(el: HTMLElement) {\r\n  const blazorId = getBlazorId(el);\r\n  if (blazorId) {\r\n    const key = `${blazorId}:dragstart`;\r\n    if (htmlElementEventListenerConfigs[key]) {\r\n      htmlElementEventListenerConfigs[key].forEach((config) => {\r\n        el.removeEventListener(\"dragstart\", config.listener);\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\nexport function resizableDataTable(dataTable: HTMLElement) {\r\n  const table = dataTable.querySelector('table')\r\n  const row = table.querySelector('.m-data-table-header').getElementsByTagName('tr')[0];\r\n  const cols = row ? row.children : [];\r\n  if (!cols) return;\r\n\r\n  table.style.overflow = 'hidden';\r\n\r\n  const tableHeight = table.offsetHeight;\r\n\r\n  for (var i = 0; i < cols.length; i++) {\r\n    const col: any = cols[i];\r\n    const colResizeDiv: HTMLDivElement = col.querySelector(\".m-data-table-header__col-resize\");\r\n    if (!colResizeDiv) continue\r\n    colResizeDiv.style.height = tableHeight + \"px\"\r\n\r\n    let minWidth = (col.firstElementChild as HTMLElement).offsetWidth; // width of span\r\n    minWidth = minWidth + 32 + 18 + 1 + 1; // 32:padding 18:sort\r\n    if(!col.style.minWidth){\r\n      col.minWidth = minWidth;\r\n      col.style.minWidth = minWidth + \"px\";\r\n    }\r\n\r\n    setListeners(colResizeDiv);\r\n  }\r\n\r\n  function setListeners(div: HTMLDivElement) {\r\n    let pageX:number\r\n    let curCol: HTMLElement;\r\n    let nxtCol: HTMLElement;\r\n    let curColWidth: number;\r\n    let nxtColWidth: number;\r\n    let tableWidth: number;\r\n\r\n    div.addEventListener('click', e => e.stopPropagation());\r\n\r\n    div.addEventListener('mousedown', function (e) {\r\n      curCol = (e.target as HTMLElement).parentElement;\r\n      nxtCol = curCol.nextElementSibling as HTMLElement;\r\n      pageX = e.pageX;\r\n\r\n      tableWidth = table.offsetWidth;\r\n\r\n      var padding = paddingDiff(curCol);\r\n\r\n      curColWidth = curCol.offsetWidth - padding;\r\n      if (nxtCol)\r\n        nxtColWidth = nxtCol.offsetWidth - padding;\r\n    });\r\n\r\n    document.addEventListener(\"mousemove\", function (e) {\r\n      if (curCol) {\r\n        let diffX = e.pageX - pageX;\r\n\r\n        const isRtl = dataTable.classList.contains(\"m-data-table--rtl\")\r\n        if (isRtl) {\r\n          diffX = 0 - diffX;\r\n        }\r\n\r\n        let newCurColWidth = curColWidth + diffX;\r\n\r\n        curCol.style.width = newCurColWidth + \"px\";\r\n\r\n        const isOverflow = dataTable.classList.contains(\r\n          \"m-data-table--resizable-overflow\"\r\n        );\r\n        if (isOverflow) {\r\n          table.style.width = tableWidth + diffX + \"px\";\r\n          return;\r\n        }\r\n\r\n        const isIndependent = dataTable.classList.contains(\r\n          \"m-data-table--resizable-independent\"\r\n        );\r\n        if (isIndependent) {\r\n          let newNextColWidth = nxtColWidth - diffX;\r\n          const twoColWidth = curColWidth + nxtColWidth;\r\n\r\n          if (diffX > 0) {\r\n            if (nxtCol) {\r\n              if (newNextColWidth < nxtCol[\"minWidth\"]) {\r\n                newNextColWidth = nxtCol[\"minWidth\"];\r\n                newCurColWidth = twoColWidth - newNextColWidth;\r\n              }\r\n            }\r\n          } else {\r\n            if (newCurColWidth < curCol[\"minWidth\"]) {\r\n              newCurColWidth = curCol[\"minWidth\"];\r\n              newNextColWidth = twoColWidth - newCurColWidth;\r\n            }\r\n          }\r\n\r\n          curCol.style.width = newCurColWidth + \"px\";\r\n\r\n          if (nxtCol) {\r\n            nxtCol.style.width = newNextColWidth + \"px\";\r\n          }\r\n        }\r\n      }\r\n    });\r\n\r\n    document.addEventListener('mouseup', function (e) {\r\n      if (curCol) {\r\n        for (let i = 0; i < cols.length; i++) {\r\n          const col:any = cols[i];\r\n          col.style.width = col['offsetWidth'] + \"px\"\r\n        }\r\n      }\r\n      curCol = undefined;\r\n      nxtCol = undefined;\r\n      pageX = undefined;\r\n      nxtColWidth = undefined;\r\n      curColWidth = undefined;\r\n      tableWidth = undefined;\r\n    });\r\n  }\r\n\r\n  function paddingDiff(col) {\r\n    if (getStyleVal(col, 'box-sizing') == 'border-box') {\r\n      return 0;\r\n    }\r\n\r\n    var padLeft = getStyleVal(col, 'padding-left');\r\n    var padRight = getStyleVal(col, 'padding-right');\r\n    return (parseInt(padLeft) + parseInt(padRight));\r\n  }\r\n\r\n  function getStyleVal(elm, css) {\r\n    return (window.getComputedStyle(elm, null).getPropertyValue(css))\r\n  }\r\n}\r\n\r\nexport function updateDataTableResizeHeight(dataTable: HTMLElement) {\r\n  const table = dataTable.querySelector('table')\r\n  const row = table.querySelector('.m-data-table-header').getElementsByTagName('tr')[0];\r\n  const cols = row ? row.children : [];\r\n  if (!cols) return;\r\n\r\n  const tableHeight = table.offsetHeight;\r\n\r\n  for (var i = 0; i < cols.length; i++) {\r\n    const col: any = cols[i];\r\n    const colResizeDiv: HTMLDivElement = col.querySelector(\".m-data-table-header__col-resize\");\r\n    colResizeDiv.style.height = tableHeight + \"px\"\r\n  }\r\n}","import { rippleHide, rippleShow } from \"./ripple\";\r\n\r\nexport default function registerDirective() {\r\n  var observer = new MutationObserver(function (mutationsList) {\r\n    for (let mutation of mutationsList) {\r\n      if (mutation.type === \"childList\") {\r\n        var target: any = mutation.target;\r\n        //ripple\r\n        if (!target._bind && target.attributes && target.attributes[\"ripple\"]) {\r\n          target.addEventListener(\"mousedown\", rippleShow);\r\n          target.addEventListener(\"mouseup\", rippleHide);\r\n          target.addEventListener(\"mouseleave\", rippleHide);\r\n\r\n          target._bind = true;\r\n        } else if (target.nodeName == \"BODY\") {\r\n          var rippleEls = document.querySelectorAll(\"[ripple]\");\r\n          for (let rippleEl of rippleEls) {\r\n            var el: any = rippleEl;\r\n            if (!el._bind) {\r\n              el.addEventListener(\"mousedown\", rippleShow);\r\n              el.addEventListener(\"mouseup\", rippleHide);\r\n              el.addEventListener(\"mouseleave\", rippleHide);\r\n\r\n              el._bind = true;\r\n            }\r\n          }\r\n        }\r\n      } else if (mutation.type === \"attributes\") {\r\n        //ripple\r\n        if (mutation.attributeName == \"ripple\") {\r\n          var target: any = mutation.target;\r\n          if (target.attributes[\"ripple\"]) {\r\n            target.addEventListener(\"mousedown\", rippleShow);\r\n            target.addEventListener(\"mouseup\", rippleHide);\r\n            target.addEventListener(\"mouseleave\", rippleHide);\r\n          } else {\r\n            target.removeEventListener(\"mousedown\", rippleShow);\r\n            target.removeEventListener(\"mouseup\", rippleHide);\r\n            target.removeEventListener(\"mouseleave\", rippleHide);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  });\r\n\r\n  observer.observe(document, {\r\n    attributes: true,\r\n    subtree: true,\r\n    childList: true,\r\n    attributeFilter: [\"ripple\"],\r\n  });\r\n}\r\n","// Utilities\r\nimport { addPassiveEventListener, composedPath, getDom, keyCodes } from \"../../utils/helper\";\r\n\r\nvar wheelListenerCaches: { [key: string]: any } = {}\r\n\r\nexport function hideScroll(fullscreen: boolean, overlaySelector: string, content, dialog) {\r\n  if (fullscreen) {\r\n    document.documentElement!.classList.add('overflow-y-hidden')\r\n  } else {\r\n    if (!overlaySelector) return\r\n    const overlay = getDom(overlaySelector);\r\n    const listener = (e) => {\r\n      scrollListener(e, overlay, content, dialog)\r\n    }\r\n\r\n    wheelListenerCaches[`window_${overlaySelector}`] = listener;\r\n\r\n    addPassiveEventListener(window, 'wheel', listener, { passive: false })\r\n    window.addEventListener('keydown', listener)\r\n  }\r\n}\r\n\r\nexport function showScroll (overlaySelector) {\r\n  document.documentElement!.classList.remove('overflow-y-hidden')\r\n\r\n  var listener = wheelListenerCaches[`window_${overlaySelector}`]\r\n  if (listener) {\r\n    window.removeEventListener('wheel', listener)\r\n    window.removeEventListener('keydown', listener)\r\n  }\r\n}\r\n\r\nfunction scrollListener (e: WheelEvent & KeyboardEvent, overlay, content, dialog) {\r\n  if (e.type === 'keydown') {\r\n    if (\r\n      ['INPUT', 'TEXTAREA', 'SELECT'].includes((e.target as Element).tagName) ||\r\n      // https://github.com/vuetifyjs/vuetify/issues/4715\r\n      (e.target as HTMLElement).isContentEditable\r\n    ) return\r\n\r\n    const up:number[] = [keyCodes.up, keyCodes.pageup]\r\n    const down:number[] = [keyCodes.down, keyCodes.pagedown]\r\n\r\n    if (up.includes(e.keyCode)) {\r\n      (e as any).deltaY = -1\r\n    } else if (down.includes(e.keyCode)) {\r\n      (e as any).deltaY = 1\r\n    } else {\r\n      return\r\n    }\r\n  }\r\n\r\n  if (e.target === overlay ||\r\n    (e.type !== 'keydown' && e.target === document.body) ||\r\n    checkPath(e, content, dialog)) e.preventDefault()\r\n}\r\n\r\nfunction checkPath(e: WheelEvent, content, dialog) {\r\n  const path = composedPath(e)\r\n\r\n  if (e.type === 'keydown' && path[0] === document.body) {\r\n    // getSelection returns null in firefox in some edge cases, can be ignored\r\n    const selected = window.getSelection()!.anchorNode as Element\r\n    if (dialog && hasScrollbar(dialog) && isInside(selected, dialog)) {\r\n      return !shouldScroll(dialog, e)\r\n    }\r\n    return true\r\n  }\r\n\r\n  for (let index = 0; index < path.length; index++) {\r\n    const el = path[index]\r\n\r\n    if (el === document) return true\r\n    if (el === document.documentElement) return true\r\n    if (el === content) return true\r\n\r\n    if (hasScrollbar(el as Element)) return !shouldScroll(el as Element, e)\r\n  }\r\n\r\n  return true\r\n}\r\n\r\nfunction shouldScroll(el: Element, e: WheelEvent): boolean {\r\n  if (el.hasAttribute('data-app')) return false\r\n\r\n  const dir = e.shiftKey || e.deltaX ? 'x' : 'y'\r\n  const delta = dir === 'y' ? e.deltaY : e.deltaX || e.deltaY\r\n\r\n  let alreadyAtStart: boolean\r\n  let alreadyAtEnd: boolean\r\n  if (dir === 'y') {\r\n    alreadyAtStart = el.scrollTop === 0\r\n    alreadyAtEnd = el.scrollTop + el.clientHeight === el.scrollHeight\r\n  } else {\r\n    alreadyAtStart = el.scrollLeft === 0\r\n    alreadyAtEnd = el.scrollLeft + el.clientWidth === el.scrollWidth\r\n  }\r\n\r\n  const scrollingUp = delta < 0\r\n  const scrollingDown = delta > 0\r\n\r\n  if (!alreadyAtStart && scrollingUp) return true\r\n  if (!alreadyAtEnd && scrollingDown) return true\r\n  if ((alreadyAtStart || alreadyAtEnd)) {\r\n    return shouldScroll(el.parentNode as Element, e)\r\n  }\r\n\r\n  return false\r\n}\r\n\r\nfunction isInside(el: Element, parent: Element): boolean {\r\n  if (el === parent) {\r\n    return true\r\n  } else if (el === null || el === document.body) {\r\n    return false\r\n  } else {\r\n    return isInside(el.parentNode as Element, parent)\r\n  }\r\n}\r\n\r\nfunction hasScrollbar(el?: Element) {\r\n  if (!el || el.nodeType !== Node.ELEMENT_NODE) return false\r\n\r\n  const style = window.getComputedStyle(el)\r\n  return ((['auto', 'scroll'].includes(style.overflowY!) || el.tagName === 'SELECT') && el.scrollHeight > el.clientHeight) ||\r\n    ((['auto', 'scroll'].includes(style.overflowX!)) && el.scrollWidth > el.clientWidth)\r\n}\r\n","import * as interop from \"./interop\";\r\nimport * as overlayable from \"./mixins/overlayable\";\r\n\r\ndeclare global {\r\n  interface Window {\r\n    BlazorComponent: any;\r\n    MasaBlazor: any;\r\n  }\r\n}\r\n\r\nwindow.BlazorComponent = {\r\n  interop: {\r\n    ...interop,\r\n    ...overlayable,\r\n  },\r\n};\r\n\r\nwindow.MasaBlazor = {};\r\n"],"names":["functionDebounce","fn","wait","callFirst","timeout","debouncedFn","clear","clearTimeout","debounceWrapper","apply","this","arguments","context","args","callNow","setTimeout","call","cancel","flush","functionThrottle","interval","options","timeoutId","throttledFn","leading","trailing","throttleWrapper","transform","el","value","style","webkitTransform","opacity","toString","ripples","show","e","container","document","createElement","animation","appendChild","className","radius","scale","x","y","centerX","centerY","localX","localY","offset","getBoundingClientRect","target","clientX","left","clientY","top","Math","sqrt","clientWidth","clientHeight","calculate","size","width","height","computed","window","getComputedStyle","position","dataset","previousPosition","classList","add","activated","String","performance","now","remove","hide","getElementsByClassName","length","isHiding","diff","Number","delay","max","parentNode","removeChild","rippleShow","currentTarget","rippleHide","touchEvents","parseMouseEvent","event","detail","screenX","screenY","offsetX","offsetY","pageX","pageY","button","buttons","ctrlKey","shiftKey","altKey","metaKey","type","parseTouchEvent","touches","parseTouch","targetTouches","changedTouches","touchList","i","touch","push","identifier","passiveSupported","testListenerOpts","Object","defineProperty","get","addEventListener","removeEventListener","console","warn","keyCodes","freeze","enter","tab","delete","esc","space","up","down","right","end","home","del","backspace","insert","pageup","pagedown","shift","getBlazorId","_bl_","getAttributeNames","find","a","startsWith","substring","getElementSelector","Element","path","nodeType","Node","ELEMENT_NODE","selector","nodeName","toLowerCase","id","unshift","sib","nth","previousElementSibling","join","getDom","elOrString","element","documentElement","indexOf","array","split","querySelector","HTMLElement","body","error","canUseDom","registerExtraMouseEvent","eventType","eventName","Blazor","registerCustomEventType","browserEventName","createEventArgs","createSharedEventArgs","registerExtraDropEvent","eventArgs","assign","dataTransfer","dropEffect","effectAllowed","files","Array","from","map","f","name","items","kind","types","getData","elementReferenceId","getAttribute","registerExtraEvents","registerEvent","getZIndex","index","getPropertyValue","getDomInfoObj","dom","result","offsetTop","offsetLeft","scrollHeight","scrollWidth","scrollLeft","scrollTop","clientTop","clientLeft","res","viewportElement","box","offsetWidth","offsetHeight","relativeTop","relativeBottom","bottom","relativeLeft","relativeRight","absoluteLeft","absoluteTop","getElementPos","round","htmlElementEventListenerConfigs","getActiveElement","activeElement","getWindowAndDocumentProps","windowProps","documentProps","obj","forEach","prop","isElement","node","tagName","getMenuOrDialogMaxZIndex","exclude","zis","activeElements","includes","getMenuableDimensions","hasActivator","activatorSelector","isDefaultAttach","contentElement","attached","attachSelector","dimensions","activator","content","relativeYOffset","offsetParentLeft","measure","cb","display","sneakPeek","offsetParent","offsetRect","getRoundedBoundedClientRect","pageYOffset","pageXOffset","rect","parseInt","marginLeft","marginTop","otpInputKeyupEvent","otpIdx","elementList","callback","preventDefault","eventKey","key","invokeMethodAsync","JSON","stringify","otpInputFocus","focusIndex","focus","otpInputFocusEvent","select","otpInputOnInputEvent","get_top_domain","h","weird_cookie","hostname","location","slice","cookie","onload","customEventName","pastedData","clipboardData","MutationObserver","mutationsList","mutation","_bind","attributes","rippleEls","querySelectorAll","rippleEl","attributeName","observe","subtree","childList","attributeFilter","cloned","cloneNode","parentElement","stopPropagation","evt","createEvent","initEvent","dispatchEvent","attach","_a","_b","invoker","extras","htmlElement","config","listener","cancelable","relatedTarget","contains","k","debounce","debounceIt","throttle","handle","configs","item","dispose","e1","e2","dom1","dom2","text","navigator","clipboard","writeText","then","log","err","textArea","msg","execCommand","fallbackCopyTextToClipboard","noScroll","Error","preventScroll","HTMLInputElement","HTMLTextAreaElement","blur","arg","undefined","scrollIntoView","block","inline","behavior","start","level","parent","to","scrollTo","o","offsetPosition","activeEl","containerEl","firstElementChild","getAbsoluteTop","getAbsoluteLeft","addElement","elementSelector","delElement","focusDialog","count","ele","hasAttribute","innerWidth","innerHeight","isTop","scrollY","isBottom","hasOwnProperty","clsName","root","overflowY","test","innerText","all","reduce","r","zIndex","styleProp","currentStyle","defaultView","parseFloat","is","NaN","objReferenceName","d","getElementById","head","d_style","innerHTML","insertAdjacentElement","src","Promise","resolve","reject","img","Image","hasError","onerror","condition","isArray","code","elements","selectors","sizeProp","overflow","charAt","toUpperCase","isActive","itemEl","inputElement","mouseEventArgs","Detail","ScreenX","ScreenY","ClientX","ClientY","OffsetX","OffsetY","PageX","PageY","Button","Buttons","CtrlKey","ShiftKey","AltKey","MetaKey","Type","setAttribute","removeAttribute","multipleResult","windowAndDocument","inputListener","focusListener","keyupListener","_optInput","attribute","tiles","contentSelector","tilesSelector","keyCode","tile","contentHeight","translateY","threshold","elementTop","domain","isNaN","exp","Date","setTime","getTime","Days","escape","toUTCString","reg","RegExp","arr","match","unescape","dataKey","blazorId","dataValue","setData","dataTable","table","row","getElementsByTagName","cols","children","tableHeight","col","colResizeDiv","minWidth","setListeners","div","curCol","nxtCol","curColWidth","nxtColWidth","tableWidth","nextElementSibling","padding","getStyleVal","padLeft","padRight","paddingDiff","diffX","newCurColWidth","newNextColWidth","twoColWidth","elm","css","wheelListenerCaches","shouldScroll","dir","deltaX","delta","deltaY","alreadyAtStart","alreadyAtEnd","isInside","hasScrollbar","overflowX","fullscreen","overlaySelector","dialog","overlay","isContentEditable","composedPath","selected","getSelection","anchorNode","checkPath","scrollListener","passive","BlazorComponent","interop","overlayable","MasaBlazor"],"mappings":"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"}