{"version":3,"file":"outside-click.js","sources":["../../../BlazorComponent.Web/src/mixins/outside-click/index.ts"],"sourcesContent":["class OutsideClick {\r\n  dotNetHelper: DotNet.DotNetObject;\r\n  listener: (e: MouseEvent & KeyboardEvent & FocusEvent) => void;\r\n  mousedownListener: (e: MouseEvent) => void;\r\n  excludedSelectors: string[];\r\n  lastMousedownWasOutside: boolean = true;\r\n\r\n  constructor(dotNetHelper: DotNet.DotNetObject, excludedSelectors: string[]) {\r\n    this.dotNetHelper = dotNetHelper;\r\n    this.excludedSelectors = excludedSelectors;\r\n  }\r\n\r\n  genListeners() {\r\n    this.listener = (e) => {\r\n      if (this.checkEvent(e)) return;\r\n\r\n      if (this.lastMousedownWasOutside) {\r\n        this.dotNetHelper.invokeMethodAsync(\"OnOutsideClick\");\r\n      }\r\n    };\r\n\r\n    this.mousedownListener = (e) => {\r\n      this.lastMousedownWasOutside = !this.checkEvent(e);\r\n    };\r\n  }\r\n\r\n  addListeners() {\r\n    console.log('test~~~~')\r\n    this.genListeners();\r\n    document.addEventListener(\"click\", this.listener, true);\r\n    document.addEventListener(\"mousedown\", this.mousedownListener, true);\r\n  }\r\n\r\n  removeListeners() {\r\n    document.removeEventListener(\"click\", this.listener, true);\r\n    document.removeEventListener(\"mousedown\", this.mousedownListener, true);\r\n  }\r\n\r\n  resetListener() {\r\n    this.removeListeners();\r\n    this.addListeners();\r\n  }\r\n\r\n  updateExcludeSelectors(selectors: string[]) {\r\n    this.excludedSelectors = selectors;\r\n  }\r\n\r\n  checkEvent(e: MouseEvent) {\r\n    return this.excludedSelectors.some((selector) => {\r\n      const el = document.querySelector(selector);\r\n      if (!el) return false;\r\n\r\n      return el.contains(e.target as HTMLElement);\r\n    });\r\n  }\r\n\r\n  dispose() {\r\n    console.log('dispose')\r\n    this.removeListeners();\r\n    this.dotNetHelper.dispose();\r\n  }\r\n}\r\n\r\nfunction init(dotNetHelper: DotNet.DotNetObject, excludeSelectors: string[]) {\r\n  var instance = new OutsideClick(dotNetHelper, excludeSelectors);\r\n\r\n  instance.addListeners();\r\n\r\n  return instance;\r\n}\r\n\r\nexport { init };\r\n"],"names":["OutsideClick","constructor","dotNetHelper","excludedSelectors","this","lastMousedownWasOutside","genListeners","listener","e","checkEvent","invokeMethodAsync","mousedownListener","addListeners","console","log","document","addEventListener","removeListeners","removeEventListener","resetListener","updateExcludeSelectors","selectors","some","selector","el","querySelector","contains","target","dispose","init","excludeSelectors","instance"],"mappings":"AAAA,MAAMA,EAOJC,YAAYC,EAAmCC,GAF/CC,KAAuBC,yBAAY,EAGjCD,KAAKF,aAAeA,EACpBE,KAAKD,kBAAoBA,CAC1B,CAEDG,eACEF,KAAKG,SAAYC,IACXJ,KAAKK,WAAWD,IAEhBJ,KAAKC,yBACPD,KAAKF,aAAaQ,kBAAkB,iBACrC,EAGHN,KAAKO,kBAAqBH,IACxBJ,KAAKC,yBAA2BD,KAAKK,WAAWD,EAAE,CAErD,CAEDI,eACEC,QAAQC,IAAI,YACZV,KAAKE,eACLS,SAASC,iBAAiB,QAASZ,KAAKG,UAAU,GAClDQ,SAASC,iBAAiB,YAAaZ,KAAKO,mBAAmB,EAChE,CAEDM,kBACEF,SAASG,oBAAoB,QAASd,KAAKG,UAAU,GACrDQ,SAASG,oBAAoB,YAAad,KAAKO,mBAAmB,EACnE,CAEDQ,gBACEf,KAAKa,kBACLb,KAAKQ,cACN,CAEDQ,uBAAuBC,GACrBjB,KAAKD,kBAAoBkB,CAC1B,CAEDZ,WAAWD,GACT,OAAOJ,KAAKD,kBAAkBmB,MAAMC,IAClC,MAAMC,EAAKT,SAASU,cAAcF,GAClC,QAAKC,GAEEA,EAAGE,SAASlB,EAAEmB,OAAsB,GAE9C,CAEDC,UACEf,QAAQC,IAAI,WACZV,KAAKa,kBACLb,KAAKF,aAAa0B,SACnB,EAGH,SAASC,EAAK3B,EAAmC4B,GAC/C,IAAIC,EAAW,IAAI/B,EAAaE,EAAc4B,GAI9C,OAFAC,EAASnB,eAEFmB,CACT"}